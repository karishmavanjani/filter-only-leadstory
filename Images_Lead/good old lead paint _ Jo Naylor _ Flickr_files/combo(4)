YUI.add("keyboard-manager",function(e){var t;(e.KeyboardManager=function(){var t=this;this.keyEventScope=["*"],e.on("flickr:setKeyEventScope",function(e){t.setCurrentKeyEventScope(e)}),e.on("flickr:removeKeyEventScope",function(e){t.removeCurrentKeyEventScope(e)})}).prototype={on:function(t,n,r){return void 0===r&&(r=n,n=null),e.one("doc").on("key",this.handleKey.bind(this,r,n),t)},handleKey:function(e,n,r){if(!(r.metaKey||r.altKey||r.shiftKey||r.ctrlKey||this.inputHasFocus())){var i=t.get(r,"keyEventScope");i||(i=this.getCurrentKeyEventScope(),t.add(r,{keyEventScope:i})),"*"!==n&&n!==i||e(r)}},inputHasFocus:function(){var t,n;try{t=e.one(document.activeElement)}catch(e){return!1}return!!t&&("INPUT"===(n=t.get("tagName").toUpperCase())?/^text|search|tel|url|email|password|datetime|date|month|week|time|datetime-local|number|range|color$/i.test(t.get("type")):"TEXTAREA"===n||"SELECT"===n||(t.getAttribute("contenteditable")||!1))},setCurrentKeyEventScope:function(e){var t=this.keyEventScope.indexOf(e);-1===t?this.keyEventScope.push(e):this.keyEventScope=this.keyEventScope.slice(0,t+1)},getCurrentKeyEventScope:function(){return this.keyEventScope.slice(-1)[0]},getKeyEventScopeStack:function(){return this.keyEventScope},removeCurrentKeyEventScope:function(e){var t=this.keyEventScope.indexOf(e);t>-1&&(this.keyEventScope=this.keyEventScope.slice(0,t))},resetCurrentKeyEventScope:function(e){this.keyEventScope=["*"]}},t=(function(){function t(e){var t;switch(e.type){case"key":t=e.which+e.pageX+e.pageY;break;default:t=e.type+e.pageX+e.pageY}return t}function n(e){delete r[e]}var r={};return{add:function(i,c){var o,a,u=t(i);e.Lang.isObject(i)&&e.Lang.isObject(i._event)&&e.Lang.isObject(c)&&(a=e.later(1,this,n,u),o=r[u]||{},e.mix(o,c,!0),o.timer&&o.timer.cancel(),o.timer=a,r[u]=o)},get:function(i,c){var o=t(i),a=r[o]||{};return a.timer&&a.timer.cancel(),a.timer=e.later(1,this,n,o),c?a[c]:a}}})()},"@VERSION@",{requires:["event-key"]});YUI.add("overflow-helper",function(e){e.OverflowHelper={detectScrollbarSize:function(t){var o,n=0;return YUI.Env.isServer||((o=e.Node.create("<div></div>")).setStyle("width",100).setStyle("height",100).setStyle("overflow","scroll").setStyle("position","absolute").setStyle("top",-9999),t.append(o),n=o._node.offsetWidth-o._node.clientWidth,o.remove(!0)),n},addFlowListener:function(t,o,n,i){var r,l,v,d,f="over"===o;"OverflowEvent"in window?(d=function(e){if(e.type===o+"flow"||0===e.orient&&e.horizontalOverflow===f||1===e.orient&&e.verticalOverflow===f||2===e.orient&&e.horizontalOverflow===f&&e.verticalOverflow===f)return n.call(this,e)},v=t._node.addEventListener("overflowchanged",d,!1),i({detach:function(){t._node.removeEventListener("overflowchanged",d)}})):(function(t,o){var n,i,r;YUI.Env.isServer||((n=e.Node.create("<div>test event</div>")).setStyle("height: 1px").setStyle("width","1px").setStyle("opacity",0).setStyle("position","absolute").setStyle("top",-99999).setStyle("left",-99999).setStyle("overflow","auto"),t.append(n),i=setTimeout(function(){n._node.removeEventListener("overflow",r),n.remove(!0),o(!1)},10),r=function(e){clearTimeout(i),n._node.removeEventListener("overflow",r),n.remove(!0),o(!0)},n._node.addEventListener("overflow",r,!1))})(t,function(e){e?(d=function(e){if(e.type===o+"flow"||0===e.orient&&e.horizontalOverflow===f||1===e.orient&&e.verticalOverflow===f||2===e.orient&&e.horizontalOverflow===f&&e.verticalOverflow===f)return n.call(this,e)},v=t._node.addEventListener(o+"flow",d,!1),i({detach:function(){t._node.removeEventListener(o+"flow",d)}})):(l=function(){t._node.scrollHeight>t._node.clientHeight?"over"===o&&n.call(t._node,{}):"under"===o&&n.call(t._node,{})},"MutationObserver"in window?((r=new MutationObserver(function(e){e.some(function(e){return l(),!0})})).observe(t._node,{attributes:!1,subtree:!0,childList:!0}),i({detach:function(){r.disconnect()}})):"MutationEvent"in window&&(d=function(e){setTimeout(function(){l()},10)},v=t._node.addEventListener("DOMSubtreeModified",d,!1),i({detach:function(){t._node.removeEventListener("DOMSubtreeModified",d)}})))})}}},"@VERSION@",{requires:[]});YUI.add("priority-queue",function(t,e){var o,r;t.PriorityQueue=o=function(t){this._comp=t||r,this._elts=[]},r=function(t,o){var r=typeof t,i=typeof o;if("number"===r&&"number"===i)return t-o;if("string"!==r||"string"!==i)throw new Error("["+e+"] can't sort items of type "+r+" and "+i);return t===o?0:t>o?1:void 0},o.prototype.size=function(){return this._elts.length},o.prototype.isEmpty=function(){return 0===this._elts.length},o.prototype.push=function(){var t=Array.prototype.slice.call(arguments);1===t.length?this._elts.push(t[0]):this._elts=this._elts.concat(t),this.sort()},o.prototype.pop=function(){return this._elts.pop()},o.prototype.peek=function(){return this._elts[this._elts.length-1]},o.prototype.sort=function(t){t&&(this._comp=t),this._elts.sort(this._comp)},o.prototype.clear=function(t){this._elts=[]},o.prototype.map=function(t){return this._elts.map(t)}},"@VERSION@",{requires:[]});YUI.add("defer-images",function(t,e){function n(){b||(f=new Array(l),s=new t.PriorityQueue(function(t,e){return i(m,e)-i(m,t)}),h=!0,u(),r(),a(),t.globalEvents.subscribe("window:scroll",function(){u(),s.sort()}),b=!0)}function r(){var e=[];(c=t.all(w)).each(function(t,n){var r=t.getXY();e.push({x:r[0],y:r[1],url:t.getAttribute(d),node:t,errorCount:0})}),s.push.apply(s,e)}function a(){var t,e,n;if(h)for(t=0;t<l;t++)(e=f[t])&&!e.complete||(n=s.pop())&&(f[t]=e={task:n,complete:!1},o(e))}function o(t){var e=this,n=new Image,r=function(t){var e=t.task.node;switch(e.get("tagName").toLowerCase()){case"img":e.setAttribute("src",t.task.url);break;case"video":e.setAttribute("poster",t.task.url);break;default:e.setStyle("backgroundImage","url("+t.task.url+")")}e.setAttribute(d,g),t.complete=!0,a()}.bind(this,t);n.onload=r,n.onerror=function(){var n;t.task.errorCount++,t.task.errorCount>p?(n=/[a-f0-9]+(_[a-z]{1,2})?\.[a-z]{3,4}$/.exec(t.task.url),t.task.url="https://s.yimg.com/pw/images/"+e.appContext.lang.toLowerCase()+"/photo_unavailable"+(n[1]?n[1]:"")+".png",r()):o(t)},n.src=t.task.url,n.complete&&r()}function i(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function u(){m={x:t.config.win.pageXOffset+t.config.win.innerWidth/2,y:t.config.win.pageYOffset+t.config.win.innerHeight/2}}var s,c,f,l=4,p=3,g="loaded",d="data-defer-src",w="["+d+"]:not(["+d+'="'+g+'"])',m={x:0,y:0},b=!1,h=!1;t.DeferImages={init:n,update:function(){b?(s.clear(),r(),a()):n()},pause:function(){h=!1},resume:function(){h=!0,a()}}},"@VERSION@",{requires:["priority-queue","app-context","global-events"]});YUI.add("accessibility",function(e,n){function t(){var n=e.one(document.activeElement);n&&n.addClass("no-outline")}function a(){var n=e.one(document.activeElement);n&&n.removeClass("no-outline")}e.Accessibility={manageFocusOutlines:function(e){e.registerEventHandler(e.get("container").on("mouseup",t)),e.registerEventHandler(e.get("container").on("focus",a))},makeDroparoundAnchorAccessible:function(e){var n,t=e.view,a=e.getDroparound,r=e.anchor,o=e.handler;t.registerEventHandler(r.on("key",function(e){e.preventDefault(),e.stopPropagation(),n=a(),"true"===e.target.get("aria-expanded")?(n&&n.close(),e.target.set("aria-expanded","false")):(o.call(t,e),n&&!n.isClosed&&e.target.set("aria-expanded","true"))},"down:13,32")),t.registerEventHandler(r.on("key",function(e){var t=!0;if(9===e.keyCode&&(t=t&&!e.shiftKey),"true"===e.target.getAttribute("aria-expanded")&&t&&(e.preventDefault(),n=a())){var r=n.get("container").one("ul[role=menu]").one("li:first-child");r&&r.focus()}},"down:40,9"))}}},"@VERSION@",{requires:[]});/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("anim-base",function(e,t){var n="running",r="startTime",i="elapsedTime",s="start",o="tween",u="end",a="node",f="paused",l="reverse",c="iterationCount",h=Number,p={},d;e.Anim=function(){e.Anim.superclass.constructor.apply(this,arguments),e.Anim._instances[e.stamp(this)]=this},e.Anim.NAME="anim",e.Anim._instances={},e.Anim.RE_DEFAULT_UNIT=/^width|height|top|right|bottom|left|margin.*|padding.*|border.*$/i,e.Anim.DEFAULT_UNIT="px",e.Anim.DEFAULT_EASING=function(e,t,n,r){return n*e/r+t},e.Anim._intervalTime=20,e.Anim.behaviors={left:{get:function(e,t){return e._getOffset(t)}}},e.Anim.behaviors.top=e.Anim.behaviors.left,e.Anim.DEFAULT_SETTER=function(t,n,r,i,s,o,u,a){var f=t._node,l=f._node,c=u(s,h(r),h(i)-h(r),o);l?"style"in l&&(n in l.style||n in e.DOM.CUSTOM_STYLES)?(a=a||"",f.setStyle(n,c+a)):"attributes"in l&&n in l.attributes?f.setAttribute(n,c):n in l&&(l[n]=c):f.set?f.set(n,c):n in f&&(f[n]=c)},e.Anim.DEFAULT_GETTER=function(t,n){var r=t._node,i=r._node,s="";return i?"style"in i&&(n in i.style||n in e.DOM.CUSTOM_STYLES)?s=r.getComputedStyle(n):"attributes"in i&&n in i.attributes?s=r.getAttribute(n):n in i&&(s=i[n]):r.get?s=r.get(n):n in r&&(s=r[n]),s},e.Anim.ATTRS={node:{setter:function(t){return t&&(typeof t=="string"||t.nodeType)&&(t=e.one(t)),this._node=t,!t,t}},duration:{value:1},easing:{value:e.Anim.DEFAULT_EASING,setter:function(t){if(typeof t=="string"&&e.Easing)return e.Easing[t]}},from:{},to:{},startTime:{value:0,readOnly:!0},elapsedTime:{value:0,readOnly:!0},running:{getter:function(){return!!p[e.stamp(this)]},value:!1,readOnly:!0},iterations:{value:1},iterationCount:{value:0,readOnly:!0},direction:{value:"normal"},paused:{readOnly:!0,value:!1},reverse:{value:!1}},e.Anim.run=function(){var t=e.Anim._instances,n;for(n in t)t[n].run&&t[n].run()},e.Anim.pause=function(){for(var t in p)p[t].pause&&p[t].pause();e.Anim._stopTimer()},e.Anim.stop=function(){for(var t in p)p[t].stop&&p[t].stop();e.Anim._stopTimer()},e.Anim._startTimer=function(){d||(d=setInterval(e.Anim._runFrame,e.Anim._intervalTime))},e.Anim._stopTimer=function(){clearInterval(d),d=0},e.Anim._runFrame=function(){var t=!0,n;for(n in p)p[n]._runFrame&&(t=!1,p[n]._runFrame());t&&e.Anim._stopTimer()},e.Anim.RE_UNITS=/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/;var v={run:function(){return this.get(f)?this._resume():this.get(n)||this._start(),this},pause:function(){return this.get(n)&&this._pause(),this},stop:function(e){return(this.get(n)||this.get(f))&&this._end(e),this},_added:!1,_start:function(){this._set(r,new Date-this.get(i)),this._actualFrames=0,this.get(f)||this._initAnimAttr(),p[e.stamp(this)]=this,e.Anim._startTimer(),this.fire(s)},_pause:function(){this._set(r,null),this._set(f,!0),delete p[e.stamp(this)],this.fire("pause")},_resume:function(){this._set(f,!1),p[e.stamp(this)]=this,this._set(r,new Date-this.get(i)),e.Anim._startTimer(),this.fire("resume")},_end:function(t){var n=this.get("duration")*1e3;t&&this._runAttrs(n,n,this.get(l)),this._set(r,null),this._set(i,0),this._set(f,!1),delete p[e.stamp(this)],this.fire(u,{elapsed:this.get(i)})},_runFrame:function(){var e=this._runtimeAttr.duration,t=new Date-this.get(r),n=this.get(l),s=t>=e;this._runAttrs(t,e,n),this._actualFrames+=1,this._set(i,t),this.fire(o),s&&this._lastFrame()},_runAttrs:function(t,n,r){var i=this._runtimeAttr,s=e.Anim.behaviors,o=i.easing,u=n,a=!1,f,l,c;t>=n&&(a=!0),r&&(t=n-t,u=0);for(c in i)i[c].to&&(f=i[c],l=c in s&&"set"in s[c]?s[c].set:e.Anim.DEFAULT_SETTER,a?l(this,c,f.from,f.to,u,n,o,f.unit):l(this,c,f.from,f.to,t,n,o,f.unit))},_lastFrame:function(){var e=this.get("iterations"),t=this.get(c);t+=1,e==="infinite"||t<e?(this.get("direction")==="alternate"&&this.set(l,!this.get(l)),this.fire("iteration")):(t=0,this._end()),this._set(r,new Date),this._set(c,t)},_initAnimAttr:function(){var t=this.get("from")||{},n=this.get("to")||{},r={duration:this.get("duration")*1e3,easing:this.get("easing")},i=e.Anim.behaviors,s=this.get(a),o,u,f;e.each(n,function(n,a){typeof n=="function"&&(n=n.call(this,s)),u=t[a],u===undefined?u=a in i&&"get"in i[a]?i[a].get(this,a):e.Anim.DEFAULT_GETTER(this,a):typeof u=="function"&&(u=u.call(this,s));var l=e.Anim.RE_UNITS.exec(u),c=e.Anim.RE_UNITS.exec(n);u=l?l[1]:u,f=c?c[1]:n,o=c?c[2]:l?l[2]:"",!o&&e.Anim.RE_DEFAULT_UNIT.test(a)&&(o=e.Anim.DEFAULT_UNIT);if(!u||!f){e.error('invalid "from" or "to" for "'+a+'"',"Anim");return}r[a]={from:e.Lang.isObject(u)?e.clone(u):u,to:f,unit:o}},this),this._runtimeAttr=r},_getOffset:function(e){var t=this._node,n=t.getComputedStyle(e),r=e==="left"?"getX":"getY",i=e==="left"?"setX":"setY",s;return n==="auto"&&(s=t.getStyle("position"),s==="absolute"||s==="fixed"?(n=t[r](),t[i](n)):n=0),n},destructor:function(){delete e.Anim._instances[e.stamp(this)]}};e.extend(e.Anim,e.Base,v)},"3.16.0",{requires:["base-base","node-style"]});
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("anim-color",function(e,t){var n=Number;e.Anim.getUpdatedColorValue=function(t,r,i,s,o){return t=e.Color.re_RGB.exec(e.Color.toRGB(t)),r=e.Color.re_RGB.exec(e.Color.toRGB(r)),(!t||t.length<3||!r||r.length<3)&&e.error("invalid from or to passed to color behavior"),"rgb("+[Math.floor(o(i,n(t[1]),n(r[1])-n(t[1]),s)),Math.floor(o(i,n(t[2]),n(r[2])-n(t[2]),s)),Math.floor(o(i,n(t[3]),n(r[3])-n(t[3]),s))].join(", ")+")"},e.Anim.behaviors.color={set:function(t,n,r,i,s,o,u){t._node.setStyle(n,e.Anim.getUpdatedColorValue(r,i,s,o,u))},get:function(e,t){var n=e._node.getComputedStyle(t);return n=n==="transparent"?"rgb(255, 255, 255)":n,n}},e.each(["backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],function(t){e.Anim.behaviors[t]=e.Anim.behaviors.color})},"3.16.0",{requires:["anim-base"]});
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("anim-xy",function(e,t){var n=Number;e.Anim.behaviors.xy={set:function(e,t,r,i,s,o,u){e._node.setXY([u(s,n(r[0]),n(i[0])-n(r[0]),o),u(s,n(r[1]),n(i[1])-n(r[1]),o)])},get:function(e){return e._node.getXY()}}},"3.16.0",{requires:["anim-base","node-screen"]});
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("anim-curve",function(e,t){e.Anim.behaviors.curve={set:function(t,n,r,i,s,o,u){r=r.slice.call(r),i=i.slice.call(i);var a=u(s,0,100,o)/100;i.unshift(r),t._node.setXY(e.Anim.getBezier(i,a))},get:function(e){return e._node.getXY()}},e.Anim.getBezier=function(e,t){var n=e.length,r=[],i,s;for(i=0;i<n;++i)r[i]=[e[i][0],e[i][1]];for(s=1;s<n;++s)for(i=0;i<n-s;++i)r[i][0]=(1-t)*r[i][0]+t*r[parseInt(i+1,10)][0],r[i][1]=(1-t)*r[i][1]+t*r[parseInt(i+1,10)][1];return[r[0][0],r[0][1]]}},"3.16.0",{requires:["anim-xy"]});
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("anim-easing",function(e,t){var n={easeNone:function(e,t,n,r){return n*e/r+t},easeIn:function(e,t,n,r){return n*(e/=r)*e+t},easeOut:function(e,t,n,r){return-n*(e/=r)*(e-2)+t},easeBoth:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},easeInStrong:function(e,t,n,r){return n*(e/=r)*e*e*e+t},easeOutStrong:function(e,t,n,r){return-n*((e=e/r-1)*e*e*e-1)+t},easeBothStrong:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e+t:-n/2*((e-=2)*e*e*e-2)+t},elasticIn:function(e,t,n,r,i,s){var o;return e===0?t:(e/=r)===1?t+n:(s||(s=r*.3),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),-(i*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*2*Math.PI/s))+t)},elasticOut:function(e,t,n,r,i,s){var o;return e===0?t:(e/=r)===1?t+n:(s||(s=r*.3),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),i*Math.pow(2,-10*e)*Math.sin((e*r-o)*2*Math.PI/s)+n+t)},elasticBoth:function(e,t,n,r,i,s){var o;return e===0?t:(e/=r/2)===2?t+n:(s||(s=r*.3*1.5),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),e<1?-0.5*i*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*2*Math.PI/s)+t:i*Math.pow(2,-10*(e-=1))*Math.sin((e*r-o)*2*Math.PI/s)*.5+n+t)},backIn:function(e,t,n,r,i){return i===undefined&&(i=1.70158),e===r&&(e-=.001),n*(e/=r)*e*((i+1)*e-i)+t},backOut:function(e,t,n,r,i){return typeof i=="undefined"&&(i=1.70158),n*((e=e/r-1)*e*((i+1)*e+i)+1)+t},backBoth:function(e,t,n,r,i){return typeof i=="undefined"&&(i=1.70158),(e/=r/2)<1?n/2*e*e*(((i*=1.525)+1)*e-i)+t:n/2*((e-=2)*e*(((i*=1.525)+1)*e+i)+2)+t},bounceIn:function(t,n,r,i){return r-e.Easing.bounceOut(i-t,0,r,i)+n},bounceOut:function(e,t,n,r){return(e/=r)<1/2.75?n*7.5625*e*e+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},bounceBoth:function(t,n,r,i){return t<i/2?e.Easing.bounceIn(t*2,0,r,i)*.5+n:e.Easing.bounceOut(t*2-i,0,r,i)*.5+r*.5+n}};e.Easing=n},"3.16.0",{requires:["anim-base"]});
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("anim-node-plugin",function(e,t){var n=function(t){t=t?e.merge(t):{},t.node=t.host,n.superclass.constructor.apply(this,arguments)};n.NAME="nodefx",n.NS="fx",e.extend(n,e.Anim),e.namespace("Plugin"),e.Plugin.NodeFX=n},"3.16.0",{requires:["node-pluginhost","anim-base"]});
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("anim-scroll",function(e,t){var n=Number;e.Anim.behaviors.scroll={set:function(e,t,r,i,s,o,u){var a=e._node,f=[u(s,n(r[0]),n(i[0])-n(r[0]),o),u(s,n(r[1]),n(i[1])-n(r[1]),o)];f[0]&&a.set("scrollLeft",f[0]),f[1]&&a.set("scrollTop",f[1])},get:function(e){var t=e._node;return[t.get("scrollLeft"),t.get("scrollTop")]}}},"3.16.0",{requires:["anim-base"]});
YUI.add("anchor-repositioner",function(n,e){require("hermes-core/flog")(e);var o=10;n.AnchorRepositioner=(function(){function e(n,e){l.push({key:n,y:e})}function i(){var e,o=n.config.win.location.hash.replace("#","");o&&(e=n.one('[id="'+o+'"], [name="'+o+'"]'))&&t(e)}function t(e){e instanceof n.Node||(e=n.one(e)),a=e}function r(e){var o,i,r;e&&t(e),a&&(a.scrollIntoView(!0),o=n.config.win.scrollY||n.config.win.pageYOffset,i=Math.ceil(a.getY()),r=l.reduce(function(n,e){return n+e.y},0),i>=o&&i<=o+r&&(s&&s.stop(),(s=new n.Anim({duration:.25,node:"win",easing:"easeOut",to:{scroll:[0,i-r]}})).on("end",function(n){s=null}),s.run()))}function c(o,i){i instanceof n.Node&&e(o,parseInt(i.getComputedStyle("height"),10))}function f(n){return l.some(function(e,o){if(e.key===n)return l.splice(o,1),!0})}var u,a,s,l=[];return u||(i(),e("default",o),n.on("hashchange",function(n){i(),r()},n.config.win),u={addOffset:c,removeOffset:f,jumpTo:r}),u})()},"@VERSION@",{requires:["node","anim"]});YUI.add("autotrack",function(t,e){!(function(){function t(){t=function(){},et.Symbol||(et.Symbol=e)}function e(t){return"jscomp_symbol_"+(t||"")+it++}function i(){t();var e=et.Symbol.iterator;e||(e=et.Symbol.iterator=et.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&tt(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return n(this)}}),i=function(){}}function n(t){var e=0;return(function(t){return i(),t={next:t},t[et.Symbol.iterator]=function(){return this},t})(function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}})}function o(e){i(),t(),i();var o=e[Symbol.iterator];return o?o.call(e):n(e)}function s(t){if(!(t instanceof Array)){t=o(t);for(var e,i=[];!(e=t.next()).done;)i.push(e.value);t=i}return t}function r(t,e){if(t&&1==t.nodeType&&e){if("string"==typeof e||1==e.nodeType)return t==e||a(t,e);if("length"in e)for(var i,n=0;i=e[n];n++)if(t==i||a(t,i))return!0}return!1}function a(t,e){if("string"!=typeof e)return!1;if(ot)return ot.call(t,e);e=t.parentNode.querySelectorAll(e);for(var i,n=0;i=e[n];n++)if(i==t)return!0;return!1}function h(t,e,i){function n(t){var n;if(s.composed&&"function"==typeof t.composedPath)for(var o,a=t.composedPath(),h=0;o=a[h];h++)1==o.nodeType&&r(o,e)&&(n=o);else t:{if((n=t.target)&&1==n.nodeType&&e)for(n=[n].concat((function(t){for(var e=[];t&&t.parentNode&&1==t.parentNode.nodeType;)t=t.parentNode,e.push(t);return e})(n)),a=0;h=n[a];a++)if(r(h,e)){n=h;break t}n=void 0}n&&i.call(n,t,n)}var o=document,s=void 0===(s={composed:!0,S:!0})?{}:s;return o.addEventListener(t,n,s.S),{j:function(){o.removeEventListener(t,n,s.S)}}}function c(t){if(t=t&&"."!=t?t:location.href,at[t])return at[t];if(rt.href=t,"."==t.charAt(0)||"/"==t.charAt(0))return c(rt.href);var e="0"==(e="80"==rt.port||"443"==rt.port?"":rt.port)?"":e,i=rt.host.replace(st,"");return at[t]={hash:rt.hash,host:i,hostname:rt.hostname,href:rt.href,origin:rt.origin?rt.origin:rt.protocol+"//"+i,pathname:"/"==rt.pathname.charAt(0)?rt.pathname:"/"+rt.pathname,port:e,protocol:rt.protocol,search:rt.search}}function u(t,e){var i=this;this.context=t,this.P=e,this.f=(this.c=/Task$/.test(e))?t.get(e):t[e],this.b=[],this.a=[],this.g=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n-0]=arguments[n];return i.a[i.a.length-1].apply(null,[].concat(s(e)))},this.c?t.set(e,this.g):t[e]=this.g}function l(t,e,i){(t=b(t,e)).b.push(i),f(t)}function d(t,e,i){-1<(i=(t=b(t,e)).b.indexOf(i))&&(t.b.splice(i,1),0<t.b.length?f(t):t.j())}function f(t){t.a=[];for(var e,i=0;e=t.b[i];i++){var n=t.a[i-1]||t.f.bind(t.context);t.a.push(e(n))}}function b(t,e){var i=ht.filter(function(i){return i.context==t&&i.P==e})[0];return i||(i=new u(t,e),ht.push(i)),i}function v(t,e,i,n,o,s){if("function"==typeof n){var r=i.get("buildHitTask");return{buildHitTask:function(i){i.set(t,null,!0),i.set(e,null,!0),n(i,o,s),r(i)}}}return ut({},t,e)}function p(t,e){var i=(function(t){var e={};if(!t||1!=t.nodeType)return e;if(!(t=t.attributes).length)return{};for(var i,n=0;i=t[n];n++)e[i.name]=i.value;return e})(t),n={};return Object.keys(i).forEach(function(t){if(!t.indexOf(e)&&t!=e+"on"){var o=i[t];"true"==o&&(o=!0),"false"==o&&(o=!1),t=(function(t){return t.replace(/[\-\_]+(\w?)/g,function(t,e){return e.toUpperCase()})})(t.slice(e.length)),n[t]=o}}),n}function m(t,e){var i;return function(n){for(var o=[],r=0;r<arguments.length;++r)o[r-0]=arguments[r];clearTimeout(i),i=setTimeout(function(){return t.apply(null,[].concat(s(o)))},e)}}function g(t){function e(){i||(i=!0,t())}var i=!1;return setTimeout(e,2e3),e}function w(t){return"object"==typeof t&&null!==t}function y(t,e){var i=window.GoogleAnalyticsObject||"ga";window[i]=window[i]||function(t){for(var e=[],n=0;n<arguments.length;++n)e[n-0]=arguments[n];(window[i].q=window[i].q||[]).push(e)},window.gaDevIds=window.gaDevIds||[],0>window.gaDevIds.indexOf("i5iSjo")&&window.gaDevIds.push("i5iSjo"),window[i]("provide",t,e),window.gaplugins=window.gaplugins||{},window.gaplugins[t.charAt(0).toUpperCase()+t.slice(1)]=e}function k(t,e){t.set("&_av","2.4.1");var i=t.get("&_au");if((i=parseInt(i||"0",16).toString(2)).length<ft)for(var n=ft-i.length;n;)i="0"+i,n--;e=ft-e,i=i.substr(0,e)+1+i.substr(e+1),t.set("&_au",parseInt(i||"0",2).toString(16))}function T(t,e){k(t,dt.T),this.a=ut({},e),this.g=t,this.b=this.a.stripQuery&&this.a.queryDimensionIndex?"dimension"+this.a.queryDimensionIndex:null,this.f=this.f.bind(this),this.c=this.c.bind(this),l(t,"get",this.f),l(t,"buildHitTask",this.c)}function O(t,e){var i=c(e.page||e.location),n=i.pathname;if(t.a.indexFilename){var s=n.split("/");t.a.indexFilename==s[s.length-1]&&(s[s.length-1]="",n=s.join("/"))}return"remove"==t.a.trailingSlash?n=n.replace(/\/+$/,""):"add"==t.a.trailingSlash&&(/\.\w+$/.test(n)||"/"==n.substr(-1)||(n+="/")),n={page:n+(t.a.stripQuery?(function(t,e){if(Array.isArray(t.a.queryParamsWhitelist)){var i=[];return e.slice(1).split("&").forEach(function(e){var n=o(e.split("="));e=n.next().value,n=n.next().value,-1<t.a.queryParamsWhitelist.indexOf(e)&&n&&i.push([e,n])}),i.length?"?"+i.map(function(t){return t.join("=")}).join("&"):""}return""})(t,i.search):i.search)},e.location&&(n.location=e.location),t.b&&(n[t.b]=i.search.slice(1)||"(not set)"),"function"==typeof t.a.urlFieldsFilter?(e=t.a.urlFieldsFilter(n,c),i={page:e.page,location:e.location},t.b&&(i[t.b]=e[t.b]),i):n}function E(t,e){var i=this;if(k(t,dt.U),window.addEventListener){this.a=ut({events:["click"],fieldsObj:{},attributePrefix:"ga-"},e),this.f=t,this.c=this.c.bind(this);var n="["+this.a.attributePrefix+"on]";this.b={},this.a.events.forEach(function(t){i.b[t]=h(t,n,i.c)})}}function I(t,e){var i=this;k(t,dt.V),window.IntersectionObserver&&window.MutationObserver&&(this.a=ut({rootMargin:"0px",fieldsObj:{},attributePrefix:"ga-"},e),this.c=t,this.M=this.M.bind(this),this.O=this.O.bind(this),this.K=this.K.bind(this),this.L=this.L.bind(this),this.b=null,this.items=[],this.i={},this.h={},(function(t){"loading"==document.readyState?document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e),t()}):t()})(function(){i.a.elements&&i.observeElements(i.a.elements)}))}function S(t,e){var i=[],n={},o={};return e.length&&e.forEach(function(e){e=j(e),i.push(e),o[e.id]=t.i[e.id]||null,n[e.threshold]=t.h[e.threshold]||null}),{items:i,i:o,h:n}}function x(t,e,i){1==e.nodeType&&e.id in t.i&&i(e.id);for(var n,o=0;n=e.childNodes[o];o++)x(t,n,i)}function j(t){return"string"==typeof t&&(t={id:t}),ut({threshold:0,trackFirstImpressionOnly:!0},t)}function L(){this.a={}}function F(t,e){e=void 0===e?{}:e,this.a={},this.b=t,this.w=e,this.l=null}function A(t,e,i){return t=["autotrack",t,e].join(":"),vt[t]||(vt[t]=new F(t,i),pt||(window.addEventListener("storage",C),pt=!0)),vt[t]}function M(){if(null!=bt)return bt;try{window.localStorage.setItem("autotrack","autotrack"),window.localStorage.removeItem("autotrack"),bt=!0}catch(t){bt=!1}return bt}function P(t){if(t.l={},M())try{window.localStorage.removeItem(t.b)}catch(t){}}function C(t){var e=vt[t.key];if(e){var i=ut({},e.w,D(t.oldValue));t=ut({},e.w,D(t.newValue)),e.l=t,e.ca("externalSet",t,i)}}function D(t){var e={};if(t)try{e=JSON.parse(t)}catch(t){}return e}function N(t,e,i){this.f=t,this.timeout=e||gt,this.timeZone=i,this.b=this.b.bind(this),l(t,"sendHitTask",this.b);try{this.c=new Intl.DateTimeFormat("en-US",{timeZone:this.timeZone})}catch(t){}this.a=A(t.get("trackingId"),"session",{hitTime:0,isExpired:!1}),this.a.get().id||this.a.set({id:lt()})}function H(t,e,i){var n=t.get("trackingId");return mt[n]?mt[n]:mt[n]=new N(t,e,i)}function B(t){return t.a.get().id}function U(t,e){k(t,dt.W),window.addEventListener&&(this.b=ut({increaseThreshold:20,sessionTimeout:gt,fieldsObj:{}},e),this.f=t,this.c=q(this),this.g=m(this.g.bind(this),500),this.o=this.o.bind(this),this.a=A(t.get("trackingId"),"plugins/max-scroll-tracker"),this.m=H(t,this.b.sessionTimeout,this.b.timeZone),l(t,"set",this.o),V(this))}function V(t){100>(t.a.get()[t.c]||0)&&window.addEventListener("scroll",t.g)}function q(t){return(t=c(t.f.get("page")||t.f.get("location"))).pathname+t.search}function R(t,e){k(t,dt.X),window.matchMedia&&(this.a=ut({changeTemplate:this.changeTemplate,changeTimeout:1e3,fieldsObj:{}},e),w(this.a.definitions)&&(e=this.a.definitions,this.a.definitions=Array.isArray(e)?e:[e],this.b=t,this.c=[],(function(t){t.a.definitions.forEach(function(e){if(e.name&&e.dimensionIndex){var i=K(e);t.b.set("dimension"+e.dimensionIndex,i),(function(t,e){e.items.forEach(function(i){i=_(i.media);var n=m(function(){var i=K(e),n=t.b.get("dimension"+e.dimensionIndex);i!==n&&(t.b.set("dimension"+e.dimensionIndex,i),i={transport:"beacon",eventCategory:e.name,eventAction:"change",eventLabel:t.a.changeTemplate(n,i),nonInteraction:!0},t.b.send("event",v(i,t.a.fieldsObj,t.b,t.a.hitFilter)))},t.a.changeTimeout);i.addListener(n),t.c.push({fa:i,da:n})})})(t,e)}})})(this)))}function K(t){var e;return t.items.forEach(function(t){_(t.media).matches&&(e=t)}),e?e.name:"(not set)"}function _(t){return wt[t]||(wt[t]=window.matchMedia(t))}function Z(t,e){k(t,dt.Y),window.addEventListener&&(this.a=ut({formSelector:"form",shouldTrackOutboundForm:this.shouldTrackOutboundForm,fieldsObj:{},attributePrefix:"ga-"},e),this.b=t,this.c=h("submit",this.a.formSelector,this.f.bind(this)))}function G(t,e){var i=this;k(t,dt.Z),window.addEventListener&&(this.a=ut({events:["click"],linkSelector:"a, area",shouldTrackOutboundLink:this.shouldTrackOutboundLink,fieldsObj:{},attributePrefix:"ga-"},e),this.c=t,this.f=this.f.bind(this),this.b={},this.a.events.forEach(function(t){i.b[t]=h(t,i.a.linkSelector,i.f)}))}function J(t,e){var i=this;k(t,dt.$),document.visibilityState&&(this.a=ut({sessionTimeout:gt,visibleThreshold:5e3,sendInitialPageview:!1,fieldsObj:{}},e),this.b=t,this.g=document.visibilityState,this.m=null,this.o=!1,this.v=this.v.bind(this),this.s=this.s.bind(this),this.G=this.G.bind(this),this.N=this.N.bind(this),this.c=A(t.get("trackingId"),"plugins/page-visibility-tracker"),(function(t,e){(t.a.externalSet=t.a.externalSet||[]).push(e)})(this.c,this.N),this.f=H(t,this.a.sessionTimeout,this.a.timeZone),l(t,"set",this.v),window.addEventListener("unload",this.G),document.addEventListener("visibilitychange",this.s),(function(t,e){function i(){clearTimeout(o.timeout),o.send&&d(t,"send",o.send),delete ct[n],o.R.forEach(function(t){return t()})}var n=t.get("trackingId"),o=ct[n]=ct[n]||{};clearTimeout(o.timeout),o.timeout=setTimeout(i,0),o.R=o.R||[],o.R.push(e),o.send||(o.send=function(t){return function(e){for(var n=[],o=0;o<arguments.length;++o)n[o-0]=arguments[o];i(),t.apply(null,[].concat(s(n)))}},l(t,"send",o.send))})(this.b,function(){if("visible"==document.visibilityState)i.a.sendInitialPageview&&(W(i,{ea:!0}),i.o=!0),i.c.set({time:+new Date,state:"visible",pageId:yt,sessionId:B(i.f)});else if(i.a.sendInitialPageview&&i.a.pageLoadsMetricIndex){var t=((t={}).transport="beacon",t.eventCategory="Page Visibility",t.eventAction="page load",t.eventLabel="(not set)",t["metric"+i.a.pageLoadsMetricIndex]=1,t.nonInteraction=!0,t);i.b.send("event",v(t,i.a.fieldsObj,i.b,i.a.hitFilter))}}))}function $(t,e,i){var n=((n={hitTime:i=(i||{}).hitTime})||{}).hitTime;(e=e.time?(n||+new Date)-e.time:0)&&e>=t.a.visibleThreshold&&(e=Math.round(e/1e3),n={transport:"beacon",nonInteraction:!0,eventCategory:"Page Visibility",eventAction:"track",eventValue:e,eventLabel:"(not set)"},i&&(n.queueTime=+new Date-i),t.a.visibleMetricIndex&&(n["metric"+t.a.visibleMetricIndex]=e),t.b.send("event",v(n,t.a.fieldsObj,t.b,t.a.hitFilter)))}function W(t,e){e=(i=e||{}).hitTime;var i=i.ea,n={transport:"beacon"};e&&(n.queueTime=+new Date-e),i&&t.a.pageLoadsMetricIndex&&(n["metric"+t.a.pageLoadsMetricIndex]=1),t.b.send("pageview",v(n,t.a.fieldsObj,t.b,t.a.hitFilter))}function Y(t,e){k(t,dt.aa),window.addEventListener&&(this.a=ut({fieldsObj:{},hitFilter:null},e),this.b=t,this.u=this.u.bind(this),this.J=this.J.bind(this),this.D=this.D.bind(this),this.A=this.A.bind(this),this.B=this.B.bind(this),this.F=this.F.bind(this),"complete"!=document.readyState?window.addEventListener("load",this.u):this.u())}function Q(t,e){k(t,dt.ba),history.pushState&&window.addEventListener&&(this.a=ut({shouldTrackUrlChange:this.shouldTrackUrlChange,trackReplaceState:!1,fieldsObj:{},hitFilter:null},e),this.b=t,this.c=location.pathname+location.search,this.H=this.H.bind(this),this.I=this.I.bind(this),this.C=this.C.bind(this),l(history,"pushState",this.H),l(history,"replaceState",this.I),window.addEventListener("popstate",this.C))}function X(t,e){setTimeout(function(){var i=t.c,n=location.pathname+location.search;i!=n&&t.a.shouldTrackUrlChange.call(t,n,i)&&(t.c=n,t.b.set({page:n,title:document.title}),(e||t.a.trackReplaceState)&&t.b.send("pageview",v({transport:"beacon"},t.a.fieldsObj,t.b,t.a.hitFilter)))},0)}var z,tt="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,i){if(i.get||i.set)throw new TypeError("ES3 does not support getters and setters.");t!=Array.prototype&&t!=Object.prototype&&(t[e]=i.value)},et="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,it=0,nt=window.Element.prototype,ot=nt.matches||nt.matchesSelector||nt.webkitMatchesSelector||nt.mozMatchesSelector||nt.msMatchesSelector||nt.oMatchesSelector,st=/:(80|443)$/,rt=document.createElement("a"),at={},ht=[];u.prototype.j=function(){var t=ht.indexOf(this);-1<t&&(ht.splice(t,1),this.c?this.context.set(this.P,this.f):this.context[this.P]=this.f)};var ct={},ut=Object.assign||function(t,e){for(var i=[],n=1;n<arguments.length;++n)i[n-1]=arguments[n];for(var n=0,o=i.length;n<o;n++){var s,r=Object(i[n]);for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},lt=function t(e){return e?(e^16*Math.random()>>e/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,t)},dt={T:1,U:2,V:3,X:4,Y:5,Z:6,$:7,aa:8,ba:9,W:10},ft=Object.keys(dt).length;T.prototype.f=function(t){var e=this;return function(i){if("page"==i||i==e.b){var n={location:t("location"),page:t("page")};return O(e,n)[i]}return t(i)}},T.prototype.c=function(t){var e=this;return function(i){var n=O(e,{location:i.get("location"),page:i.get("page")});i.set(n,null,!0),t(i)}},T.prototype.remove=function(){d(this.g,"get",this.f),d(this.g,"buildHitTask",this.c)},y("cleanUrlTracker",T),E.prototype.c=function(t,e){i=this.a.attributePrefix;if(!(0>e.getAttribute(i+"on").split(/\s*,\s*/).indexOf(t.type))){var i=p(e,i),n=ut({},this.a.fieldsObj,i);this.f.send(i.hitType||"event",v({transport:"beacon"},n,this.f,this.a.hitFilter,e,t))}},E.prototype.remove=function(){var t=this;Object.keys(this.b).forEach(function(e){t.b[e].j()})},y("eventTracker",E),(z=I.prototype).observeElements=function(t){var e=this;t=S(this,t),this.items=this.items.concat(t.items),this.i=ut({},t.i,this.i),this.h=ut({},t.h,this.h),t.items.forEach(function(t){var i=e.h[t.threshold]=e.h[t.threshold]||new IntersectionObserver(e.O,{rootMargin:e.a.rootMargin,threshold:[+t.threshold]});(t=e.i[t.id]||(e.i[t.id]=document.getElementById(t.id)))&&i.observe(t)}),this.b||(this.b=new MutationObserver(this.M),this.b.observe(document.body,{childList:!0,subtree:!0})),requestAnimationFrame(function(){})},z.unobserveElements=function(t){var e=[],i=[];if(this.items.forEach(function(n){t.some(function(t){return(t=j(t)).id===n.id&&t.threshold===n.threshold&&t.trackFirstImpressionOnly===n.trackFirstImpressionOnly})?i.push(n):e.push(n)}),e.length){var n=S(this,e),o=S(this,i);this.items=n.items,this.i=n.i,this.h=n.h,i.forEach(function(t){if(!n.i[t.id]){var e=o.h[t.threshold],i=o.i[t.id];i&&e.unobserve(i),n.h[t.threshold]||o.h[t.threshold].disconnect()}})}else this.unobserveAllElements()},z.unobserveAllElements=function(){var t=this;Object.keys(this.h).forEach(function(e){t.h[e].disconnect()}),this.b.disconnect(),this.b=null,this.items=[],this.i={},this.h={}},z.M=function(t){for(var e,i=0;e=t[i];i++){for(var n,o=0;n=e.removedNodes[o];o++)x(this,n,this.L);for(o=0;n=e.addedNodes[o];o++)x(this,n,this.K)}},z.O=function(t){for(var e,i=[],n=0;e=t[n];n++)for(var o,s=0;o=this.items[s];s++){var r;if((r=e.target.id===o.id)&&((r=o.threshold)?r=e.intersectionRatio>=r:(r=e.intersectionRect,r=0<r.top||0<r.bottom||0<r.left||0<r.right)),r){a=o.id;r=document.getElementById(a);var a={transport:"beacon",eventCategory:"Viewport",eventAction:"impression",eventLabel:a,nonInteraction:!0},h=ut({},this.a.fieldsObj,p(r,this.a.attributePrefix));this.c.send("event",v(a,h,this.c,this.a.hitFilter,r)),o.trackFirstImpressionOnly&&i.push(o)}}i.length&&this.unobserveElements(i)},z.K=function(t){var e=this,i=this.i[t]=document.getElementById(t);this.items.forEach(function(n){t==n.id&&e.h[n.threshold].observe(i)})},z.L=function(t){var e=this,i=this.i[t];this.items.forEach(function(n){t==n.id&&e.h[n.threshold].unobserve(i)}),this.i[t]=null},z.remove=function(){this.unobserveAllElements()},y("impressionTracker",I),L.prototype.ca=function(t,e){for(var i=[],n=1;n<arguments.length;++n)i[n-1]=arguments[n];(this.a[t]=this.a[t]||[]).forEach(function(t){return t.apply(null,[].concat(s(i)))})};var bt,vt={},pt=!1;!(function(t,e){function i(){}i.prototype=e.prototype,t.ha=e.prototype,t.prototype=new i,t.prototype.constructor=t;for(var n in e)if(Object.defineProperties){var o=Object.getOwnPropertyDescriptor(e,n);o&&Object.defineProperty(t,n,o)}else t[n]=e[n]})(F,L),F.prototype.get=function(){if(this.l)return this.l;if(M())try{this.l=D(window.localStorage.getItem(this.b))}catch(t){}return this.l=ut({},this.w,this.l)},F.prototype.set=function(t){if(this.l=ut({},this.w,this.l,t),M())try{var e=JSON.stringify(this.l);window.localStorage.setItem(this.b,e)}catch(t){}},F.prototype.j=function(){delete vt[this.b],Object.keys(vt).length||(window.removeEventListener("storage",C),pt=!1)};var mt={};N.prototype.isExpired=function(t){if((t=void 0===t?B(this):t)!=B(this))return!0;if((t=this.a.get()).isExpired)return!0;var e=t.hitTime;return!!(e&&(t=new Date,e=new Date(e),t-e>6e4*this.timeout||this.c&&this.c.format(t)!=this.c.format(e)))},N.prototype.b=function(t){var e=this;return function(i){t(i);i="start"==(n=i.get("sessionControl"))||e.isExpired();var n="end"==n,o=e.a.get();o.hitTime=+new Date,i&&(o.isExpired=!1,o.id=lt()),n&&(o.isExpired=!0),e.a.set(o)}},N.prototype.j=function(){d(this.f,"sendHitTask",this.b),this.a.j(),delete mt[this.f.get("trackingId")]};var gt=30;U.prototype.g=function(){var t=document.documentElement,e=document.body,t=Math.min(100,Math.max(0,Math.round(window.pageYOffset/(Math.max(t.offsetHeight,t.scrollHeight,e.offsetHeight,e.scrollHeight)-window.innerHeight)*100)));if((e=B(this.m))!=this.a.get().sessionId&&(P(this.a),this.a.set({sessionId:e})),this.m.isExpired(this.a.get().sessionId))P(this.a);else if(e=this.a.get()[this.c]||0,t>e&&(100!=t&&100!=e||window.removeEventListener("scroll",this.g),e=t-e,100==t||e>=this.b.increaseThreshold)){var i={};this.a.set((i[this.c]=t,i.sessionId=B(this.m),i)),t={transport:"beacon",eventCategory:"Max Scroll",eventAction:"increase",eventValue:e,eventLabel:String(t),nonInteraction:!0},this.b.maxScrollMetricIndex&&(t["metric"+this.b.maxScrollMetricIndex]=e),this.f.send("event",v(t,this.b.fieldsObj,this.f,this.b.hitFilter))}},U.prototype.o=function(t){var e=this;return function(i,n){t(i,n);var o={};(w(i)?i:(o[i]=n,o)).page&&(i=e.c,e.c=q(e),e.c!=i&&V(e))}},U.prototype.remove=function(){this.m.j(),window.removeEventListener("scroll",this.g),d(this.f,"set",this.o)},y("maxScrollTracker",U);var wt={};R.prototype.remove=function(){for(var t,e=0;t=this.c[e];e++)t.fa.removeListener(t.da)},R.prototype.changeTemplate=function(t,e){return t+" => "+e},y("mediaQueryTracker",R),Z.prototype.f=function(t,e){var i={transport:"beacon",eventCategory:"Outbound Form",eventAction:"submit",eventLabel:c(e.action).href};if(this.a.shouldTrackOutboundForm(e,c)){navigator.sendBeacon||(t.preventDefault(),i.hitCallback=g(function(){e.submit()}));var n=ut({},this.a.fieldsObj,p(e,this.a.attributePrefix));this.b.send("event",v(i,n,this.b,this.a.hitFilter,e,t))}},Z.prototype.shouldTrackOutboundForm=function(t,e){return(t=e(t.action)).hostname!=location.hostname&&"http"==t.protocol.slice(0,4)},Z.prototype.remove=function(){this.c.j()},y("outboundFormTracker",Z),G.prototype.f=function(t,e){var i=this;if(this.a.shouldTrackOutboundLink(e,c)){var n=e.getAttribute("href")||e.getAttribute("xlink:href"),o=c(n),s=v(o={transport:"beacon",eventCategory:"Outbound Link",eventAction:t.type,eventLabel:o.href},ut({},this.a.fieldsObj,p(e,this.a.attributePrefix)),this.c,this.a.hitFilter,e,t);if(navigator.sendBeacon||"click"!=t.type||"_blank"==e.target||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||1<t.which)this.c.send("event",s);else{var r=function(){if(window.removeEventListener("click",r),!t.defaultPrevented){t.preventDefault();var e=s.hitCallback;s.hitCallback=g(function(){"function"==typeof e&&e(),location.href=n})}i.c.send("event",s)};window.addEventListener("click",r)}}},G.prototype.shouldTrackOutboundLink=function(t,e){return t=t.getAttribute("href")||t.getAttribute("xlink:href"),(e=e(t)).hostname!=location.hostname&&"http"==e.protocol.slice(0,4)},G.prototype.remove=function(){var t=this;Object.keys(this.b).forEach(function(e){t.b[e].j()})},y("outboundLinkTracker",G);var yt=lt();(z=J.prototype).s=function(){var t=this;if("visible"==document.visibilityState||"hidden"==document.visibilityState){var e=(function(t){var e=t.c.get();return"visible"==t.g&&"hidden"==e.state&&e.pageId!=yt&&(e.state="visible",e.pageId=yt,t.c.set(e)),e})(this),i={time:+new Date,state:document.visibilityState,pageId:yt,sessionId:B(this.f)};"visible"==document.visibilityState&&this.a.sendInitialPageview&&!this.o&&(W(this),this.o=!0),"hidden"==document.visibilityState&&this.m&&clearTimeout(this.m),this.f.isExpired(e.sessionId)?(P(this.c),"hidden"==this.g&&"visible"==document.visibilityState&&(clearTimeout(this.m),this.m=setTimeout(function(){t.c.set(i),W(t,{hitTime:i.time})},this.a.visibleThreshold))):(e.pageId==yt&&"visible"==e.state&&$(this,e),this.c.set(i)),this.g=document.visibilityState}},z.v=function(t){var e=this;return function(i,n){var o={};(o=w(i)?i:(o[i]=n,o)).page&&o.page!==e.b.get("page")&&"visible"==e.g&&e.s(),t(i,n)}},z.N=function(t,e){t.time!=e.time&&(e.pageId!=yt||"visible"!=e.state||this.f.isExpired(e.sessionId)||$(this,e,{hitTime:t.time}))},z.G=function(){"hidden"!=this.g&&this.s()},z.remove=function(){this.c.j(),this.f.j(),d(this.b,"set",this.v),window.removeEventListener("unload",this.G),document.removeEventListener("visibilitychange",this.s)},y("pageVisibilityTracker",J),(z=Y.prototype).u=function(){if(window.FB)try{window.FB.Event.subscribe("edge.create",this.B),window.FB.Event.subscribe("edge.remove",this.F)}catch(t){}window.twttr&&this.J()},z.J=function(){var t=this;try{window.twttr.ready(function(){window.twttr.events.bind("tweet",t.D),window.twttr.events.bind("follow",t.A)})}catch(t){}},z.D=function(t){if("tweet"==t.region){var e={transport:"beacon",socialNetwork:"Twitter",socialAction:"tweet",socialTarget:t.data.url||t.target.getAttribute("data-url")||location.href};this.b.send("social",v(e,this.a.fieldsObj,this.b,this.a.hitFilter,t.target,t))}},z.A=function(t){if("follow"==t.region){var e={transport:"beacon",socialNetwork:"Twitter",socialAction:"follow",socialTarget:t.data.screen_name||t.target.getAttribute("data-screen-name")};this.b.send("social",v(e,this.a.fieldsObj,this.b,this.a.hitFilter,t.target,t))}},z.B=function(t){this.b.send("social",v({transport:"beacon",socialNetwork:"Facebook",socialAction:"like",socialTarget:t},this.a.fieldsObj,this.b,this.a.hitFilter))},z.F=function(t){this.b.send("social",v({transport:"beacon",socialNetwork:"Facebook",socialAction:"unlike",socialTarget:t},this.a.fieldsObj,this.b,this.a.hitFilter))},z.remove=function(){window.removeEventListener("load",this.u);try{window.FB.Event.unsubscribe("edge.create",this.B),window.FB.Event.unsubscribe("edge.remove",this.F)}catch(t){}!(function(t){try{window.twttr.ready(function(){window.twttr.events.unbind("tweet",t.D),window.twttr.events.unbind("follow",t.A)})}catch(t){}})(this)},y("socialWidgetTracker",Y),(z=Q.prototype).H=function(t){var e=this;return function(i){for(var n=[],o=0;o<arguments.length;++o)n[o-0]=arguments[o];t.apply(null,[].concat(s(n))),X(e,!0)}},z.I=function(t){var e=this;return function(i){for(var n=[],o=0;o<arguments.length;++o)n[o-0]=arguments[o];t.apply(null,[].concat(s(n))),X(e,!1)}},z.C=function(){X(this,!0)},z.shouldTrackUrlChange=function(t,e){return!(!t||!e)},z.remove=function(){d(history,"pushState",this.H),d(history,"replaceState",this.I),window.removeEventListener("popstate",this.C)},y("urlChangeTracker",Q)})()},"@VERSION@",{affinity:"client"});YUI.add("google-analytics",function(e,a){e.Analytics=(function(){function a(){ga.apply(null,arguments)}function t(){a("set","page",document.location.pathname),a("set","title",window.appContext.flapp.get("activeView").name),a("send","pageview")}function n(){var e="";return ga(function(a){e=a.get("linkerParam")}),e}function i(){a.apply(r,Array.prototype.concat.apply(["send","event"],arguments))}var r;Math.floor(Math.random()*Math.floor(100));return r||(a("create",{trackingId:e.config.flickr.google.analytics.property_id,sampleRate:e.config.flickr.google.analytics.sample_rate}),a("set","transport","beacon"),a("set","anonymizeIp",!0),a("require","eventTracker",{attributePrefix:"data-ga-"}),a("require","linker"),YUI_config.flickr.ga&&(a("set","expId",YUI_config.flickr.ga.experiment),a("set","expVar",YUI_config.flickr.ga.variation)),r={enqueue:a,sendPageView:t,sendEvent:i,getLinkerParam:n}),r})()},"@VERSION@",{requires:["autotrack"],affinity:"client"});YUI.add("analytics",function(e,n){e.Analytics2=(function(){function n(){return document.querySelectorAll("script[src*=adobedtm\\.com]").length<2||!window.s}function a(e){s=e=null===e||e,n()&&(s=!1),r("Adobe Analytics enabled: "+s)}function t(e){r("Debugging logging enabled: "+(l=e=null===e||e))}function i(e){if(!n())try{e=e||window.appContext.flapp.get("activeView").name,s&&(o(),(function(e,n){var a,t={bubbles:!0,cancelable:!0,detail:n};document.createEvent&&document.body.dispatchEvent?((a=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail),document.body.dispatchEvent(a)):window.CustomEvent&&document.body.dispatchEvent&&(a=new CustomEvent(e,t),document.body.dispatchEvent(a))})("sendPageView",window.dataLayer),r("Adobe Analytics PageView: "+e+", "+document.location.pathname))}catch(e){r(e)}}function o(){try{window.dataLayer||(window.dataLayer={page:{pageInfo:{pageID:"",pageName:"",destinationURL:"",referringURL:"",onsiteSearchTerm:"",language:"",country:"",geoRegion:"",author:"",pageType:""}},product:[],events:[],cart:{},transaction:{transactionID:"",total:{basePrice:0,voucherCode:"",voucherDiscount:0,currency:"",taxRate:0,shipping:0,shippingMethod:"",priceWithTax:0,transactionTotal:0,item:[]}},user:{profile:{profileInfo:{profileID:"",userName:"",language:"",intl:"",signedIn:"signedOut"},address:"",social:{facebook:"",facebookInfo:"",twitter:"",twitterInfo:""},segment:{isNewRegistration:null,isUserNewCustomer:null,isLoggedIn:null,customerClassDimension:"",visitorLifetimeValue:0}}}});var n=window.appContext&&window.appContext.getViewer?window.appContext.getViewer():null;n&&n.signedIn&&(window.dataLayer.user.profile.profileInfo.signedIn="signedIn",window.dataLayer.user.profile.profileInfo.profileID=e.murmurhash(n.nsid,n.nsid+" insecure truffle salt"),window.dataLayer.user.profile.profileInfo.intl=n.intl,window.dataLayer.user.profile.segment.customerClassDimension=n.isPro?"pro":"free"),window.navigator&&window.navigator.language&&(window.dataLayer.user.profile.profileInfo.language=window.navigator.language),window.dataLayer.page.pageInfo.pageID=e.murmurhash(document.title,document.title+" insecure hawaiian volcano salt"),window.dataLayer.page.pageInfo.pageName=window.appContext.flapp.get("activeView").name,window.dataLayer.page.pageInfo.destinationURL=document.location.href}catch(e){}}function r(e){l&&console.info("[Analytics] ",e)}var d,s=!1,l=!1;return d||(d={sendPageView:i,enableAdobeAnalytics:a,enableDebugging:t,learn:o}),d})()},"@VERSION@",{requires:["murmurhash"],affinity:"client"});YUI.add("client-app",function(e,n){function i(){k=!1}function t(n){var i,t,r=window.location,o=window.history,a=!1;if(r.search&&o.replaceState&&(i=e.QueryString.parse(r.search.replace("?","")),n.forEach(function(e){e in i&&(delete i[e],a=!0)}),a)){t=e.QueryString.stringify(i);try{o.replaceState({},"",r.pathname+(t?"?"+t:""))}catch(e){}}}function r(e,n){return n.betterUse(e,n)}function o(n){var i,t,r,o,a=[],c=["flickr.photos.addView","flickr.groups.updateViewDate","flickr.photos.getPhotos","flickr.people.addView","flickr.photosets.addView"];if(m.getViewCounter().flushQueue(),m.uploadIsInProgress())o=this.intlMessage({intlName:"client-app.UPLOAD_IN_PROGRESS"});else{for(i in m.writeAPICallsMadeOnThisPage)(t=m.writeAPICallsMadeOnThisPage[i]).completed||a.push(t);a.length&&(a.every(function(e){return-1!==c.indexOf(e.methodName)})||(e.config.flickr.requestConfig&&e.config.flickr.requestConfig.auth&&e.config.flickr.requestConfig.auth.isInsecureGod?(r=a.map(function(e){return e.methodName}).join(", "),o=this.intlMessage({intlName:"client-app.SAVING_LAST_ACTIONS"})+" In progress API Methods: "+r):o=this.intlMessage({intlName:"client-app.SAVING_LAST_ACTIONS"})))}return e.Storage.Instance.clear(),o&&((n||window.event).returnValue=o),o}function a(n){if(!k)return window.location=n.url,void n.halt();m.setClientSideRouted(!0),m.setPreviousLocation(),m.updateModelRefetchState(n.url,n.originEvent&&n.originEvent.currentTarget&&n.originEvent.currentTarget.hasClass("do-not-evict")),m.clearWriteAPICallCache(),m.setGPCredentials(null),e.loaderBar.start(),m.adManager.isEnabled()&&m.adManager.currentlyShowingAd&&m.adManager.adIsUnloading(),m.getKeyboardManager().resetCurrentKeyEventScope(),e.Object.each(m.modelRegistries,function(e,n){e.hasWeakSubscribers&&e.removeWeakSubscribers()}),b=!0}function c(){e.UA.chrome>0&&(window.scrollTo(window.scrollX,window.scrollY+1),window.scrollTo(window.scrollX,window.scrollY-1))}function s(n){e.Object.each(m.modelRegistries,function(e,n){e.hasWeakSubscribers&&e.removeWeakSubscribers()}),e.fire("close-dialogs"),"popstate"===n.src&&c(),"popstate"!==n.src||v.hasRoute(v.getPath())||e.Object.isEmpty(n.newVal)||v.navigate(v.getPath()),m.getViewCounter().flushQueue({resetDuplicateTracking:!0}),b||m.updateModelRefetchState(),b=!1}function l(e){v.set("previousView",e.prevVal)}function u(){"de"===m.getViewer().intl&&e.use("hermes-template-agof",function(){var n,i,t=v.get("activeView");n=e.config.flickr.agof.spaceids[t.name]||e.config.flickr.agof.spaceids.default,i=e.Template.get("hermes/agof")({spaceid:n}),e.one(".agof").set("innerHTML",i),y.log("AGOF",{spaceid:n})})}function f(n,i){i=i||v.get("activeView"),e.rapidTracker.getConf(i,m,n).then(function(n){e.rapidTracker.init(n)})}function p(n,i){e.rapidTracker&&e.rapidTracker.destroy&&e.rapidTracker.destroy(),f(n,i)}function d(){var n={c1:2,c2:7241469,c3:"",c4:encodeURIComponent((function(n){var i,t=n.pathname||"",r=(t.match(/^\/photos\/([^\/]+)/)||[])[1]||null;return r&&"friends"!==r&&(i=e.murmurhash(r,r+"secret insecure salt"),t=t.replace(r,i)),e.config.flickr.url.host+t})(document.location)),c5:v.get("activeView").get("spaceid"),c6:"",c15:""};e.comscore&&e.comscore.beacon&&e.comscore.beacon(n)}function g(n){var i=this.get("activeView");if(void 0===i.getViewDataFromHistory("referrer")&&i.setViewDataOnHistory("referrer",m.getPreviousURL()),p(),e.Analytics2&&(e.Analytics2.learn(),e.Analytics2.sendPageView()),d(),u(),e.DeferImages.update(),e.config.win.DARLA&&e.config.win.DARLA.event&&"function"==typeof e.config.win.DARLA.event&&e.soon(function(){try{e.config.win.DARLA.event("AGOF")}catch(e){y.info("error firing secureFrame event",{err:e})}}),m.adManager.setAdCouldBeShown(!1),e.config.win.onappclientnav)try{e.config.win.onappclientnav()}catch(n){}e.Accessibility.manageFocusOutlines(i),e.rapidTracker.beaconScroll(i),void 0!==window._sift&&window._sift.push&&window._sift.push(["_trackPageview"])}function w(n){return new e.Promise(function(i,r){var o=setTimeout(function(){r(new Error("Initial View Timeout"))},1e4);n.params.appContext=m,v.showContent(e.one("#content > .view"),{view:{name:n.name,config:n.params}},function(n){e.one("body").removeClass("dark-loader"),n._params&&(n._params.keyEventScope=n.name+n._yuid),n.setViewDataOnHistory("referrer",document.referrer),n.set("isRootView",!0),n.initialize().then(function(){f(),d(),e.Analytics2&&(e.Analytics2.learn(),e.Analytics2.enableAdobeAnalytics(window.appContext.flipper.isFlipped("enable-adobe-analytics")),e.Analytics2.sendPageView()),e.config.win.DARLA_CONFIG={events:{AGOF:{name:"AGOF",ps:"RS"}},positions:{RS:{id:"RS",dest:"tgtRS",hcpx:1,wcpx:1,h:1,w:1,supports:!1}}},"de-DE"===e.one("html").getAttribute("lang")&&setTimeout(function(){var n=e.Node.create("<script defer='true' async='true' src='https://fc.yahoo.com/sdarla/php/client.php?f=2022219890&l=RS&npv=1&ref=https%3A//flickr.com&rtype=boot'>");e.one("head").append(n)},100),u(),m.getKeyboardManager().setCurrentKeyEventScope(n.name+n._yuid),c(),e.DeferImages.init(),e.Accessibility.manageFocusOutlines(n),e.rapidTracker.beaconScroll(n),t(["campaignID","linkID"]),(function(){if(e.config.flickr.requestConfig&&e.config.flickr.requestConfig.auth&&e.config.flickr.requestConfig.auth.isInsecureGod){var n=e.all("[data-view-signature]");n.size()&&y.warn("View signature mismatches detected! A view likely modified the `params` object directly.",{views:n.getDOMNodes()})}})(),clearTimeout(o),i()}).then(null,function(e){throw y.error("There was a problem initializing or activating the view.",{err:e}),r(),e})}),v.before("navigate",a),v.before("activeViewChange",l),e.on("history:change",s),v.after("activeViewChange",g)})}function h(n,i,t,r){var o={};return e.Views&&e.Views[n]&&(o[n]={type:e.Views[n],preserve:!1}),v=new e.App({serverRouting:!0,viewContainer:"#content",container:"#content",linkSelector:":not(.server-only-link):not([target=_blank])",scrollToTop:!1,views:o}),new e.FlickrRouter(v,e.config.flickr.routes),r.auth=i,r.flapp=v,m=(function(n){return window.appContext=new e.AppContext(n),window.appContext})(r),m.routeTiming=r.routeTiming,m.routeConfig=r.routeConfig,e.mix(e.Node.DOM_EVENTS,{transitionend:!0,webkitTransitionEnd:!0}),e.ClientTransport.authorize(m),window.addEventListener("unload",function(n){e.ClientTransport.unloading=!0}),window.addEventListener("load",function(n){e.ClientTransport.unloading=!1}),m.modelImportExport.importAll(t)}var m,v,y=require("hermes-core/flog")(n),b=!1,k=e.config.flickr.clientNavEnabled;e.ClientApp={init:function(n){if(void 0===n)return e.Promise.reject({message:"Invalid config object supplied, was undefined."});var a,c,s=n.initialView,l=n.modelExport,u=n.auth,f=this;return u||i(),a=u&&n.auth.signedIn?n.auth.csrf:null,e.config.flickr.csrf.token=a,e.config.flickr.requestConfig={auth:u},n.params.routeTiming=n.routeTiming,n.params.routeConfig=n.routeConfig,t(e.config.flickr.routing_params),window.location.search&&window.location.search.match(/yc=/)&&(c=e.QueryString.parse(window.location.search.replace("?","")),e.config.flickr.ycParam=c.yc),e.transportFactory=function(n,i){return new e.ClientTransport(i)},r(s.name,e).then(function(){return h(s.name,u,l,n.params)}).then(function(){return w(s)}).then(function(){e.AnchorRepositioner.jumpTo(),e.config.win.addEventListener("beforeunload",o.bind(f))}).then(e.config.win.onappinit)},beforeUnload:o,beforeNavigate:a,_loadInitialView:r,langBundles:["client-app"],updateRapidTracker:p,disableClientNav:i},e.mix(e.ClientApp,e.Localizable)},"@VERSION@",{requires:["app-base","app-content","router","app-context","client-transport","flickr-router","handlebars-helpers","comscore","loader-bar","murmurhash","node","rapid","site-key","better-use","flickr-promise","global-events","querystring-parse-simple","querystring-stringify-simple","storage-helper","keyboard-manager","dom","overflow-helper","defer-images","accessibility","anchor-repositioner","google-analytics","analytics"],affinity:"client",langBundles:["client-app"]});YUI.add("csrf-updater",function(t){"use strict";var e=require("hermes-core/flog")("csrf");t.CsrfUpdater=function(t){this.flickrAPI=t,this._tasks=[]},t.CsrfUpdater.prototype.getKey=function(){return t.config.flickr.csrf.token||null},t.CsrfUpdater.prototype.isExpired=function(){return!!t.config.flickr.csrf.token&&Date.now()/1e3>t.config.flickr.csrf.csrfExpiresAt},t.CsrfUpdater.prototype.invalidate=function(t){var e=this._lastStored||0;if(t||(t=0),!(t<e))return this.setExpired()},t.CsrfUpdater.prototype.setExpired=function(){return t.config.flickr.csrf.csrfExpiresAt=0},t.CsrfUpdater.prototype.store=function(e,r){this._lastStored=Date.now(),r||(r=Math.floor(this._lastStored/1e3)),t.config.flickr.csrf.token=e,t.config.flickr.csrf.csrfFetched=r,t.config.flickr.csrf.csrfExpiresAt=r+t.config.flickr.csrf.fetch_interval,this.drainQueue()},t.CsrfUpdater.prototype.pushToQueue=function(t){this._tasks.push(t)},t.CsrfUpdater.prototype.drainQueue=function(){for(;this._tasks.length;)this._tasks.shift().resolve()},t.CsrfUpdater.prototype.hasQueuedTasks=function(){return!!this._tasks.length},t.CsrfUpdater.prototype.scheduleFutureFetch=function(){t.config.flickr.csrf.token&&(this._timerFutureFetch=setTimeout(this.fetch.bind(this),1e3*t.config.flickr.csrf.fetch_interval))},t.CsrfUpdater.prototype.scheduleRetry=function(e){var r=this,s=this._fetchRuns>4?1:Math.pow(2,(this._fetchRuns||1)-1)/10,i=t.config.flickr.csrf.retry_interval*s;clearTimeout(this._timerRetry),this._timerRetry=setTimeout(function(){r._timerRetry=null,r.fetch(e)},1e3*i)},t.CsrfUpdater.prototype.fetch=function(r){var s=this,i=s.hasQueuedTasks();if(clearTimeout(this._timerFutureFetch),YUI.Env.isServer){if(!r&&(r=new t.Promise(function(t,e){this.resolve=t,this.reject=e}),this.pushToQueue(r),i))return r;this._fetchRuns||(this._fetchRuns=0),this._fetchRuns++,this.flickrAPI.fetchCsrf().then(function(t){var i=t.token;if(!t.token)return e.error("Failed to fetch csrf token",t),void s.scheduleRetry(r);e.log("Received new csrf token",t),s._fetchRuns=0,s.store(i),s.scheduleFutureFetch()},function(t){e.error("Failed to fetch csrf token",{err:t}),s.scheduleRetry(r)})}else t.ClientApp&&t.ClientApp.disableClientNav();return r}},"@VERSION@",{requires:["client-app"]});YUI.add("flutil",function(e){"use strict";var t,n=e.config.win,r=e.config.doc,o={transitionTimeout:2e3},i={getPrefixedStyleProperty:{}},a={};t=e.flutil={xbrowser:{transition:{property:"transitionProperty",duration:"transitionDuration",transitionEndEvent:"transitionend"}},setStylePrefixed:function(t,n,r){var o=this.getPrefixedStyleProperty(t);return e.Array.each(o,function(e){r.setStyle(e,n)}),r},getPrefixedStyleProperty:function(t){if(i.getPrefixedStyleProperty[t])return i.getPrefixedStyleProperty[t];var n=[];return e.Array.each(["-webkit-","-moz-","-ms-",""],function(e){n.push(e+t)}),i.getPrefixedStyleProperty[t]=n,n},dump:function(){for(var e,t=new Array(arguments.length),n=0;n<t.length;++n)t[n]=arguments[n];e="string"==typeof t[0]?t.shift():"LOG",t.unshift("color: #FC0"),t.unshift("%c["+e+"]"),console.log.apply(console,t)},extend:function(e){e||(e={});for(var t=new Array(arguments.length),n=0;n<t.length;++n)t[n]=arguments[n];return Array.prototype.slice.call(t,1).forEach(function(t){if(t)for(var n in t)e[n]=t[n]}),e},objectCreate:function(e,n){var r,o;return r=function(){},r.prototype=e,o=new r,n?t.extend(o,n):o},result:function(t){return e.Lang.isFunction(t)?t():t},onTransitionEnd:function(e,r){if(r&&"function"==typeof r){var i,a,u,s;if(e=e.getDOMNode(),u=n.getComputedStyle(e)[t.xbrowser.transition.property],s=n.getComputedStyle(e)[t.xbrowser.transition.duration],!u||!s)return r();a=function(){clearTimeout(i),e.removeEventListener(t.xbrowser.transition.transitionEndEvent,a),r()},i=setTimeout(a,o.transitionTimeout),e.addEventListener(t.xbrowser.transition.transitionEndEvent,a)}},toCamelCase:function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()},setCookie:function(t){if(!t.cookieName||void 0===t.cookieValue||!t.path)throw new Error("[flutil.setCookie] Missing important parameters to set a cookie");var n=t.cookieName,r=t.cookieValue,o=t.domain||".flickr.com",i=t.path,a=t.expiresMonthsFromNow||3,u=e.Lang.isNumber(t.expires)?t.expires:e.moment().add(a,"months").toDate();t.remove&&e.Cookie.remove(n,{path:i}),e.Cookie.set(n,r,{domain:o,path:i,expires:u})},createFragment:function(e){var t,n=r.createElement("div"),o=r.createDocumentFragment();for(n.innerHTML=e;t=n.firstChild;)o.appendChild(t);return o},constrainToValues:function(e,t){if(!t)throw new Error("Must supply list to constrain to values.");return e&&"string"==typeof e?t.indexOf(e)<0?t[0]:e:t[0]},escapeInput:function(e,t){var n;return r?e||"number"==typeof e?(t||(t="text"),"html"===t?((n=r.createElement("div")).appendChild(r.createTextNode(e)),n.innerHTML):"text"===t?(n=r.createElement("div"),e=e.replace(/(<([^>]+)>\s*)+/gi," ").trim(),n.appendChild(r.createTextNode(e)),n.innerHTML):"numericstring"===t?(e+"").replace(/[^\d]/,""):void 0):"":e},disableEvent:function(n,r){r=e.merge({excepted:":not(*)",onDisabledEvent:null},r),document.body.addEventListener&&(a[n]=a[n]||{},a[n][r.excepted]&&t.enableEvent(n,r.excepted),a[n][r.excepted]=function(t){r.excepted&&e.one(t.target).ancestors(r.excepted,!0).isEmpty()&&(t.preventDefault(),t.stopPropagation(),r.onDisabledEvent&&r.onDisabledEvent(t))},document.body.addEventListener(n,a[n][r.excepted],!0))},enableEvent:function(t,n){n=e.merge({excepted:":not(*)"},n),a[t]&&a[t][n.excepted]&&(document.body.removeEventListener(t,a[t][n.excepted],!0),a[t][n.excepted]=null)},unescape:function(t){if(!t||!e.Lang.isString(t))return t;var n={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'","&#39;":"'","&#92;":"\\"};return t.replace(/(&amp;|&lt;|&gt;|&quot;|&#x27;|&#39;|&#92;)/gi,function(e){return n[e.toLowerCase()]})},normalizeURIComponents:function(e){var t,n,r,o;if(t={"&":["&amp;","&#x00026;","&#38;"],"<":["&lt;","&#x0003C;","&#60;"],">":["&gt;","&#x0003E;","&#62;"],'"':["&quot;","&#x00022;","&#34;"],"'":["&apos;","&#x00027;","&#39;"],"`":["&grave;","&DiacriticalGrave;","&#x00060;","&#96;"]},e){e=(e=e.replace(/\+/g," ")).replace(/%25/g,"%2525");for(n in t)r=n,o=t[n],e=e.replace(new RegExp(o.join("|"),"gi"),r);return e=decodeURIComponent(e)}},template:function(e,t){return e.replace(/\{\{([\w\.=]+)\}\}/g,function(e,n){var r,o=n.split(/=/);return void 0!==(r=o[0].split(/\./).reduce(function(e,t){return e?e[t]:null},t))&&null!==r?r+"":o[1]||""}).trim()},createHashCode:function(e){var t;return t="object"!=typeof e?e+"":Object.keys(e||{}).map(function(t){var n=t;try{n+=JSON.stringify(e[t])}catch(e){n+="?"}return n}).join(""),t=t.split("").reduce(function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e},0).toString().replace(/^-/,""),"0000000000".slice(0,-1*t.length)+t},camelCaseifyKeys:function(e){return Object.keys(e).reduce(function(n,r){return n[t.camelCaseify(r)]=e[r],n},{})},camelCaseify:function(e){return e.replace(/-(\w)/gi,function(e,t){return t.toUpperCase()})},unCamelCaseify:function(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^-/,"")},unicodeVariants:["(?:ae|)","(?:oe|)","(?:ss|)","(?:th|)","[aa]","[e3]","[i]","[o]","[u]","[y]","[c]","[d]","[f]","[g]","[h]","[j]","[k]","[l]","[n]","[r]","[s]","[t]","[z]"],agnosticizeUnicode:function(e){var t,n=this.unicodeVariants,r=n.length;for(t=0;t<r;t++)e=e.replace(new RegExp(n[t],"gi"),n[t]);return e},buildHttpQuery:function(e,t){return e+"?"+Object.keys(t||{}).map(function(e){return e+"="+encodeURIComponent(t[e])}).join("&")},formatNumbers:function(e){return Math.floor(e/1e6)>0?e=Math.floor(e/1e5)/10+"M":Math.floor(e/1e3)>0?e=Math.floor(e/100)/10+"K":e},formatIntlPluralNumber:function(t,n,r){var o=e.flutil.formatNumbers(n);return r?t.replace(/(?:\d*[,\.]\d+)+/,o):t.replace(/(?:\d*[,\.\s]\d+)+/,o)},openPopupWindow:function(t,n){var r,o,i,a,u,s;if("undefined"!=typeof window)return o=window,n=e.mix({name:"WIN"+(new Date).getTime(),ui:{}},n||{},!0),(i=e.mix({dependent:!0,status:!0,scrollbars:!0,width:600,height:600},n.ui,!0)).top||(i.top=Math.floor((o.screen.height-i.height)/2)),i.left||(i.left=Math.floor((o.screen.width-i.width)/2)),r=Object.keys(i).map(function(e){var t=i[e];return"boolean"==typeof t&&(t=t?"yes":"no"),e+"="+t}).join(","),(o=o.open(t,n.name,r)).focus(),(n.onUrlChange||n.onClose)&&(a="_start_",s=setInterval(function(){if(!o.location)return clearInterval(s),void(n.onClose&&n.onClose());try{u=o.location.href||"x-origin"}catch(t){o.postMessage("",e.url())}u!==a&&(a=u,n.onUrlChange&&n.onUrlChange(u))},1e3)),o},parseYYYYMMDDDatestamp:function(t){return e.Lang.isString(t)&&8===t.length?Date.parse(t.substr(0,4)+"-"+t.substr(4,2)+"-"+t.substr(6,2)):null},photoCoords:{normalize:function(e,t,n,r){return{x:e/500,y:t/375,w:n/500,h:r/375}},denormalize:function(e){return{x:500*e.x,y:375*e.y,w:500*e.w,h:375*e.h}},denormX:function(e){return 500*e.x},denormY:function(e){return 375*e.y},denormW:function(e){return 500*e.w},denormH:function(e){return 375*e.h}},getGroupsOptoutValues:function(t){var n=[];return!0===t["rebootify-group-members"]&&n.push({name:"groups_members_opt",value:0}),!0===t["enable-groups-discussion-optout"]&&n.push({name:"groups_discuss_opt",value:0}),!0===t["enable-groups-optout"]&&n.push({name:"groups_opt",value:0}),{url:e.url("/help/forum/en-us/72157645851675914/lastpage#reply"),flippers:n}},nonLockingSynchronousLoop:function(e,t,n,r){var o,i=0,a=!0,u=Object.keys(e),s=function(e){t(e),++i>=c?n():i===o||a?(i===o&&(o+=r.threshold),a=!1,setTimeout(function(){s(u[i])},1)):s(u[i])},c=u.length;(r=r||{}).threshold=r.threshold||1e3,o=r.threshold,a=!1!==r.earlyUnlock,s(u[i])}}},"@VERSION@",{requires:["url"]});/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("base-pluginhost",function(e,t){var n=e.Base,r=e.Plugin.Host;e.mix(n,r,!1,null,1),n.plug=r.plug,n.unplug=r.unplug},"3.16.0",{requires:["base-base","pluginhost"]});
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("template-base",function(e,t){function n(t,n){this.defaults=n,this.engine=t||e.Template.Micro,this.engine||e.error("No template engine loaded.")}n._registry={},n.register=function(e,t){return n._registry[e]=t,t},n.get=function(e){return n._registry[e]},n.render=function(t,r,i){var s=n._registry[t],o="";return s?o=s(r,i):e.error('Unregistered template: "'+t+'"'),o},n.prototype={compile:function(t,n){return n=n?e.merge(this.defaults,n):this.defaults,this.engine.compile(t,n)},precompile:function(t,n){return n=n?e.merge(this.defaults,n):this.defaults,this.engine.precompile(t,n)},render:function(t,n,r){return r=r?e.merge(this.defaults,r):this.defaults,this.engine.render?this.engine.render(t,n,r):this.engine.compile(t,r)(n,r)},revive:function(t,n){return n=n?e.merge(this.defaults,n):this.defaults,this.engine.revive?this.engine.revive(t,n):t}},e.Template=e.Template?e.mix(n,e.Template):n},"3.16.0",{requires:["yui-base"]});
YUI.add("flickr-view",function(e,i){var t=require("hermes-core/flog")(i),r=require("hermes-core/fletrics");e.FlickrView=e.Base.create("flickrView",e.Base,[],{viewState:null,subviews:{},subviewConfig:null,_eventHandles:null,initializer:function(e){return this.appContext=e.appContext,delete e.appContext,""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this.set("headContainer",""),this.isBuilt=!1,this.isActivated=!1,this.isErrorBuilt=!1,this.subviewsWithLoadingError={},this._params=e||{},this.isMobile=e.isMobile,this.subviews={},this._eventHandles=[],this.appContext&&!this.appContext.viewTiming&&(this.appContext.viewTiming={}),this.appContext&&(this.appContext.viewTiming[this.name]={initialize:0,loadState:0,buildContainer:0,buildHeadContainer:0,activate:0}),this},initialize:function(i){var n=this;return this.initializeStartTime=Date.now(),this.isErrorBuilt=!1,this.serverRendered=!(!i||!i.serverRendered)&&i.serverRendered,n.beforeDestroy&&(n.beforeDestroyHandler=n.before("destroy",n.beforeDestroy)),YUI.Env.isServer||this.registerEventHandler(this.appContext.flapp.after("activeViewChange",function(e){n.normalizedActivate()})),this.on("parentViewEvent",this.handleParentViewEvent.bind(this,this.name)),this.setupSubviews().then(function(){var e,i;if(n.isErrorBuilt){if(n.error.is404)throw n.error;throw i=new Error("Subview of "+n.name+" causing loadState error"),n.error&&(i.message+=": "+n.error.message,n.error.method&&(i.message+=", method="+n.error.method),i.message+=" | subview failure: "+n.error.fatal,n.error.wasDealbreaker&&(i.message+=" dealbreaker failed "),n.error.wasMultipleSubviews&&(i.message+=" multiple subviews failed "),i.fatal=n.error.fatal),i}if(n.loadStateTimingStart=Date.now(),!(e=n.loadState()))throw new Error("View "+n.name+" loadState function does not return a promise");return e}).then(function(){if(n.appContext&&n.appContext.viewTiming&&n.appContext.viewTiming[n.name]&&(n.appContext.viewTiming[n.name].loadState=Date.now()-n.loadStateTimingStart),YUI.Env.isServer||!n.get("container").hasClass("requiredToShowOnServer")||i&&i.wasDeferred){var e=Date.now();try{n.buildContainer()}catch(e){throw t.error("Error building",{topic:n.name,err:e}),n.fire("loadingError",{message:e.message,fatal:!0,wasDealbreaker:!0}),n.buildErrorContainer(),n.isErrorBuilt=!0,e}if(n.appContext&&n.appContext.viewTiming&&n.appContext.viewTiming[n.name]&&(n.appContext.viewTiming[n.name].buildContainer=Date.now()-e),n.get("isRootView")){n._buildFullRootViewAdditionalViewClasses();var r=n.get("rootViewAdditionalViewClasses");r&&r.length>0&&n.get("container").addClass(r.join(" "))}}n.isBuilt=!0,n.isErrorBuilt=!1,n.fire("loadingSuccess")},function(e){throw n.fire("loadingError",{message:e.message,fatal:e.fatal,is404:e.is404,wasMultipleSubviews:e.wasMultipleSubviews,wasDealbreaker:e.wasDealbreaker}),n.buildErrorContainer(),n.isErrorBuilt=!0,t.error("Error loading state",{topic:n.name,err:e}),e}).then(function(){var e,i;return n.isErrorBuilt||n.get("isActiveViewAgnostic")||(e=Date.now(),n._buildFullHeadMeta(),n.buildHeadContainer=Date.now()-e),YUI.Env.isServer||(n.shouldDeferSubviews&&n._setupDeferredSubviewsInitialization(),i=Date.now(),n.normalizedActivate(),n.appContext&&n.appContext.viewTiming&&n.appContext.viewTiming[n.name]&&(n.appContext.viewTiming[n.name].activate=Date.now()-i)),n.appContext&&n.appContext.viewTiming&&n.appContext.viewTiming[n.name]&&(n.appContext.viewTiming[n.name].initialize=Date.now()-n.initializeStartTime),!YUI.Env.isServer&&n._params.logViewTimings&&n.wasRequiredToShow&&r.set(n.name.replace(/\-/g,".")+".viewtiming",n.appContext.viewTiming[n.name].initialize),n},function(e){throw YUI.Env.isServer||(n.shouldDeferSubviews&&n._setupDeferredSubviewsInitialization(),n.normalizedActivate()),e}).catch(e.PromiseCatcher(this.name))},render:function(){return this},buildHeadContainer:function(){return this.set("headContainer",""),this},_buildSubviewHeadContainers:function(){var e=[],i=this;return Object.keys(this.subviews).forEach(function(t){-1===e.indexOf(i.subviews[t].get("headContainer"))&&e.push(i.subviews[t].get("headContainer"))}),e.sort(function(e,i){var t=e.toLowerCase().indexOf("<script")>-1,r=i.toLowerCase().indexOf("<script")>-1;return t&&!r?1:!t&&r?-1:0}).join("")},_buildFullHeadMeta:function(){var e;return this.buildHeadContainer(),e=this.get("headContainer"),e=e.concat(this._buildSubviewHeadContainers()),this.set("headContainer",e.concat("")),this},setRootViewAdditionalViewClasses:function(){return this.set("rootViewAdditionalViewClasses",[]),this},_buildFullRootViewAdditionalViewClasses:function(){var e=[];return e=e.concat(this._buildSubviewRootViewAdditionalViewClasses()),this.set("rootViewAdditionalViewClasses",e),this},_buildSubviewRootViewAdditionalViewClasses:function(){this.setRootViewAdditionalViewClasses();var e=this.get("rootViewAdditionalViewClasses")||[],i=this;return Object.keys(this.subviews).forEach(function(t){var r=i.subviews[t]._buildSubviewRootViewAdditionalViewClasses();e=e.concat(r)}),e},_setupDeferredSubviewsInitialization:function(){setTimeout(function(){var i=e.config.win.document.body;i.scrollTop>0||i.clientHeight-50<=i.scrollHeight?this._loadDeferredSubviews():(this.deferredViewScrollListener=e.globalEvents.subscribe("window:scroll",this._loadDeferredSubviews.bind(this)),this.registerEventHandler(this.deferredViewScrollListener))}.bind(this),10)},_loadDeferredSubviews:function(){this.loadingDeferred||(this.loadingDeferred=!0,this._removeDeferredViewScrollListener(),this._recursivelyLoadDeferredSubview(0,!1))},_removeDeferredViewScrollListener:function(){this.deferredViewScrollListener&&(this.deferredViewScrollListener.detach(),this.deferredViewScrollListener=null)},_recursivelyLoadDeferredSubview:function(i,r){var n=Object.keys(this.subviewConfig||[]).filter(function(e){var i=this.subviewConfig[e];return!0!==i.disabled&&(("function"!=typeof i.disabled||!i.disabled.call(this,this._params))&&this.subviewConfig[e].canDefer)}.bind(this)),a=this;if(i<=n.length-1){var s,o=n[i],u=e.merge(this._params,this.subviewConfig[o]);u.container=null,u.wasDeferred=!0,t.log("Loading deferred view",{topic:a.name,view:o});try{s=this.appContext.getView(o,u)}catch(e){return void this._onDeferredViewLoadingError(i,r,e)}s.then(function(e){if(!e)return t.error("An error occured trying to load the deferred view.",{topic:a.name}),r?(i++,r=!1):r=!0,void a._recursivelyLoadDeferredSubview(i,r);e.initialize(u).then(function(){e.on("subviewViewEvent",function(i){i&&i.details&&i.details.length&&a.onSubviewEvent.call(a,e.name,i.details)}),u&&u.additionalViewClasses&&u.additionalViewClasses.forEach(function(i){e.get("container").addClass(i)}),a._addDeferredViewToDOM(e),e.normalizedActivate(),i++,a._recursivelyLoadDeferredSubview(i,!1)}).catch(a._onDeferredViewLoadingError.bind(this,i,r))})}},_onDeferredViewLoadingError:function(e,i,r){t.error("An error occured trying to initialize the deferred view",{topic:this.name,err:r}),i?(e++,i=!1):i=!0,this._recursivelyLoadDeferredSubview(e,i)},_addDeferredViewToDOM:function(e){if(e){var i=this.get("container").one("."+e.name),r=e.get("container");i&&r?i.replace(r):t.error("Could not add view to DOM in _addDeferredViewToDOM",{topic:this.name,view:e.name})}else t.error("Non-view passed to _addDeferredViewToDOM.",{topic:this.name})},attachKeyEvent:function(e,i,t){return this.registerEventHandler(this.appContext.getKeyboardManager().on(e,t||this._params.keyEventScope||"*",i.bind(this)))},setContainerHTML:function(e){var i=this;return this.get("container").setHTML(e),YUI.Env.isServer||(this.get("container").generateID(),Object.keys(this.subviews||{}).forEach(function(e,t,r){var n=i.subviews[e],a=n.get("container"),s=n.getId?n.getId():a._yuid,o=i.get("container").one("#"+s);o&&o.replace(a)})),this},setupSubviews:function(){var i,r=this,n=[],a=[],s=[],o=this.appContext.flipper.isFlipped("enable-non-blocking-on-non-required-views"),u={};if(!this.subviewConfig)return e.Promise.resolve();if(Object.keys(this.subviewConfig).forEach(function(e){!0!==r.subviewConfig[e].disabled&&("function"==typeof r.subviewConfig[e].disabled&&r.subviewConfig[e].disabled.call(r,r._params)||(u[e]=r.subviewConfig[e]))}),Object.keys(u).map(function(l){i=YUI.Env.isServer?u[l].requiredToShowOnServer||u[l].requiredToShow||r.appContext.forceServerRender&&!u[l].neverShowOnServer:u[l].requiredToShowOnClient||u[l].requiredToShow;var c=e.merge(r._params,u[l]);if(!r.shouldDeferSubviews&&c.canDefer&&delete c.canDefer,r.shouldDeferSubviews&&c.canDefer){t.log("Deferring subview.",{topic:r.name,view:l});(o?s:n).push(r.instantiateSubview(l,c).then(function(e){return e.setContainerHTML(""),e.get("container").addClass("deferred-view"),e}))}else if(i){(o?a:n).push(r.instantiateSubview(l,c).then(function(e){return e.wasRequiredToShow=!0,r.setupSubview(l,c,e)}))}else{(o?s:n).push(r.instantiateSubview(l,c).then(function(i){i.wasRequiredToShow=!1,YUI.Env.isServer||e.soon(function(){r.setupSubview(l,c,i)})}))}}).filter(function(e){return!!e}),o){return(a.length?e.Promise.all(a):e.Promise.resolve()).then(function(){s.length&&!YUI.Env.isServer&&e.Promise.all(s).then(function(){r.buildContainer(),r.normalizedActivate()})})}return n.length?e.Promise.all(n):e.Promise.resolve()},registerSubview:function(e,i){i||(i=e.name),this.subviews[i]=e},instantiateSubview:function(i,r){var n=this;return r.container=this.getContainer({isSubview:!0,subviewName:i,subviewParams:r}),this.appContext.getView(i,r).then(null,function(){return t.log("getView failed to load view, retrying once more."),n.appContext.getView(i,r)}).then(function(e){return e.on("loadingError",n.handleSubviewLoadingError.bind(n)),e.on("loadingSuccess",n.handleSubviewLoadingSuccess.bind(n)),e.on("subviewViewEvent",n.handleSubviewEvent.bind(n,e.name)),n.registerSubview(e,i),e._params&&(e._params.keyEventScope=n._params.keyEventScope),e}).catch(e.PromiseCatcher(this.name))},onSubviewEvent:function(e,i){return!0},onParentViewEvent:function(e,i){return!0},handleSubviewEvent:function(e,i){var t=i?i.details||[]:[];!1!==this.onSubviewEvent(e,t)&&this.fire.apply(this,["subviewViewEvent"].concat(t))},handleParentViewEvent:function(e,i){var t,r=i?i.details||[]:[];if(!1!==this.onParentViewEvent(e,r))for(t in this.subviews)this.subviews[t].fire.apply(this.subviews[t],["parentViewEvent"].concat(r))},handleSubviewLoadingSuccess:function(e){this.subviewsWithLoadingError[e.target.name]&&delete this.subviewsWithLoadingError[e.target.name]},handleSubviewLoadingError:function(e){var i;this.subviewConfig[e.target.name].dealbreaker&&(this.hasDealbreakerSubviewLoadingError=!0),this.subviewsWithLoadingError[e.target.name]=e.details[0],this.isErrorBuilt||(i=Object.keys(this.subviewsWithLoadingError),(this.hasDealbreakerSubviewLoadingError||i.length>=2)&&(this.error={message:"",fatal:!0},i.forEach(function(e,t){var r=this.subviewsWithLoadingError[e];t!==i.length-1?this.error.message+="["+e+"] "+r.message+" | ":this.error.message+="["+e+"] "+r.message,r.is404&&(this.error.is404=!0),r.method&&(this.error.method+=r.method),r.fatal||(this.error.fatal=!1)}.bind(this)),this.fire("loadingError",{message:this.error.message,fatal:this.error.fatal,is404:this.error.is404,wasDealbreaker:this.hasDealbreakerSubviewLoadingError,wasMultipleSubviews:i&&i.length>=2}),this.buildErrorContainer(),this.isErrorBuilt=!0,t.error("subview forced the error loading state",{topic:this.name,view:e.target.name})))},setupSubview:function(i,r,n){var a=this;return r=e.merge(r||{}),r.alreadyRendered=a.alreadyRendered,n.set("isActiveViewAgnostic",a.get("isActiveViewAgnostic")),n.initialize(r).then(function(){return a.subviews[i]},function(e){t.error("Error getting/initializing view",{topic:a.name,err:e,view:i})}).catch(e.PromiseCatcher(this.name))},attachEvents:function(i){if(i){var t={},r=this;Object.keys(i).forEach(function(n){var a,s;a={selector:(n.match(/([\w-_#\.\[\]~|$^*= ]+) /i)||[])[1]||"[data-action]",type:(n.match(/([\w]+):/i)||[])[1]||"click",action:(n.match(/:([\w]+)/i)||[])[1]||"_default_"},t[s=a.selector+"/"+a.type]||(t[s]={},r.registerEventHandler(r.get("container").delegate(a.type,function(i){var n,o,u,l;if(n=i.target.ancestor(a.selector,!0),"click"===a.type&&(o=i.target.ancestor(".server-only-link",!0)))return!0===i.metaKey||!0===i.ctrlKey?void 0:void(e.config.win.location=o.get("href"));if(n&&(u=n.getData()||{},l=u.action||"_default_",t[s].hasOwnProperty(l))){if(!t[s][l])throw new Error('Handler for "'+l+'" UI event is undefined');t[s][l].call(r,i,u)}},a.selector))),t[s][a.action]=i[n]})}},registerEventHandler:function(i){if(e.Lang.isFunction(i.detach))return this._eventHandles.push(i),i},detachRegisteredEvent:function(i){var t=this._eventHandles.indexOf(i);-1!==t&&e.Lang.isFunction(i.detach)&&(i.detach(),this._eventHandles.splice(t,1))},detachRegisteredEvents:function(){this._eventHandles.length&&(this._eventHandles.forEach(function(e){e.detach()}),this._eventHandles=[])},generateSignature:function(i,t){var r,n={},a=function(e){var i=0;if(0===e.length)return i;for(var t=0;t<e.length;t++)i=(i<<5)-i+(r=e.charCodeAt(t)),i&=i;return i};return e.Object.each(t,function(e,i){"container"!==i&&"appContext"!==i&&"context"!==i&&"cspNonce"!==i&&"parentView"!==i&&"keyEventScope"!==i&&void 0!==e&&"function"!=typeof e&&(n[i]="object"==typeof e?1:e)}),i+"__"+Object.keys(n).sort().map(function(e){var i,t;try{i=encodeURIComponent(e)}catch(t){i=encodeURIComponent(a(e))}try{t=encodeURIComponent(n[e])}catch(t){i=encodeURIComponent(a(n[e]))}return i+"_"+t}).join("__")},getContainer:function(i){(i=i||{}).subviewParams=i.subviewParams||{};var t,r,n,a,s=["view",i.subviewName||i.viewName||this.name],o=i.subviewName?i.subviewParams.additionalViewClasses:this.additionalViewClasses,u=i.subviewParams.preferredViewTag||"div";return(!i.isSubview||i.subviewParams.requiredToShowOnServer||i.subviewParams.requiredToShow)&&YUI.Env.isServer&&s.push("requiredToShowOnServer"),this.theme&&s.push(this.theme),e.Lang.isArray(o)&&o.length?s=s.concat(o):e.Lang.isFunction(o)&&(a=o.call(this),e.Lang.isArray(a)&&a.length&&(s=s.concat(a))),i.subviewName||s.push(e.FlickrView.ROOT_VIEW_CLASS_NAME),s=' class="'+s.join(" ")+'"',i.subview?t=i.subview.getId():i.subviewName&&i.subviewParams&&(t=this.generateSignature(i.subviewName,i.subviewParams)),YUI.Env.isServer?r={html:"",setHTML:function(e){this.html=e},getHTML:function(e){return this.html},get:function(e){switch(e){case"innerHTML":return this.html;case"outerHTML":return"<"+u+" "+s+(n?' style="'+Object.keys(n).reduce(function(e,i,t,r){return e+i+": "+n[i]+(t<r.length-1?"; ":"")},"")+'"':"")+(t?' data-view-signature="'+t+'"':"")+">"+this.html+"</"+u+">"}return null},hasChildNodes:function(){return!1},addClass:function(e){""!==(e=e.trim())&&(s=s.slice(0,-1)+" "+e+'"')},hasClass:function(e){return s.split('"')[1].split(" ").indexOf(e)>-1},removeClass:function(e){var i=s.split('"')[1].split(" "),t=i.indexOf(e);-1!==t&&(i.splice(t,1),s=' class="'+i.join(" ")+'"')},setStyle:function(e,i){n||(n={}),n[e]=i},setStyles:function(e){n||(n={}),Object.keys(e).forEach(function(i){n[i]=e[i]})},appendChild:function(e){this.html+=e.html},all:function(){return{each:function(){}}},one:function(){return null}}:(t&&(r=this.get("container").one('[data-view-signature="'+t+'"]')),r?r.removeAttribute("data-view-signature"):r=e.Node.create("<"+u+" "+s+"></"+u+">")),r},renderSubviews:function(){var e=this;return Object.keys(this.subviews).forEach(function(i,r,n){try{e.subviews[i].render()}catch(r){t.error("Error rendering view",{topic:e.name,err:r,view:i})}}),{}},templates:function(i){var r,n=e.Template.get("hermes/"+i),a=this.getLangBundles(),s=this;if(a.locales=this.appContext.lang||this.defaultLang,"function"!=typeof n)throw t.error("Template not found",{topic:this.name,template:i}),new Error("Template not found: "+i);return this.appContext.flipper&&(r=this.appContext.flipper),function(e){return!(e=e||{}).flippers&&r&&(e.flippers=r.toJSON()),e.isMobile=s._params.isMobile,e.cspNonce=s._params.cspNonce,s.appContext.forceServerRender&&(e.isServerRendered=!0),Object.keys(s.subviewConfig||{}).forEach(function(i){e[i]||(e[i]=s.subviews[i]?s.subviews[i].get("container"):"")}),n(e,{data:{intl:a,flippers:e.flippers}})}},loadState:function(){return e.Promise.resolve()},updateHead:function(){null!==this.get("headContainer")&&(e.one("head").all('[data-dynamic="true"]').remove(!0),e.one("head").append(this.get("headContainer")))},canActivate:function(){var e=!1;return(this.isBuilt||this.isErrorBuilt)&&(this.isActivated||this.isErrorActivated||this.isActiveAndInDOM()&&(e=!0)),e},isActiveAndInDOM:function(){var e=this.get("container");return e&&(this.get("isActiveViewAgnostic")||this.appContext.flapp.get("activeView").get("container").contains(e))&&e.inDoc()},activate:function(){return this},activateSubviews:function(){var e,i;for(e in this.subviews){i=this.subviews[e];try{i.normalizedActivate(),i.recursivelyActivateSubviews()}catch(i){t.error("Error activating view",{topic:this.name,err:i,view:e})}}return this},recursivelyActivateSubviews:function(e){var i,r,n=e||this.subviews;for(i in n)if((r=n[i]).canActivate()){r.normalizedActivate();try{r.normalizedActivate(),this.recursivelyActivateSubviews(r.subviews)}catch(e){t.error("Error activating view",{topic:this.name,err:e,view:r})}}return this},normalizedActivate:function(){this.canActivate()&&(this.isErrorBuilt?(this.isErrorActivated=!0,this.activateErrorContainer()):(e.rapidTracker.refreshTracker(),this.activate(),this.isActivated=!0,this.activateSubviews()))},buildErrorContainer:function(){this.setContainerHTML("")},activateErrorContainer:function(){var e=this,i=this.get("container").one(".retry");i&&i.on("click",function(i){i.preventDefault(),e.isErrorActivated=!1,e.initialize()})},setViewDataOnHistory:function(i,t){return e.HistoryHelper.setData(this.name,i,t)},getViewDataFromHistory:function(i){return e.HistoryHelper.getData(this.name,i)},getTrackingSegments:function(){return{}},reload:function(i,t){var r=this,n=[];if(!i.length)return e.Promise.resolve();for(var a=0;a<i.length;a++)n.push(this.appContext.getModelRegistry(i[a]));return e.Promise.all(n).then(function(e){for(var i=0;i<e.length;i++)Array.isArray(t)?e[i].remove(t[i]):e[i].remove(t);YUI.Env.isServer||r.appContext.flapp.navigate(r.appContext.getLocation().href)}).catch(e.PromiseCatcher(this.name))},destroy:function(i){this.set("destroyed",!0);var t,r=this.get("container");if(this.detachRegisteredEvents(),!YUI.Env.isServer&&this.isActiveAndInDOM()){this.setRootViewAdditionalViewClasses();var n=this.get("rootViewAdditionalViewClasses")||[],a=e.one("."+e.FlickrView.ROOT_VIEW_CLASS_NAME);n&&a&&n.forEach(function(e){a.removeClass(e)})}return this._removeDeferredViewScrollListener(),e.Node&&r&&(r.detach&&r.detach(),i&&(i.remove||i.delete)&&r.remove&&r.remove(!0),this.set("container",null)),this.destroySubviews(),t=e.FlickrView.superclass.destroy.call(this),this.beforeDestroyHandler&&this.beforeDestroyHandler.detach(),t},destroySubviews:function(){var e=this;Object.keys(this.subviews||{}).forEach(function(i,t,r){e.subviews[i].destroy()})},bringIntoFocus:function(){var e=this.get("container"),i=e.getAttribute("tabindex")||null;e.setAttribute("tabindex","-1"),e.focus(),e.blur(),i?e.setAttribute("tabindex",i):e.removeAttribute("tabindex")},setContainerWithTemplate:function(e,i){this.setContainerHTML(this.templates(e)(i))},godMessage:e.godMessage},{ATTRS:{container:{value:"",setter:function(e){return e||this.getContainer()}},spaceid:{value:792600503,validator:function(i){return e.Lang.isNumber(i)||e.Lang.isString(i)},setter:function(e){return parseInt(e,10)}},trackedElementIDs:{value:[],validator:function(i){return e.Lang.isArray(i)}},rapidConf:{value:{},validator:function(i){return e.Lang.isObject(i)}},isActiveViewAgnostic:{value:!1},isRootView:{value:!1},rootViewAdditionalViewClasses:{value:[],validator:function(i){return e.Lang.isArray(i)}}},create:function(i,r,n,a,s){e.namespace("Views"),e.Views[i]&&t.warn("A view with this name already exists. Did you mean to redefine it?",{view:i}),a.destroy&&a.destroy!==e.FlickrView.prototype.destroy&&t.warn("`destroy` method was overridden. Did you mean `destructor`?",{view:i}),a.initialize&&a.initialize!==e.FlickrView.prototype.initialize&&t.warn("`initialize` method was overridden. Did you mean `initializer`?",{view:i});try{e.Views[i]=e.Base.create(i,r,n,a,s)}catch(r){throw t.warn("`Base.create` method failed, maybe because of Chrome 51?",{view:i}),!YUI.Env.isServer&&e.config.win.beaconError&&e.config.win.beaconError("`Base.create` method failed, maybe because of Chrome 51?",e.config.win.location.href,r),r}if(r&&r!==e.FlickrView&&r.prototype&&r.prototype.langBundles){var o=[],u=(e.Views[i].prototype.langBundles||[]).concat(r.prototype.langBundles);o=e.Array.dedupe(u),e.Views[i].prototype.langBundles=o}return e.Views[i]},ROOT_VIEW_CLASS_NAME:"flickr-view-root-view"}),e.mix(e.FlickrView.prototype,e.Localizable)},"@VERSION@",{requires:["base","template-base","flickr-promise","handlebars-base","handlebars-helpers","localizable","history-helper","god-message"]});YUI.add("search-helper",function(e){function t(e,t){var a;for(a in l){if(!t&&a===e)return l[a];if(t&&l[a]===e)return a}}var a=require("hermes-core/type-validator"),s=["q","ss","ct","mt","l","s","w","d","m","hd","b","a","g","e","cm","xel","xeh","xal","xah","xfl","xfh","eui"],r={userId:"user_id",groupId:"group_id",groupPathAlias:"group_path_alias",setId:"set_id",page:"page",text:"text",tags:"tags",tagMode:"tag_mode",sort:"sort",safeSearch:"safe_search",contentType:"content_type",mediaType:"media",license:"license",faves:"faves",contacts:"contacts",getty:"is_getty",commons:"is_commons",marketplace:"marketplace_licensable",minTakenDate:"min_taken_date",maxTakenDate:"max_taken_date",minUploadDate:"min_upload_date",maxUploadDate:"max_upload_date",hasGeo:"has_geo",boundingBox:"bbox",accuracy:"accuracy",woeId:"woe_id",camera:"camera",minExposure:"exif_min_exposure",maxExposure:"exif_max_exposure",minAperture:"exif_min_aperture",maxAperture:"exif_max_aperture",minFocalLength:"exif_min_focallen",maxFocalLength:"exif_max_focallen",excludeUserId:"exclude_user_id",foursquareWoeId:"foursquare_woeid",foursquareVenueId:"foursquare_venueid",slideshowStartId:"jump_to",height:"height",width:"width",dimensionSearchMode:"dimension_search_mode",orientation:"orientation",colorCodes:"color_codes",styles:"styles",similarityId:"similarity_id"},n={relevant:"relevance",recent:"date-posted-desc",interesting:"interestingness-desc",name:"exact-name-match-first",activity:"most-activity",size:"most-members",oldest:"oldest-first",newest:"recent-first",oldestJoined:"age",mostPhotos:"pho",dateUploaded:"date-posted-desc",dateTaken:"date-taken-desc"},o=["s","q","see","m"],i={username:"username",userId:"user_id",sort:"sort"},c=["q","s","m"],d={text:"text",sort:"sort",safeSearch:"safe_search",userId:"user_id",subscriptionTypes:"subscription_types",filterInactive:"filter_inactive_groups"},l={all:"0,1,2,3,4,5,6,7,8,9,10",cc:"1,2,3,4,5,6,9",deriv:"1,2,4,5,9,10",comm:"4,5,6,9,10",commderiv:"4,5,9,10"},u=[r.tags,r.tagMode,r.mediaType,r.minTakenDate,r.maxTakenDate,r.minUploadDate,r.maxUploadDate,r.height,r.width,r.dimensionSearchMode,r.orientation,r.marketplace,r.excludeUserId],m=[r.colorCodes,r.styles],p=[r.sort,r.safeSearch,r.license],h=[r.userId,r.groupId,r.faves,r.contacts,r.commons,"m","w"],f=[r.userId,r.groupId,r.faves,r.contacts,r.safeSearch,r.sort,r.license,r.tags,r.text],g={sort:n.relevant,parse_tags:"1",content_type:"7"};e.SearchHelper={API:r,PEOPLE_SEARCH_API:i,GROUPS_SEARCH_API:d,GROUPS_SAFE_SEARCH_SETTINGS:{safe:1,all:2,eighteenPlusOnly:3},API_SORT_OPTIONS:n,API_ORIENTATION_OPTIONS:{portrait:"portrait",square:"square",landscape:"landscape",panorama:"panorama"},LICENSE_TYPE:l,UNIFIED_STATE_PARAMS:{viewAll:"view_all",viewType:"view_type",advanced:"advanced",albums:"album_search"},UNIFIED_ADVANCED_PARAMS:u,UNIFIED_QUICK_FILTER_PARAMS:m,UNIFIED_TOOLBAR_PARAMS:p,SEARCH_SCOPE_PARAMS:h,UNIFIED_DEFAULT_PARAMS:g,decodeContentType:function(e){var t={};switch(parseInt(e,10)){case 1:t.photos=!0;break;case 2:t.screenshots=!0;break;case 3:t.other=!0;break;case 4:t.photos=!0,t.screenshots=!0;break;case 5:t.other=!0,t.screenshots=!0;break;case 6:t.photos=!0,t.other=!0;break;default:t.photos=!0,t.screenshots=!0,t.other=!0}return t},encodeContentType:function(e){var t=0;return!e.photos||e.screenshots||e.other?e.photos||!e.screenshots||e.other?e.photos||e.screenshots||!e.other?e.photos&&e.screenshots&&!e.other?t=4:!e.photos&&e.screenshots&&e.other?t=5:e.photos&&!e.screenshots&&e.other?t=6:e.photos&&e.screenshots&&e.other&&(t=7):t=3:t=2:t=1,t},isParameterlessSearch:function(e){return!(e[r.userId]||e[r.groupId]||e[r.tags]||e[r.text]||e[r.license]||e[r.faves]||e[r.contacts]||e[r.getty]||e[r.commons]||e[r.minTakenDate]||e[r.maxTakenDate]||e[r.minUploadDate]||e[r.maxUploadDate]||e[r.hasGeo]||e[r.boundingBox]||e[r.woeId]||e[r.camera]||e[r.minExposure]||e[r.maxExposure]||e[r.minAperture]||e[r.maxAperture]||e[r.minFocalLength]||e[r.maxFocalLength]||e[r.foursquareWoeId]||e[r.foursquareVenueId]||e[i.username]||e[r.similarityId])},mapRouteParamsToAPI:function(e){var t,s={nsid_or_path_alias:"userId",group_id:"groupId",set_id:"setId",page_number:"page",tag_list:"tags",location:"text",slideshow_start_id:"slideshowStartId"},n={};for(t in s)e[t]&&(n[r[s[t]]]=e[t]);return n[r.groupId]&&!a.nsid(n[r.groupId])&&(n[r.groupPathAlias]=n[r.groupId],delete n[r.groupId]),n},convertLicenseTypeValue:t,mapClassicSearchToAPI:function(t,o){if(!t)return{};var i,c,d,u,m={},p=o.getViewer(),h=t.l,f=t.s,g=t.w,_=t.m,I=t.q;if(t.d&&"string"==typeof t.d&&(d=t.d.split("-")),t.q&&(m[r.text]=t.q),void 0!==t.ss&&(m[r.safeSearch]=parseInt(t.ss,10)+1),void 0!==t.ct&&(m[r.contentType]=parseInt(t.ct,10)+1),void 0!==t.mt&&(m[r.mediaType]=t.mt),t.b&&(m[r.boundingBox]=t.b),t.a&&(m[r.accuracy]=t.a),t.e&&(m[r.woeId]=t.e),t.g&&(m[r.groupId]=t.g),t.cm&&(m[r.camera]=t.cm),void 0!==t.xel&&(m[r.minExposure]=t.xel),void 0!==t.xeh&&(m[r.maxExposure]=t.xeh),void 0!==t.xal&&(m[r.minAperture]=t.xal),void 0!==t.xah&&(m[r.maxAperture]=t.xah),void 0!==t.xfl&&(m[r.minFocalLength]=t.xfl),void 0!==t.xfh&&(m[r.maxFocalLength]=t.xfh),t.eui&&(m[r.excludeUserId]=t.eui),void 0!==h)switch(h){case"cc":case"comm":case"deriv":case"commderiv":m[r.license]=l[h];break;default:(c=parseInt(h,10))>=0&&c<=10&&(m[r.license]=c)}if(f)switch(f){case"rec":m[r.sort]=n.recent;break;case"rel":m[r.sort]=n.relevant;break;case"int":m[r.sort]=n.interesting}if(t.hd&&(m[r.media]="hdvideo"),g&&"string"==typeof g)if(-1!==g.indexOf("faves"))u=g.split("-"),m[r.faves]=1,u.length>1?m[r.userId]=u[1]:p.signedIn&&(m[r.userId]=p.nsid);else if(a.nsid(g))"pool"===_?m[r.groupId]=g:m[r.userId]=g;else switch(g){case"contacts":m[r.contacts]="all";break;case"ff":m[r.contacts]="ff";break;case"getty":m[r.getty]="true";break;case"commons":m[r.commons]="true";break;case"usg":m[r.license]=8}if(d)switch(d[0]){case"taken":d[1]&&(m[r.minTakenDate]=e.flutil.parseYYYYMMDDDatestamp(d[1])/1e3),d[2]&&(m[r.maxTakenDate]=e.flutil.parseYYYYMMDDDatestamp(d[2])/1e3);break;case"posted":d[1]&&(m[r.minUploadDate]=e.flutil.parseYYYYMMDDDatestamp(d[1])/1e3),d[2]&&(m[r.maxUploadDate]=e.flutil.parseYYYYMMDDDatestamp(d[2])/1e3)}if(_&&I)switch(_){case"tags":delete(m=e.merge(m,this.processTags(I)))[r.text]}for(i in t)-1===s.indexOf(i)&&(m[i]=t[i]);return m},mapClassicPeopleSearchToAPI:function(e,t){var a={},s=null,r=t.getViewer();if((e=e||{}).q&&(a[i.username]=e.q),e.s)switch(e.s){case"age":a[i.sort]=n.oldestJoined;break;case"pho":a[i.sort]=n.mostPhotos}e.see&&"all"===e.see.toString().toLowerCase()&&r.signedIn&&(a[i.userId]=r.nsid),e.m&&(e.m.toString().toLowerCase(),e.m.toString().toLowerCase());for(s in e)-1===o.indexOf(s)&&(a[s]=e[s]);return a},mapClassicGroupSearchToApi:function(e,t){var a,s={},r=null;if(e=e||{},a=e.m&&"discuss"===e.m.toString().toLowerCase(),e.q&&(s[d.text]=e.q),e.s)switch(e.s){case"act":s[d.sort]=a?n.discussionActivity:n.activity;break;case"siz":s[d.sort]=n.size;break;case"age":s[d.sort]=n.newest}for(r in e)-1===c.indexOf(r)&&(s[r]=e[r]);return s},mapAPIParamsToAdvancedSearchQuery:function(e){var a={},s=e[r.userId];return e[r.text]?a.q=e[r.text]:e[r.tags]&&(a.q=e[r.tags]),e[r.faves]?a.w=s?"faves-"+s:"faves":s?a.w=s:"all"===e[r.contacts]?a.w="contacts":"ff"===e[r.contacts]?a.w="ff":"true"===e[r.getty]?a.w="getty":"true"===e[r.commons]?a.w="commons":8===parseInt(e[r.license],10)&&(a.w="usg"),e[r.license]&&(a.l=t(e[r.license],!0)),a},deriveScopeTitle:function(t,s){var n,o=s.getViewer();return t[r.userId]?o&&o.signedIn&&o.nsid===t[r.userId]?t[r.faves]?e.Promise.resolve({intlName:"search.VIEWER_FAVES"}):e.Promise.resolve({intlName:"search.YOUR_PHOTOS"}):(n=a.nsid(t[r.userId])?t[r.userId]:{pathAlias:t[r.userId]},s.getModel("person-models",n).then(function(e){var a;return a=t[r.faves]?"search.FAVES_POSSESSIVE":"search.PHOTOS_POSSESSIVE",{intlName:a,name:e.getValue("displayname")}})):t[r.contacts]?e.Promise.resolve({intlName:"search.FROM_PEOPLE_YOU_FOLLOW"}):t[r.groupId]||t[r.groupPathAlias]?(n=t[r.groupId]?{id:t[r.groupId]}:{pathAlias:t[r.groupPathAlias]},s.getModel("group-info-models",n).then(function(e){return{intlName:"search.IN_GROUP_POOL",name:e.getValue("group").getValue("title")}})):t[r.faves]?e.Promise.resolve({intlName:"search.VIEWER_FAVES"}):e.Promise.resolve({intlName:"search.EVERYONES_PHOTOS"})},derivePeopleScopeTitle:function(t,s){var n,o=s.getViewer();if(t[r.userId])return o&&o.signedIn&&o.nsid===t[r.userId]?e.Promise.resolve({intlName:"search.PEOPLE_YOU_FOLLOW"}):(n=a.nsid(t[r.userId])?t[r.userId]:{pathAlias:t[r.userId]},s.getModel("person-models",n).then(function(e){return{intlName:"search.CONTACTS_POSSESSIVE",name:e.getValue("username")}}))},deriveGroupsScopeTitle:function(t,s){var n,o=s.getViewer();if(t[r.userId])return o&&o.signedIn&&o.nsid===t[r.userId]?e.Promise.resolve({intlName:"search.YOUR_GROUPS"}):(n=a.nsid(t[r.userId])?t[r.userId]:{pathAlias:t[r.userId]},s.getModel("person-models",n).then(function(e){return{intlName:"search.GROUPS_POSSESSIVE",name:e.getValue("username")}}))},deriveCCLicenseString:function(e){e||(e={});var t=null,a=e[r.license];if(a&&1===a.length)switch(parseInt(a,10)){case 1:t="search.CC_BY_NC_SA";break;case 2:t="search.CC_BY_NC";break;case 3:t="search.CC_BY_NC_ND";break;case 4:t="search.CC_BY";break;case 5:t="search.CC_BY_SA";break;case 6:t="search.CC_BY_ND"}return t?{intlName:t}:null},addParamDefaults:function(e,t){!e[r.license]||e[r.license]!==l.all&&""!==e[r.license]||delete e[r.license]},addGroupsParamDefaults:function(e){},addPeopleParamDefaults:function(e){},clearParams:function(e,t){for(var a in e)-1===t.indexOf(a)&&delete e[a]},clearAdvancedSearchParams:function(e){this.clearParams(e,f)},clearParamsExceptSearchScope:function(e){this.clearParams(e,h)},generateQueryString:function(t){var a=e.clone(t)||{};return delete a.page,delete a.method,delete a.extras,e.QueryString.stringify(a)},convertSafeSearchPrefsToApi:function(t){var a=e.AttributeHelpers.coerceInteger(t);return e.AttributeHelpers.coerceString(a+1)},unescapeParameters:function(t){var a=t[r.groupId],s=t[r.tags],n=t[r.text];YUI.Env.isServer&&(a&&(t[r.groupId]=e.flutil.unescape(a)),s&&(t[r.tags]=e.flutil.unescape(s)),n&&(t[r.text]=e.flutil.unescape(n)))},objectsAreEquivalentToDepth:function(t,a,s){var r,n,o=this;return t===a||!(s<=0)&&(s=s||1,!(!e.Lang.isObject(t)||!e.Lang.isObject(a))&&(r=Object.keys(t),n=Object.keys(a),r.length===n.length&&r.every(function(e){return o.objectsAreEquivalentToDepth(t[e],a[e],s-1)})))},normalizeTag:function(e){var t;return e&&(t=e.replace(/[\s!-\/:-@[-`]/g,"")),t},processTags:function(e,t){if(!e||"string"!=typeof e)return{};var a,s,n,o,i={},c=/(["'])(\\?.)*?\1/g,d=/^([,\+]|AND|OR)$/;return a=e.match(c)||[],s=e.replace(c,""),n=s.split(/[,\+\s]/),n=n.map(function(e){return e.trim()}).filter(function(e){return e&&!d.test(e)}),o=a.concat(n),i[r.tags]=o.join(","),"any"===t||"all"===t?i[r.tagMode]=t:/[\+\s]OR[\+\s]/.test(e)?(i[r.tagMode]="any",o.length=Math.min(o.length,11)):i[r.tagMode]="all",i}}},"@VERSION@",{requires:["flutil"]});YUI.add("hermes-template-search-photos-unified-page-view",function(e,n){var a=e.Template.Handlebars.revive({1:function(e,n,a,l,t){return"\t"+e.escapeExpression((a.outlet||n&&n.outlet||a.helperMissing).call(null!=n?n:{},null!=n?n["search-slender-advanced-panel-view"]:n,{name:"outlet",hash:{},data:t}))+"\n"},3:function(e,n,a,l,t){var s,r=null!=n?n:{};return'\t<div class="advanced-search-wrapper'+(null!=(s=a.unless.call(r,null!=n?n.advancedPanelVisible:n,{name:"unless",hash:{},fn:e.program(4,t,0),inverse:e.noop,data:t}))?s:"")+'">\n\t\t'+e.escapeExpression((a.outlet||n&&n.outlet||a.helperMissing).call(r,null!=n?n["search-advanced-panel"]:n,{name:"outlet",hash:{},data:t}))+"\n\t</div>\n"},4:function(e,n,a,l,t){return" collapsed"},6:function(e,n,a,l,t){return" using-slender-advanced-panel"},8:function(e,n,a,l,t){return" advanced-panel-visible"},10:function(e,n,a,l,t){return'\t<div class="main search-empty-container">\n\t\t'+e.escapeExpression((a.outlet||n&&n.outlet||a.helperMissing).call(null!=n?n:{},null!=n?n["search-empty-view"]:n,{name:"outlet",hash:{},data:t}))+"\n\t</div>\n"},12:function(e,n,a,l,t){return'\t<div class="albums-galleries">\n\t\t<div class="main search-your-albums-results">\n\t\t'+e.escapeExpression((a.outlet||n&&n.outlet||a.helperMissing).call(null!=n?n:{},null!=n?n["search-photos-albums-view"]:n,{name:"outlet",hash:{},data:t}))+"\n\t\t</div>\n\t</div>\n"},14:function(e,n,a,l,t){return'\t<div class="main search-your-photos-results">\n\t\t'+e.escapeExpression((a.outlet||n&&n.outlet||a.helperMissing).call(null!=n?n:{},null!=n?n["search-photos-yours-view"]:n,{name:"outlet",hash:{},data:t}))+"\n\t</div>\n"},16:function(e,n,a,l,t){return'\t<div class="main search-contacts-results">\n\t\t'+e.escapeExpression((a.outlet||n&&n.outlet||a.helperMissing).call(null!=n?n:{},null!=n?n["search-photos-contacts-view"]:n,{name:"outlet",hash:{},data:t}))+"\n\t</div>\n"},18:function(e,n,a,l,t){return'\t<div class="main search-photos-results">\n\t\t'+e.escapeExpression((a.outlet||n&&n.outlet||a.helperMissing).call(null!=n?n:{},null!=n?n["search-photos-everyone-view"]:n,{name:"outlet",hash:{},data:t}))+"\n\t</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,n,a,l,t){var s,r=null!=n?n:{},i=a.helperMissing,u=e.escapeExpression;return u((a.outlet||n&&n.outlet||i).call(r,null!=n?n["global-nav-view"]:n,{name:"outlet",hash:{},data:t}))+"\n\n"+u((a.outlet||n&&n.outlet||i).call(r,null!=n?n["search-subnav-slender-view"]:n,{name:"outlet",hash:{},data:t}))+"\n\n"+(null!=(s=a.if.call(r,null!=n?n.useSlenderAdvancedPanel:n,{name:"if",hash:{},fn:e.program(1,t,0),inverse:e.program(3,t,0),data:t}))?s:"")+'\n<main id="search-unified-content" class="main fluid-centered '+(null!=(s=a.if.call(r,null!=n?n.useSlenderAdvancedPanel:n,{name:"if",hash:{},fn:e.program(6,t,0),inverse:e.noop,data:t}))?s:"")+(null!=(s=a.if.call(r,null!=n?n.advancedPanelVisible:n,{name:"if",hash:{},fn:e.program(8,t,0),inverse:e.noop,data:t}))?s:"")+'" role="main">\n\n'+(null!=(s=a.if.call(r,null!=n?n.showEmpty:n,{name:"if",hash:{},fn:e.program(10,t,0),inverse:e.noop,data:t}))?s:"")+"\n"+(null!=(s=a.if.call(r,null!=n?n.showAlbums:n,{name:"if",hash:{},fn:e.program(12,t,0),inverse:e.noop,data:t}))?s:"")+"\n"+(null!=(s=a.if.call(r,null!=n?n.showYours:n,{name:"if",hash:{},fn:e.program(14,t,0),inverse:e.noop,data:t}))?s:"")+"\n"+(null!=(s=a.if.call(r,null!=n?n.showContacts:n,{name:"if",hash:{},fn:e.program(16,t,0),inverse:e.noop,data:t}))?s:"")+"\n"+(null!=(s=a.if.call(r,null!=n?n.showEveryones:n,{name:"if",hash:{},fn:e.program(18,t,0),inverse:e.noop,data:t}))?s:"")+"\n</main>\n\n"+u((a.outlet||n&&n.outlet||i).call(r,null!=n?n["feedback-widget-view"]:n,{name:"outlet",hash:{},data:t}))+"\n\n"+u((a.outlet||n&&n.outlet||i).call(r,null!=n?n["signup-footer-view"]:n,{name:"outlet",hash:{},data:t}))+"\n\n"+u((a.outlet||n&&n.outlet||i).call(r,null!=n?n["footer-full-view"]:n,{name:"outlet",hash:{},data:t}))+"\n"},useData:!0}),l={};e.Array.each([],function(n){var a=e.Template.get("hermes/"+n);a&&(l[n]=a)}),e.Template.register("hermes/search-photos-unified-page-view",function(n,t){return t=t||{},t.partials=t.partials?e.merge(l,t.partials):l,a(n,t)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-search-subnav",function(t,a){var n=t.Template.Handlebars.revive({1:function(t,a,n,l,e){return" using-slender-advanced-panel"},3:function(t,a,n,l,e){var s,i,r=null!=a?a:{},u=n.helperMissing,o=t.escapeExpression;return'\t\t\t\t<li class="link'+(null!=(s=n.if.call(r,null!=a?a.selected:a,{name:"if",hash:{},fn:t.program(4,e,0),inverse:t.noop,data:e}))?s:"")+'" data-id="'+o("function"==typeof(i=null!=(i=n.id||(null!=a?a.id:a))?i:u)?i.call(r,{name:"id",hash:{},data:e}):i)+'">\n\t\t\t\t\t'+(null!=(s=n.if.call(r,null!=a?a.url:a,{name:"if",hash:{},fn:t.program(6,e,0),inverse:t.noop,data:e}))?s:"")+'\n\t\t\t\t\t\t<div class="title">'+o("function"==typeof(i=null!=(i=n.title||(null!=a?a.title:a))?i:u)?i.call(r,{name:"title",hash:{},data:e}):i)+"</div>\n"+(null!=(s=n.if.call(r,null!=a?a.subtitle:a,{name:"if",hash:{},fn:t.program(8,e,0),inverse:t.noop,data:e}))?s:"")+"\t\t\t\t\t"+(null!=(s=n.if.call(r,null!=a?a.url:a,{name:"if",hash:{},fn:t.program(10,e,0),inverse:t.noop,data:e}))?s:"")+"\n\t\t\t\t</li>\n"},4:function(t,a,n,l,e){return" selected"},6:function(t,a,n,l,e){var s;return'<a href="'+t.escapeExpression("function"==typeof(s=null!=(s=n.url||(null!=a?a.url:a))?s:n.helperMissing)?s.call(null!=a?a:{},{name:"url",hash:{},data:e}):s)+'">'},8:function(t,a,n,l,e){var s;return'\t\t\t\t\t\t<div class="subtitle">'+t.escapeExpression("function"==typeof(s=null!=(s=n.subtitle||(null!=a?a.subtitle:a))?s:n.helperMissing)?s.call(null!=a?a:{},{name:"subtitle",hash:{},data:e}):s)+"</div>\n"},10:function(t,a,n,l,e){return"</a>"},12:function(t,a,n,l,e){var s,i,r=null!=a?a:{},u=n.helperMissing,o=t.escapeExpression;return'\t\t\t\t<li class="tool inactive-toggle" data-id="'+o("function"==typeof(i=null!=(i=n.id||(null!=a?a.id:a))?i:u)?i.call(r,{name:"id",hash:{},data:e}):i)+'">\n\t\t\t\t\t<div class="radio">\n\t\t\t\t\t\t<input type="checkbox" id="inactive-groups-toggle" name="radio-small"'+(null!=(s=n.if.call(r,null!=a?a.inactiveToggleChecked:a,{name:"if",hash:{},fn:t.program(13,e,0),inverse:t.noop,data:e}))?s:"")+'>\n\t\t\t\t\t\t<label for="inactive-groups-toggle">\n\t\t\t\t\t\t\t<div class="square"></div>\n\t\t\t\t\t\t\t<span>'+o((n.intlHTMLMessage||a&&a.intlHTMLMessage||u).call(r,{name:"intlHTMLMessage",hash:{intlName:"search.HIDE_INACTIVE_GROUPS"},data:e}))+"</span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n"},13:function(t,a,n,l,e){return' checked="checked"'},15:function(t,a,n,l,e){var s,i,r=null!=a?a:{},u=n.helperMissing,o=t.escapeExpression;return'\t\t\t\t<li class="tool toggle toggle-view-type toggle-justified'+(null!=(s=n.if.call(r,null!=a?a.viewTypeJustified:a,{name:"if",hash:{},fn:t.program(4,e,0),inverse:t.noop,data:e}))?s:"")+'" data-id="'+o("function"==typeof(i=null!=(i=n.id||(null!=a?a.id:a))?i:u)?i.call(r,{name:"id",hash:{},data:e}):i)+'">\n\t\t\t\t\t<a href="'+o("function"==typeof(i=null!=(i=n.justUrl||(null!=a?a.justUrl:a))?i:u)?i.call(r,{name:"justUrl",hash:{},data:e}):i)+'" title="'+o((n.intlHTMLMessage||a&&a.intlHTMLMessage||u).call(r,{name:"intlHTMLMessage",hash:{intlName:"search.JUSTIFIED_VIEW"},data:e}))+'" class="toggle-view just" data-track="search-layout-justified"></a>\n\t\t\t\t</li>\n\t\t\t\t<li class="tool toggle toggle-view-type toggle-thumb'+(null!=(s=n.unless.call(r,null!=a?a.viewTypeJustified:a,{name:"unless",hash:{},fn:t.program(4,e,0),inverse:t.noop,data:e}))?s:"")+'" data-id="'+o("function"==typeof(i=null!=(i=n.id||(null!=a?a.id:a))?i:u)?i.call(r,{name:"id",hash:{},data:e}):i)+'">\n\t\t\t\t\t<a href="'+o("function"==typeof(i=null!=(i=n.thumbUrl||(null!=a?a.thumbUrl:a))?i:u)?i.call(r,{name:"thumbUrl",hash:{},data:e}):i)+'" title="'+o((n.intlHTMLMessage||a&&a.intlHTMLMessage||u).call(r,{name:"intlHTMLMessage",hash:{intlName:"search.THUMBNAIL_VIEW"},data:e}))+'" class="toggle-view thumb" data-track="search-layout-thumbs"></a>\n\t\t\t\t</li>\n'},17:function(t,a,n,l,e){var s,i,r=null!=a?a:{},u=n.helperMissing,o=t.escapeExpression;return'\t\t\t\t<li class="tool sort" data-id="'+o("function"==typeof(i=null!=(i=n.id||(null!=a?a.id:a))?i:u)?i.call(r,{name:"id",hash:{},data:e}):i)+'">\n\t\t\t\t\t<a href="#" title="'+o((n.intlHTMLMessage||a&&a.intlHTMLMessage||u).call(r,{name:"intlHTMLMessage",hash:{intlName:"search.SORT"},data:e}))+'" class="menu-anchor">'+o(t.lambda(null!=(s=null!=a?a.selectedSort:a)?s.text:s,a))+"<span></span></a>\n\t\t\t\t</li>\n"},19:function(t,a,n,l,e){var s,i,r=null!=a?a:{},u=n.helperMissing,o=t.escapeExpression;return'\t\t\t\t<li class="tool toggle toggle-advanced'+(null!=(s=n.if.call(r,null!=a?a.advancedPanelVisible:a,{name:"if",hash:{},fn:t.program(20,e,0),inverse:t.noop,data:e}))?s:"")+'" data-id="'+o("function"==typeof(i=null!=(i=n.id||(null!=a?a.id:a))?i:u)?i.call(r,{name:"id",hash:{},data:e}):i)+'">\n\t\t\t\t\t<a title="'+o((n.intlHTMLMessage||a&&a.intlHTMLMessage||u).call(r,{name:"intlHTMLMessage",hash:{intlName:"search.TOGGLE_ADVANCED"},data:e}))+'" href="#"><span></span>'+o((n.intlHTMLMessage||a&&a.intlHTMLMessage||u).call(r,{name:"intlHTMLMessage",hash:{intlName:"search.ADVANCED"},data:e}))+"</a>\n\t\t\t\t</li>\n"},20:function(t,a,n,l,e){return" advanced-visible"},22:function(t,a,n,l,e){return'\t\t\t\t\t<li class="tool advanced-clear">\n\t\t\t\t\t\t<a href="#" class="advanced-clear-link">'+t.escapeExpression((n.intlHTMLMessage||a&&a.intlHTMLMessage||n.helperMissing).call(null!=a?a:{},{name:"intlHTMLMessage",hash:{intlName:"search.CLEAR"},data:e}))+"</a>\n\t\t\t\t\t</li>\n"},compiler:[7,">= 4.0.0"],main:function(t,a,n,l,e){var s,i=null!=a?a:{};return'<div class="search-subnav'+(null!=(s=n.if.call(i,null!=a?a.usingSlenderAdvancedPanel:a,{name:"if",hash:{},fn:t.program(1,e,0),inverse:t.noop,data:e}))?s:"")+'">\n\n\t<div class="search-subnav-sizing fluid-centered">\n\n\t\t<div class="search-subnav-content">\n\n\t\t\t<ul class="links">\n\n'+(null!=(s=n.each.call(i,null!=a?a.links:a,{name:"each",hash:{},fn:t.program(3,e,0),inverse:t.noop,data:e}))?s:"")+'\n\t\t\t</ul>\n\n\t\t\t<ul class="tools">\n\n'+(null!=(s=n.if.call(i,null!=a?a.showInactiveToggle:a,{name:"if",hash:{},fn:t.program(12,e,0),inverse:t.noop,data:e}))?s:"")+(null!=(s=n.if.call(i,null!=a?a.showTools:a,{name:"if",hash:{},fn:t.program(15,e,0),inverse:t.noop,data:e}))?s:"")+(null!=(s=n.if.call(i,null!=a?a.showSort:a,{name:"if",hash:{},fn:t.program(17,e,0),inverse:t.noop,data:e}))?s:"")+(null!=(s=n.if.call(i,null!=a?a.showAdvanced:a,{name:"if",hash:{},fn:t.program(19,e,0),inverse:t.noop,data:e}))?s:"")+(null!=(s=n.if.call(i,null!=a?a.showAdvancedClearLink:a,{name:"if",hash:{},fn:t.program(22,e,0),inverse:t.noop,data:e}))?s:"")+"\n\n\t\t\t</ul>\n\t\t</div>\n\n\t</div>\n\n</div>\n"},useData:!0}),l={};t.Array.each([],function(a){var n=t.Template.get("hermes/"+a);n&&(l[a]=n)}),t.Template.register("hermes/search-subnav",function(a,e){return e=e||{},e.partials=e.partials?t.merge(l,e.partials):l,n(a,e)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("search-url",function(e,r){function s(e){return"number"==typeof e?e.toString():"boolean"==typeof e?e?"1":"0":"string"==typeof e?e:void 0}var t,a,h=require("hermes-core/flog")(r),o=/^\/search(?:\/.*)?$/,i=/^bw|blackandwhite$/;t=YUI.Env.isServer?require("querystring").stringify:e.QueryString.stringify,(a=function(r,t,o){var i,c,p,n,P;if(this.appContext=t,"string"==typeof r){if(P=r.split("?"),o?this.searchType=o:(p=-1!==(c=P[0].split("/"))[0].indexOf("http")?3:1,n="/"+c.slice(p).join("/"),this.searchType=this.getSearchTypeFromPathname(n)),P=P.length>1?P[1]:"",this.params={},P)try{P=e.QueryString.parse(P),this.params=e.SearchHelper.mapClassicSearchToAPI(P,t)}catch(e){h.warn("malformed query",{err:e,query:P})}}else this.params=e.merge(r),this.searchType=o;for(i in this.params)this.params.hasOwnProperty(i)&&(this.params[i]=s(this.params[i]));this.params.color_codes&&(this.colors=this.params.color_codes.toString().split(",")),this.searchType||this.setSearchType(a.searchTypes.UNDEFINED)}).prototype.setSearchType=function(r){var s=this.getSearchTerm();return this.searchType=r,this.params=this.validateParams(this.params,this.searchType),this.params=e.merge(this.getDefaultParams(this.searchType),this.params),s&&this.setSearchTerm(s),this},a.prototype.getSearchTypeFromPathname=function(e){switch(e=e||this.pathname,e=e.toLowerCase(),e=e.split("/").join("")){case"searchpeople":return a.searchTypes.PEOPLE;case"searchgroups":return a.searchTypes.GROUPS;case"search":default:return a.searchTypes.PHOTOS}},a.prototype.getPathname=function(){var e="/search/";switch(this.searchType){case a.searchTypes.PEOPLE:e+="people/";break;case a.searchTypes.GROUPS:e+="groups/";break;case a.searchTypes.CLASSIC_GROUPS:e="/search_groups.gne";break;case a.searchTypes.PHOTOS:}return e},a.prototype.validateParams=function(r,s){var t,h,o,i={};switch(r=e.merge(r),s){case a.searchTypes.PEOPLE:(t=e.merge(e.SearchHelper.PEOPLE_SEARCH_API)).text="text";break;case a.searchTypes.GROUPS:t=e.merge(e.SearchHelper.GROUPS_SEARCH_API);break;case a.searchTypes.PHOTOS:t=e.merge(e.SearchHelper.API,e.SearchHelper.UNIFIED_STATE_PARAMS);break;case a.searchTypes.UNDEFINED:default:return r}if(t)for(h in t)void 0!==r[o=t[h]]&&(i[o]=r[o]);return i},a.prototype.getDefaultParams=function(r){var s={};switch(r){case a.searchTypes.PEOPLE:e.SearchHelper.addPeopleParamDefaults(s);break;case a.searchTypes.GROUPS:e.SearchHelper.addGroupsParamDefaults(s);break;case a.searchTypes.PHOTOS:e.SearchHelper.addParamDefaults(s);break;case a.searchTypes.UNDEFINED:}return s},a.prototype.getAPIParams=function(){return e.merge(this.params)},a.prototype.getAPIParam=function(e){return this.params[e]},a.prototype.setAPIParam=function(e,r){return this.params[e]=s(r),this},a.prototype.removeAPIParam=function(e){return delete this.params[e],this},a.prototype.removeAllAPIParams=function(){return this.params={},this},a.prototype.getSearchTerm=function(){var r=this.params[this.getSearchTermKey(this.searchType)];return r||(r=this.params[e.SearchHelper.API.tags]),r||""},a.prototype.setSearchTerm=function(r){var s=this.getSearchTermKey(this.searchType);return delete this.params[e.SearchHelper.PEOPLE_SEARCH_API.username],delete this.params[e.SearchHelper.GROUPS_SEARCH_API.text],delete this.params[e.SearchHelper.API.text],delete this.params[e.SearchHelper.API.tags],delete this.params.q,this.params[s]=r,this},a.prototype.getSearchTermKey=function(r){switch(r){case a.searchTypes.PEOPLE:return e.SearchHelper.PEOPLE_SEARCH_API.username;case a.searchTypes.GROUPS:return e.SearchHelper.GROUPS_SEARCH_API.text;case a.searchTypes.PHOTOS:default:return this.params[e.SearchHelper.API.tags]||""===this.params[e.SearchHelper.API.tags]?e.SearchHelper.API.tags:e.SearchHelper.API.text}},a.prototype.removeScope=function(){return e.SearchHelper.SEARCH_SCOPE_PARAMS.forEach(function(e){this.removeAPIParam(e)}.bind(this)),this.removeAPIParam(e.SearchHelper.API.excludeUserId),this},a.prototype.resetToUnified=function(){return this.params[e.SearchHelper.UNIFIED_STATE_PARAMS.viewAll]&&(this.removeAPIParam(e.SearchHelper.API.userId),this.removeAPIParam(e.SearchHelper.API.contacts),this.removeAPIParam(e.SearchHelper.API.groupId),this.removeAPIParam(e.SearchHelper.UNIFIED_STATE_PARAMS.albums)),this.removeAPIParam(e.SearchHelper.API.similarityId),this.removeAPIParam(e.SearchHelper.UNIFIED_STATE_PARAMS.viewAll),this},a.prototype.hasAdvancedParams=function(r){return Object.keys(this.params).some(function(s){return-1!==e.SearchHelper.UNIFIED_ADVANCED_PARAMS.indexOf(s)||!r&&-1!==e.SearchHelper.UNIFIED_QUICK_FILTER_PARAMS.indexOf(s)||!r&&-1!==e.SearchHelper.UNIFIED_TOOLBAR_PARAMS.indexOf(s)})},a.prototype.resetAdvancedParam=function(r,s){return this.hasAdvancedParams(r)?this.setAPIParam(e.SearchHelper.UNIFIED_STATE_PARAMS.advanced,1):s||this.removeAPIParam(e.SearchHelper.UNIFIED_STATE_PARAMS.advanced),this},a.prototype.createNewSearch=function(e){return this.setSearchTerm(e),this.removeScope(),this.searchType!==a.searchTypes.UNDEFINED&&this.searchType!==a.searchTypes.PHOTOS||(this.resetToUnified(),this.resetAdvancedParam()),this},a.prototype.getURL=function(){var e=this.getId(),r=this.getPathname();return e===a.EMPTY_SEARCH_ID?r:r+"?"+e},a.prototype.getId=function(){var r,s={},h=e.SearchHelper.API;for(r in this.params)h[r]?s[h[r]]=this.params[r]:s[r]=this.params[r];return t(s)||a.EMPTY_SEARCH_ID},a.prototype.clone=function(){return new a(this.params,this.appContext,this.searchType)},a.prototype.setMedia=function(r,s){var t;r||(r=!1),s||(s=!1),t=r&&s?"all":r?"photos":"videos",this.setAPIParam(e.SearchHelper.API.mediaType,t)},a.prototype._syncColors=function(){this.colors&&this.colors.length>0?this.params.color_codes=this.colors.join(","):this.removeAPIParam("color_codes")},a.prototype.addColorCode=function(e){if(e&&e.match(i))return this.clearColorCodes(),this.colors=["bw"],void this._syncColors();this.colors&&-1!==this.colors.indexOf("bw")&&(this.colors=[]),this.colors||(this.colors=[]),-1===this.colors.indexOf(e)&&(this.colors.push(e),this._syncColors())},a.prototype.removeColorCode=function(e){var r;this.colors&&-1!==(r=this.colors.indexOf(e))&&(this.colors.splice(r,1),this._syncColors())},a.prototype.clearColorCodes=function(){this.colors=[],this._syncColors()},a.isSearchUrl=function(e){return o.test(e)},a.searchTypes={UNDEFINED:0,PHOTOS:1,PEOPLE:2,GROUPS:3,CLASSIC_GROUPS:4},a.EMPTY_SEARCH_ID="-1",e.SearchUrl=a},"@VERSION@",{requires:["search-helper","querystring-parse-simple","querystring-stringify-simple"]});YUI.add("search-subnav-slender-view",function(e){var r=[{id:"photos",intlKey:"search.PHOTOS",searchType:e.SearchUrl.searchTypes.PHOTOS},{id:"people",intlKey:"search.PEOPLE",searchType:e.SearchUrl.searchTypes.PEOPLE},{id:"groups",intlKey:"search.GROUPS",searchType:e.SearchUrl.searchTypes.GROUPS}];e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(a){var t,s=this,h=a.modelParams&&a.modelParams.apiParams?e.merge(a.modelParams.apiParams):{},i=[];return this.set("searchType",a.searchType),this.set("searchUrl",new e.SearchUrl(h,this.appContext,this.get("searchType"))),this.set("showAdvancedClearLink",this.get("searchType")===e.SearchUrl.searchTypes.PHOTOS&&this.get("searchUrl").hasAdvancedParams(!1)),r.forEach(function(r){(t=e.merge(r,{title:s.intlMessage({intlName:r.intlKey}),url:s.buildTabUrl(r.id,r.searchType),selected:r.searchType===s.get("searchType")})).selected&&(s.set("currentTabUrl",t.url),s.set("currentTabId",t.id)),i.push(t)}),this.set("links",i),this},buildContainer:function(){return this.setContainerWithTemplate("search-subnav",{showInactiveToggle:!1,showTools:!1,selectedSort:!1,showSort:!1,showAdvanced:!1,usingSlenderAdvancedPanel:!0,links:this.get("links"),showAdvancedClearLink:this.get("showAdvancedClearLink")}),this},activate:function(){return e.SearchUrl.isSearchUrl(this.appContext.getPreviousURL())||this.clearStoredTabUrls(),this.get("currentTabUrl")&&this.get("currentTabId")&&this.storeTabUrl(this.get("currentTabUrl"),this.get("currentTabId")),this.get("showAdvancedClearLink")&&this.registerEventHandler(this.get("container").one(".advanced-clear-link").on("click",this.handleClearAdvancedSearchClick.bind(this))),this},buildTabUrl:function(r,a){var t,s=a!==this.get("searchType")?this.checkForStoredUrl(r):null,h=this.get("searchUrl").getSearchTerm();return s?h!==(t=new e.SearchUrl(s,this.appContext,a)).getSearchTerm()&&t.removeScope().resetToUnified().setSearchTerm(h):(t=this.get("searchUrl").clone().setSearchType(a),a!==this.get("searchType")&&(t.removeAPIParam(e.SearchHelper.API.sort),t.removeAPIParam(e.SearchHelper.API.safeSearch)),a!==e.SearchUrl.searchTypes.PHOTOS&&t.removeScope()),t.getURL()},checkForStoredUrl:function(r){var a,t;return YUI.Env.isServer||(t=this.getStorageKeyFromTabId(r),a=e.StorageHelper.getItem(t,!0)),a},clearStoredTabUrls:function(){var r,a=this;YUI.Env.isServer||this.get("links").forEach(function(t){r=a.getStorageKeyFromTabId(t.id),e.StorageHelper.remove(r,!0)})},storeTabUrl:function(r,a){var t;YUI.Env.isServer||(t=this.getStorageKeyFromTabId(a),e.StorageHelper.setItem(t,r,!0))},getStorageKeyFromTabId:function(e){return"searchUrl-"+e},handleClearAdvancedSearchClick:function(r){var a,t=this.get("searchUrl").getSearchTerm(),s=this.get("searchUrl").getAPIParams();r.halt(),e.SearchHelper.clearParamsExceptSearchScope(s),delete s[e.SearchHelper.API.commons],a=new e.SearchUrl(s,this.appContext,this.searchType),t&&a.setSearchTerm(t),this.appContext.flapp.navigate(a.getURL())}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-search-subnav","storage-helper","search-helper","search-url"],langBundles:["search"]});YUI.add("hermes-lang-search",function(e,o){e.Intl.add("hermes/search","en-US",{RELEVANT:["Relevant"],RECENT:["Recent"],INTERESTING:["Interesting"],NAME:["Name"],ACTIVITY:["Activity"],SIZE:["Size"],OLDEST:["Oldest"],NEWEST:["Newest"],DEFAULT_SEARCH:['This is where you search Flickr. Here\'s a search for <span class="default-search">',"${query}","</span> to get you started!"],FLICKR_SEARCH:["Flickr Search"],NO_MATCHES_FOR_QUERY_TERM:["Oops! There are no matches for ","${searchTerm}","."],NO_MATCHES_FOR_QUERY_TERM_WITH_SETTINGS:["Oops! There are no matches for ","${searchTerm}"," with your selected settings."],NO_MATCHES_FOR_QUERY:["Oops! There are no matches for your search."],TRY_DIFFERENT:["Please try refining your search."],TRY_DIFFERENT_BROADER:["Please try broadening your search."],SEARCH_ERROR:["Oops! The date you entered does not exist."],SEARCH_START:["Start your search"],SEARCHING:["Searching"],FETCHING_PHOTOS:["Fetching more photos..."],SEARCH:["Search"],START_YOUR_SEARCH:["Start your search"],BY_USER:["by ","${user}"],NO_MATCHES_FOR_QUERY_TERM_CONTEXT_YOUR:["Oops! There are no matches for ","${searchTerm}"," in your photos."],NO_MATCHES_FOR_QUERY_TERM_CONTEXT_CONTACTS:["Oops! There are no matches for ","${searchTerm}"," in your contacts' photos."],NO_MATCHES_FOR_QUERY_TERM_CONTEXT_USER:["Oops! There are no matches for ","${searchTerm}"," in this user's photos."],NO_MATCHES_FOR_QUERY_TERM_CONTEXT_GROUP:["Oops! There are no matches for ","${searchTerm}"," in this group."],NO_MATCHES_FOR_QUERY_TERM_YOUR:["Oops! There are no matches for your search in your photos."],NO_MATCHES_FOR_QUERY_TERM_CONTACTS:["Oops! There are no matches for your search in your contacts' photos."],NO_MATCHES_FOR_QUERY_TERM_USER:["Oops! There are no matches for your search in this user's photos."],NO_MATCHES_FOR_QUERY_TERM_GROUP:["Oops! There are no matches for your search in this group."],API_ERROR_HEADER:["Oh noes! We couldn't process your search."],API_ERROR_SUBHEADER:["Please change it up a bit and try again."],PEOPLE_YOU_FOLLOW:["People you follow"],ALL_FLICKR_MEMBERS:["All Flickr members"],FLICKR_MEMBERS:["Flickr members"],YOUR_GROUPS:["Your groups"],ALL_FLICKR_GROUPS:["All Flickr groups"],FLICKR_GROUPS:["Flickr groups"],MEMBER_COUNT:[{type:"plural",valueName:"count",options:{zero:"0 members",one:"${#} member",other:"${#} members"}}],GROUP_PHOTO_COUNT:[{type:"plural",valueName:"count",options:{zero:"no photos",one:"${#} photo",other:"${#} photos"}}],GROUP_DISCUSSION_COUNT:[{type:"plural",valueName:"count",options:{zero:"no discussions",one:"${#} discussion",other:"${#} discussions"}}],YOUR_PHOTOS:["Your photos"],YOUR_ALBUMS:["Your albums"],YOUR_GALLERIES:["Your galleries"],FROM_YOUR_CONTACTS:["From your contacts"],EVERYONES_PHOTOS:["Everyone's photos"],VIEW_ALL_COUNT:[{type:"plural",valueName:"count",options:{zero:"no more photos",other:"View all ${#}"}}],RESULTS_COUNT:[{type:"plural",valueName:"count",options:{zero:"no results",one:"${#} result",other:"${#} results"}}],PEOPLE_PHOTOS_COUNT:[{type:"plural",valueName:"count",options:{zero:"0 photos",one:"${#} photo",other:"${#} photos"}}],PEOPLE_VIDEOS_COUNT:[{type:"plural",valueName:"count",options:{zero:"no videos",one:"${#} video",other:"${#} videos"}}],PEOPLE_FOLLOWERS_COUNT:[{type:"plural",valueName:"count",options:{zero:"no followers",one:"${#} follower",other:"${#} followers"}}],SAFESEARCH_ON:["SafeSearch on"],SAFESEARCH_OFF:["SafeSearch off"],SAFESEARCH_MODERATE:["SafeSearch moderate"],SEARCH_PHOTOSTREAM:["Search photostream"],SEARCH_FAVORITES:["Search favorites"],ANY_LICENSE:["Any license"],ALL_CC:["All creative commons"],COMMERCIAL_USE:["Commercial use allowed"],MODS_ALLOWED:["Modifications allowed"],COMMERCIAL_USE_MODS:["Commercial use & mods allowed"],NO_RESTRICTIONS:["No known copyright restrictions"],MARKETPLACE_LICENSE:["Flickr Marketplace"],US_GOVT:["U.S. Government works"],PUBLIC_DOMAIN_DEDICATION:["Public Domain Dedication (CC0)"],PUBLIC_DOMAIN_WORK:["Public Domain Work"],CC_BY_NC_SA:["Attribution-NonCommercial-ShareAlike"],CC_BY_NC:["Attribution-NonCommercial"],CC_BY_NC_ND:["Attribution-NonCommercial-NoDerivs"],CC_BY:["Attribution"],CC_BY_SA:["Attribution-ShareAlike"],CC_BY_ND:["Attribution-NoDerivs"],PLAIN_COUNT:[{type:"plural",valueName:"count",options:{zero:"0",one:"${#}",other:"${#}"}}],PHOTOS:["Photos"],PEOPLE:["People"],GROUPS:["Groups"],PHOTOS_POSSESSIVE:["${name}","'s photos"],FAVES_POSSESSIVE:["${name}","'s favorites"],CONTACTS_POSSESSIVE:["${name}","'s contacts"],GROUPS_POSSESSIVE:["${name}","'s groups"],VIEWER_FAVES:["Your favorites"],IN_GROUP_POOL:["In the ","${name}"," group pool"],OPT_OUT_MESSAGE:["You are viewing the alpha version of our new search experience. Click here to return to the old version."],OPT_IN_MESSAGE:["Go back to the alpha search experience"],OPT_OUT_MESSAGE_BETA:["You are viewing the beta version of our new search experience. Click here to return to the old version."],OPT_IN_MESSAGE_BETA:["Go back to the beta search experience"],SEARCH_BETA_LABEL:["Search beta"],SEARCH_ALPHA_LABEL:["Search alpha"],GO_BACK_TO_OLD_SEARCH:["Go back to the old Flickr search"],PROVIDE_FEEDBACK:["Provide feedback"],FROM_PEOPLE_YOU_FOLLOW:["From people you follow"],FULL_TEXT_AND_TAGS:["Full text with suggested tags"],FULL_TEXT:["Full text"],TAGS_ONLY:["Tags only"],RED:["Red"],DARK_ORANGE:["Dark orange"],ORANGE:["Orange"],SCHOOL_BUS_YELLOW:["School bus yellow"],LEMON_YELLOW:["Lemon yellow"],GREEN:["Green"],LIME_GREEN:["Dark lime green"],CYAN:["Cyan"],BLUE:["Blue"],VIOLET:["Violet"],PINK:["Pink"],PALE_PINK:["Pale pink"],WHITE:["White"],GRAY:["Gray"],BLACK:["Black"],MONOCHROME:["monochrome"],JOINED_DATE:["Joined ",{type:"date",valueName:"intlDate",format:"monthYearShort"}],HIDE_INACTIVE_GROUPS:["Hide inactive groups"],ADVANCED:["Advanced"],ORIENTATION_AND_SIZE:["Orientation & size"],ORIENTATION:["Orientation"],MINIMUM_SIZE:["Minimum size"],PORTRAIT:["Portrait"],SQUARE:["Square"],LANDSCAPE:["Landscape"],PANORAMA:["Panorama"],SMALL_SHOW_ALL_SIZES:["Small (show all sizes)"],ALL_SIZES:["All sizes"],MEDIUM:["Medium"],LARGE:["Large"],CUSTOM:["Custom"],COLOR:["Color"],DATE:["Date"],FROM:["From"],TO:["To"],DATE_TAKEN:["Date taken"],DATE_POSTED:["Date posted"],DATE_UPLOADED:["Date uploaded"],CONTENT:["Content"],VIDEOS:["Videos"],SCREENSHOTS:["Screenshots"],ILLUSTRATIONS:["Illustrations"],SEARCH_IN:["Search in"],RESET:["Reset"],JUSTIFIED_VIEW:["Justified view"],THUMBNAIL_VIEW:["Thumbnail view"],TILE_VIEW:["Tile view"],SORT:["Sort"],TOGGLE_ADVANCED:["Toggle advanced"],CAMERA_SETTINGS:["Camera settings"],TOGGLE_SEARCH:["Toggle Search"],PHOTOS_PEOPLE_OR_GROUPS:["Photos, people, or groups"],PHOTOS_PEOPLE_GROUPS:["Photos, people, groups"],SMALL_SHORT:["S"],MEDIUM_SHORT:["M"],LARGE_SHORT:["L"],ALL:["All"],TAGS:["Tags"],CLEAR:["Clear"],ABSTRACT:["Abstract"],ART:["Art"],BLACK_AND_WHITE:["Black and white"],MONOCHROME_STYLE:["Monochrome"],BLUR:["Blur"],BRIGHT:["Bright"],CURVES:["Curves"],DIAGONAL:["Diagonal"],ETHEREAL:["Ethereal"],GEOMETRIC:["Geometric"],HDR:["HDR"],LINES:["Lines"],MACRO:["Macro"],DEPTH_OF_FIELD:["Shallow depth of field"],MINIMALIST:["Minimalist"],PASTEL:["Pastel"],PATTERNS:["Patterns"],ROUND:["Round"],SERENE:["Serene"],SYMMETRY:["Symmetry"],TEXTURES:["Textures"],TRIANGLES:["Triangles"],VINTAGE:["Vintage"],BOKEH:["Bokeh"],SEARCH_PHOTOS:["Search photos"],SEARCH_PEOPLE:["Search people"],SEARCH_GROUPS:["Search groups"],EVERYONE:["Everyone"],SIGN_IN_BEFORE_SEARCH_TITLE:["This content is for mature audiences only."],SIGN_IN_BEFORE_SEARCH_MESSAGE:["Join Flickr to turn off safe search."],SIGNUP_FOOTER_MESSAGE:["Private photo management and an inspiring community."]})},"@VERSION@",{requires:["intl"]});YUI.add("attribute-helpers",function(n){function e(n){if(void 0===n||null===n)return!0}n.AttributeHelpers={validateString:function(t){return!!e(t)||!!n.Lang.isString(t)||!!n.Lang.isNumber(t)},coerceString:function(e){return n.Lang.isNumber(e)&&(e=e.toString()),n.Lang.isString(e)?e:void 0},validateInteger:function(t){return!!e(t)||(n.Lang.isString(t)&&(t=parseInt(t,10)),!!n.Lang.isNumber(t))},coerceInteger:function(e){return n.Lang.isString(e)&&(e=parseInt(e,10)),n.Lang.isNumber(e)?e<0?Math.ceil(e):Math.floor(e):void 0},validateFloat:function(t){return!!e(t)||(n.Lang.isString(t)&&(t=parseFloat(t)),!!n.Lang.isNumber(t))},coerceFloat:function(e){if(n.Lang.isString(e)&&(e=parseFloat(e)),n.Lang.isNumber(e))return e},validateBoolean:function(t){return!!e(t)||!!n.Lang.isBoolean(t)||[0,"0","false"].indexOf(t)>-1||[1,"1","true"].indexOf(t)>-1},coerceBoolean:function(n){return!([!1,"0",0,"false"].indexOf(n)>-1)&&([!0,"1",1,"true"].indexOf(n)>-1||void 0)},validateDate:function(t){return!!e(t)||-1===[!0,!1].indexOf(t)&&!(t instanceof Array)&&("string"==typeof t&&(t=parseInt(t,10)),"object"==typeof t&&void 0!==t._d&&(t=t._d),!!n.moment(t).isValid())},coerceDate:function(e){var t=null,i=null;return n.moment.isMoment(e)?e:e&&"object"==typeof e&&e._d&&((i=n.moment(e)).isValid()||(i=n.moment(e._d)),i.isValid())?i:"number"==typeof e||e===parseInt(e,10).toString()?(t=parseInt(e,10),i=t.toString().length<=10?n.moment(t.toString(),"X"):n.moment(t)):e&&!n.Lang.isBoolean(e)&&(n.moment(new Date(e)).isValid()||n.moment(new Date(e.toString().replace(" ","T"))).isValid())?n.moment(e):void 0}}},"@VERSION@",{requires:[]});YUI.add("hermes-template-search-empty",function(e,a){var t=e.Template.Handlebars.revive({1:function(e,a,t,n,s){return" using-slender-advanced-panel"},3:function(e,a,t,n,s){var l,r=e.escapeExpression;return'\t\t\t<div class="no-results-message">\n\t\t\t\t<h5>'+r(e.lambda(null!=(l=null!=a?a.noMatchesForQuery:a)?l.noMatchesText:l,a))+"</h5>\n\t\t\t\t<h5>"+r((t.intlMessage||a&&a.intlMessage||t.helperMissing).call(null!=a?a:{},{name:"intlMessage",hash:{intlName:"search.TRY_DIFFERENT_BROADER"},data:s}))+"</h5>\n\t\t\t</div>\n"},5:function(e,a,t,n,s){var l=null!=a?a:{},r=t.helperMissing,i=e.escapeExpression;return'\t\t\t<div class="no-results-message">\n\t\t\t\t<h5>'+i((t.intlMessage||a&&a.intlMessage||r).call(l,{name:"intlMessage",hash:{intlName:"search.API_ERROR_HEADER"},data:s}))+"</h5>\n\t\t\t\t<h5>"+i((t.intlMessage||a&&a.intlMessage||r).call(l,{name:"intlMessage",hash:{intlName:"search.API_ERROR_SUBHEADER"},data:s}))+"</h5>\n\t\t\t</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,a,t,n,s){var l,r,i=null!=a?a:{},c=t.helperMissing,h=e.escapeExpression;return'<div class="search-empty'+(null!=(l=t.if.call(i,null!=a?a.usingSlenderAdvancedPanel:a,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'">\n\t<div class="no-results-message-container">\n'+(null!=(l=t.if.call(i,null!=a?a.noMatchesForQuery:a,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+(null!=(l=t.if.call(i,null!=a?a.apiFailed:a,{name:"if",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:"")+'\t</div>\n\n\t<div class="search-box-container">\n\t\t<form method="GET" action="/search/" role="search">\n\t\t\t<div class="search-icon"></div>\n\t\t\t<input type="text" name="text" class="search-box" placeholder="'+h("function"==typeof(r=null!=(r=t.searchPlaceholder||(null!=a?a.searchPlaceholder:a))?r:c)?r.call(i,{name:"searchPlaceholder",hash:{},data:s}):r)+'" role="textbox" autofocus>\n\t\t\t<button type="submit" class="large search-button">'+h((t.intlMessage||a&&a.intlMessage||c).call(i,{name:"intlMessage",hash:{intlName:"search.SEARCH"},data:s}))+"</button>\n\t\t</form>\n\t</div>\n</div>\n"},useData:!0}),n={};e.Array.each([],function(a){var t=e.Template.get("hermes/"+a);t&&(n[a]=t)}),e.Template.register("hermes/search-empty",function(a,s){return s=s||{},s.partials=s.partials?e.merge(n,s.partials):n,t(a,s)})},"@VERSION@",{requires:["template-base","handlebars-base"]});