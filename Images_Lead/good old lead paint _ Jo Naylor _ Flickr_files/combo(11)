YUI.add("feedback-widget-view",function(e){e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this.set("feedbackUrl",e.feedbackUrl),this.set("trackingSlk",e.trackingSlk),this.set("hidden",e.hidden||!1)},loadState:function(){return e.Promise.resolve()},buildContainer:function(){return this.setContainerWithTemplate("feedback-widget",{feedbackUrl:this.get("feedbackUrl"),trackingSlk:this.get("trackingSlk")}),this.get("hidden")&&this.get("container").addClass("hidden"),this},activate:function(){var t=e.one(".footer-full-view"),i=t?t.one("footer.foot"):null;return this.set("footerContainer",t),this.set("footer",i),this.registerEventHandler(e.globalEvents.subscribe("window:scroll",this.updateWidgetPosition.bind(this))),this.registerEventHandler(e.globalEvents.subscribe("window:resize",this.updateWidgetPosition.bind(this))),this.updateWidgetPosition(),this},onParentViewEvent:function(e,t){switch(t&&t.length&&t[0]){case"footerDisplayChanged":this.updateWidgetPosition();break;case"unhideFeedbackWidget":this.get("container").removeClass("hidden")}},updateWidgetPosition:function(t){var i;this.get("footer")&&(i=e.config.win.pageYOffset+this.appContext.viewportData.getHeight(),"none"!==this.get("footerContainer").getComputedStyle("display")&&i>=this.get("footer").getY()?this.get("container").hasClass("hugging-footer")||this.get("container").addClass("hugging-footer"):this.get("container").hasClass("hugging-footer")&&this.get("container").removeClass("hugging-footer"))}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-feedback-widget"],langBundles:["feedback"]});YUI.add("hermes-lang-feedback",function(e,a){e.Intl.add("hermes/feedback","en-US",{HELP_AND_FEEDBACK:["Help &amp; Feedback"],FEEDBACK_LINK:["Feedback"],FAQS_LINK:["FAQs"],OPT_OUT_LINK:["Opt out of the new Photo Experience"]})},"@VERSION@",{requires:["intl"]});YUI.add("hermes-template-google-analytics",function(e,a){var n=e.Template.Handlebars.revive({1:function(e,a,n,l,s){var i,t,r=null!=a?a:{},c=n.helperMissing,p=e.escapeExpression;return'<script nonce="'+p("function"==typeof(t=null!=(t=n.cspNonce||(null!=a?a.cspNonce:a))?t:c)?t.call(r,{name:"cspNonce",hash:{},data:s}):t)+'">window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;<\/script>\n<script nonce="'+p("function"==typeof(t=null!=(t=n.cspNonce||(null!=a?a.cspNonce:a))?t:c)?t.call(r,{name:"cspNonce",hash:{},data:s}):t)+"\" async src='https://www.google-analytics.com/analytics"+(null!=(i=(n.isFlipped||a&&a.isFlipped||c).call(r,"enable-google-analytics-debugging",{name:"isFlipped",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?i:"")+".js'><\/script>\n"},2:function(e,a,n,l,s){return"_debug"},compiler:[7,">= 4.0.0"],main:function(e,a,n,l,s){var i;return null!=(i=(n.isFlipped||a&&a.isFlipped||n.helperMissing).call(null!=a?a:{},"enable-google-analytics",{name:"isFlipped",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?i:""},useData:!0}),l={};e.Array.each([],function(a){var n=e.Template.get("hermes/"+a);n&&(l[a]=n)}),e.Template.register("hermes/google-analytics",function(a,s){return s=s||{},s.partials=s.partials?e.merge(l,s.partials):l,n(a,s)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-adobe-analytics",function(e,a){var n=e.Template.Handlebars.revive({1:function(e,a,n,l,s){var r,t=null!=a?a:{},i=n.helperMissing,c=e.escapeExpression;return'<script nonce="'+c("function"==typeof(r=null!=(r=n.cspNonce||(null!=a?a.cspNonce:a))?r:i)?r.call(t,{name:"cspNonce",hash:{},data:s}):r)+'" src="'+c("function"==typeof(r=null!=(r=n.adobeAnalyticsUrl||(null!=a?a.adobeAnalyticsUrl:a))?r:i)?r.call(t,{name:"adobeAnalyticsUrl",hash:{},data:s}):r)+'" async><\/script>\n'},compiler:[7,">= 4.0.0"],main:function(e,a,n,l,s){var r;return null!=(r=(n.isFlipped||a&&a.isFlipped||n.helperMissing).call(null!=a?a:{},"enable-adobe-analytics",{name:"isFlipped",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?r:""},useData:!0}),l={};e.Array.each([],function(a){var n=e.Template.get("hermes/"+a);n&&(l[a]=n)}),e.Template.register("hermes/adobe-analytics",function(a,s){return s=s||{},s.partials=s.partials?e.merge(l,s.partials):l,n(a,s)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-google-tag-manager",function(e,a){var n=e.Template.Handlebars.revive({1:function(e,a,n,t,l){var r,s=null!=a?a:{},i=n.helperMissing,o=e.escapeExpression;return'<script nonce="'+o("function"==typeof(r=null!=(r=n.cspNonce||(null!=a?a.cspNonce:a))?r:i)?r.call(s,{name:"cspNonce",hash:{},data:l}):r)+"\">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.nonce='"+o("function"==typeof(r=null!=(r=n.cspNonce||(null!=a?a.cspNonce:a))?r:i)?r.call(s,{name:"cspNonce",hash:{},data:l}):r)+"';j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-WS6KDNW');<\/script>\n<noscript><iframe src=\"https://www.googletagmanager.com/ns.html?id=GTM-WS6KDNW\" height=\"0\" width=\"0\" style=\"display:none;visibility:hidden\"></iframe></noscript>\n"},compiler:[7,">= 4.0.0"],main:function(e,a,n,t,l){var r;return null!=(r=(n.isFlipped||a&&a.isFlipped||n.helperMissing).call(null!=a?a:{},"enable-google-tag-manager",{name:"isFlipped",hash:{},fn:e.program(1,l,0),inverse:e.noop,data:l}))?r:""},useData:!0}),t={};e.Array.each([],function(a){var n=e.Template.get("hermes/"+a);n&&(t[a]=n)}),e.Template.register("hermes/google-tag-manager",function(a,l){return l=l||{},l.partials=l.partials?e.merge(t,l.partials):t,n(a,l)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-footer-full",function(t,e){var a=t.Template.Handlebars.revive({1:function(t,e,a,l,n){var s,o=null!=e?e:{};return'\t\t<div class="foot-top-row">\n\t\t\t<ul class="foot-nav-ul">\n'+(null!=(s=a.if.call(o,null!=(s=null!=e?e.elements:e)?s.top_about:s,{name:"if",hash:{},fn:t.program(2,n,0),inverse:t.noop,data:n}))?s:"")+(null!=(s=a.if.call(o,null!=(s=null!=e?e.elements:e)?s.top_jobs:s,{name:"if",hash:{},fn:t.program(4,n,0),inverse:t.noop,data:n}))?s:"")+(null!=(s=a.if.call(o,null!=(s=null!=e?e.elements:e)?s.top_blog:s,{name:"if",hash:{},fn:t.program(6,n,0),inverse:t.noop,data:n}))?s:"")+(null!=(s=a.if.call(o,null!=(s=null!=e?e.elements:e)?s.top_developers:s,{name:"if",hash:{},fn:t.program(8,n,0),inverse:t.noop,data:n}))?s:"")+(null!=(s=a.if.call(o,null!=(s=null!=e?e.elements:e)?s.top_guidelines:s,{name:"if",hash:{},fn:t.program(10,n,0),inverse:t.noop,data:n}))?s:"")+(null!=(s=a.if.call(o,null!=(s=null!=e?e.elements:e)?s.top_privacy:s,{name:"if",hash:{},fn:t.program(12,n,0),inverse:t.noop,data:n}))?s:"")+(null!=(s=a.if.call(o,null!=(s=null!=e?e.elements:e)?s.top_terms:s,{name:"if",hash:{},fn:t.program(14,n,0),inverse:t.noop,data:n}))?s:"")+(null!=(s=a.if.call(o,null!=(s=null!=e?e.elements:e)?s.top_help:s,{name:"if",hash:{},fn:t.program(16,n,0),inverse:t.noop,data:n}))?s:"")+(null!=(s=a.if.call(o,null!=(s=null!=e?e.elements:e)?s.top_report_abuse:s,{name:"if",hash:{},fn:t.program(18,n,0),inverse:t.noop,data:n}))?s:"")+(null!=(s=a.if.call(o,null!=(s=null!=e?e.elements:e)?s.top_help_forum:s,{name:"if",hash:{},fn:t.program(20,n,0),inverse:t.noop,data:n}))?s:"")+(null!=(s=a.if.call(o,null!=(s=null!=e?e.elements:e)?s.top_language:s,{name:"if",hash:{},fn:t.program(22,n,0),inverse:t.noop,data:n}))?s:"")+"\t\t\t</ul>\n\t\t</div>\n"},2:function(t,e,a,l,n){return'\t\t\t\t<li class="foot-li"><a href="/about" data-track="footer-about">'+t.escapeExpression((a.intlMessage||e&&e.intlMessage||a.helperMissing).call(null!=e?e:{},{name:"intlMessage",hash:{intlName:"common.ABOUT"},data:n}))+"</a></li>\n"},4:function(t,e,a,l,n){return'\t\t\t\t<li class="foot-li"><a href="/jobs" data-track="footer-jobs">'+t.escapeExpression((a.intlMessage||e&&e.intlMessage||a.helperMissing).call(null!=e?e:{},{name:"intlMessage",hash:{intlName:"common.JOBS"},data:n}))+"</a></li>\n"},6:function(t,e,a,l,n){return'\t\t\t\t<li class="foot-li"><a href="//blog.flickr.net/en" data-track="footer-blog">'+t.escapeExpression((a.intlMessage||e&&e.intlMessage||a.helperMissing).call(null!=e?e:{},{name:"intlMessage",hash:{intlName:"common.BLOG"},data:n}))+"</a></li>\n"},8:function(t,e,a,l,n){return'\t\t\t\t<li class="foot-li"><a href="/services/developer" data-track="footer-developers">'+t.escapeExpression((a.intlMessage||e&&e.intlMessage||a.helperMissing).call(null!=e?e:{},{name:"intlMessage",hash:{intlName:"common.DEVELOPERS"},data:n}))+"</a></li>\n"},10:function(t,e,a,l,n){return'\t\t\t\t<li class="foot-li"><a href="/help/guidelines" data-track="footer-guidelines">'+t.escapeExpression((a.intlMessage||e&&e.intlMessage||a.helperMissing).call(null!=e?e:{},{name:"intlMessage",hash:{intlName:"common.GUIDELINES"},data:n}))+"</a></li>\n"},12:function(t,e,a,l,n){return'\t\t\t\t<li class="foot-li"><a href="/help/privacy" data-track="footer-privacy">'+t.escapeExpression((a.intlMessage||e&&e.intlMessage||a.helperMissing).call(null!=e?e:{},{name:"intlMessage",hash:{intlName:"common.PRIVACY"},data:n}))+"</a></li>\n"},14:function(t,e,a,l,n){return'\t\t\t\t<li class="foot-li"><a href="/help/terms" data-track="footer-terms">'+t.escapeExpression((a.intlMessage||e&&e.intlMessage||a.helperMissing).call(null!=e?e:{},{name:"intlMessage",hash:{intlName:"common.TERMS"},data:n}))+"</a></li>\n"},16:function(t,e,a,l,n){return'\t\t\t\t<li class="foot-li"><a href="//help.flickr.com" data-track="footer-help">'+t.escapeExpression((a.intlMessage||e&&e.intlMessage||a.helperMissing).call(null!=e?e:{},{name:"intlMessage",hash:{intlName:"common.HELP"},data:n}))+"</a></li>\n"},18:function(t,e,a,l,n){return'\t\t\t\t<li class="foot-li"><a href="/abuse" data-track="footer-abuse">'+t.escapeExpression((a.intlMessage||e&&e.intlMessage||a.helperMissing).call(null!=e?e:{},{name:"intlMessage",hash:{intlName:"common.REPORT_ABUSE"},data:n}))+"</a></li>\n"},20:function(t,e,a,l,n){return'\t\t\t\t<li class="foot-li"><a href="/help/forum" data-track="footer-forum">'+t.escapeExpression((a.intlMessage||e&&e.intlMessage||a.helperMissing).call(null!=e?e:{},{name:"intlMessage",hash:{intlName:"common.HELP_FORUM"},data:n}))+"</a></li>\n"},22:function(t,e,a,l,n){var s,o=t.lambda,i=t.escapeExpression;return'\t\t\t\t<li class="foot-li lang-switcher">\n\t\t\t\t\t<a href="/change_language.gne?lang='+i(o(null!=(s=null!=e?e.selectedLang:e)?s.code:s,e))+"&csrf="+i(o(null!=(s=null!=e?e.selectedLang:e)?s.csrf:s,e))+'" data-track="footer-language">'+i(o(null!=(s=null!=e?e.selectedLang:e)?s.name:s,e))+'</a>\n\t\t\t\t\t<span class="arrow"></span>\n\t\t\t\t</li>\n'},24:function(t,e,a,l,n){var s,o=null!=e?e:{},i=a.helperMissing;return'\t\t<div class="foot-bottom-row">\n\t\t\t<div class="foot-yahoo '+(null!=(s=(a.isFlipped||e&&e.isFlipped||i).call(o,"relocate-footer-help-button",{name:"isFlipped",hash:{},fn:t.program(25,n,0),inverse:t.noop,data:n}))?s:"")+'">\n\t\t\t\t<ul class="foot-nav-ul">\n'+(null!=(s=a.if.call(o,null!=(s=null!=e?e.elements:e)?s.bottom_privacy:s,{name:"if",hash:{},fn:t.program(27,n,0),inverse:t.noop,data:n}))?s:"")+(null!=(s=a.if.call(o,null!=(s=null!=e?e.elements:e)?s.bottom_terms:s,{name:"if",hash:{},fn:t.program(29,n,0),inverse:t.noop,data:n}))?s:"")+(null!=(s=a.if.call(o,null!=(s=null!=e?e.elements:e)?s.bottom_help:s,{name:"if",hash:{},fn:t.program(32,n,0),inverse:t.noop,data:n}))?s:"")+'\t\t\t\t</ul>\n\t\t\t</div>\n\n\t\t\t<div class="foot-company '+(null!=(s=(a.isFlipped||e&&e.isFlipped||i).call(o,"relocate-footer-help-button",{name:"isFlipped",hash:{},fn:t.program(34,n,0),inverse:t.noop,data:n}))?s:"")+'">\n'+(null!=(s=a.if.call(o,null!=(s=null!=e?e.elements:e)?s.bottom_yahoo_company:s,{name:"if",hash:{},fn:t.program(36,n,0),inverse:t.program(38,n,0),data:n}))?s:"")+'\t\t\t</div>\n\n\t\t\t<div class="foot-social">\n\t\t\t\t<ul class="foot-nav-ul">\n'+(null!=(s=a.if.call(o,null!=(s=null!=e?e.elements:e)?s.bottom_tumblr:s,{name:"if",hash:{},fn:t.program(40,n,0),inverse:t.noop,data:n}))?s:"")+(null!=(s=a.if.call(o,null!=(s=null!=e?e.elements:e)?s.bottom_facebook:s,{name:"if",hash:{},fn:t.program(42,n,0),inverse:t.noop,data:n}))?s:"")+(null!=(s=a.if.call(o,null!=(s=null!=e?e.elements:e)?s.bottom_twitter:s,{name:"if",hash:{},fn:t.program(44,n,0),inverse:t.noop,data:n}))?s:"")+"\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n"},25:function(t,e,a,l,n){return" relocate-footer-help-foot-yahoo"},27:function(t,e,a,l,n){return'\t\t\t\t\t<li class="foot-li"><a href="/help/privacy" data-track="footer-privacy">'+t.escapeExpression((a.intlMessage||e&&e.intlMessage||a.helperMissing).call(null!=e?e:{},{name:"intlMessage",hash:{intlName:"common.PRIVACY"},data:n}))+"</a></li>\n"},29:function(t,e,a,l,n){var s,o=null!=e?e:{};return'\t\t\t\t\t<li class="foot-li"><a href="/help/terms" data-track="footer-terms"'+(null!=(s=a.if.call(o,null!=e?e.highlightTerms:e,{name:"if",hash:{},fn:t.program(30,n,0),inverse:t.noop,data:n}))?s:"")+">"+t.escapeExpression((a.intlMessage||e&&e.intlMessage||a.helperMissing).call(o,{name:"intlMessage",hash:{intlName:"common.TERMS"},data:n}))+"</a></li>\n"},30:function(t,e,a,l,n){return' class="highlighted"'},32:function(t,e,a,l,n){return'\t\t\t\t\t<li class="foot-li"><a href="//help.flickr.com" data-track="footer-help">'+t.escapeExpression((a.intlMessage||e&&e.intlMessage||a.helperMissing).call(null!=e?e:{},{name:"intlMessage",hash:{intlName:"common.HELP"},data:n}))+"</a></li>\n"},34:function(t,e,a,l,n){return" relocate-footer-help-foot-company"},36:function(t,e,a,l,n){return"\t\t\t\t\t"+t.escapeExpression((a.intlHTMLMessage||e&&e.intlHTMLMessage||a.helperMissing).call(null!=e?e:{},{name:"intlHTMLMessage",hash:{intlName:"common.A_YAHOO_COMPANY_WITH_LINK"},data:n}))+"\n"},38:function(t,e,a,l,n){return"\t\t\t\t\t&nbsp;\n"},40:function(t,e,a,l,n){return'\t\t\t\t\t<li><a target="_blank" href="http://flickr.tumblr.com/" aria-label="Tumblr" data-track="footer-tumblr">\n\t\t\t\t\t\t<svg class="ft-icon ft-tumblr"><use xlink:href="#icon-tumblr"></use></svg>\n\t\t\t\t\t</a></li>\n'},42:function(t,e,a,l,n){return'\t\t\t\t\t<li><a target="_blank" href="https://www.facebook.com/flickr" aria-label="Facebook" data-track="footer-facebook">\n\t\t\t\t\t\t<svg class="ft-icon ft-facebook"><use xlink:href="#icon-facebook"></use></svg>\n\t\t\t\t\t</a></li>\n'},44:function(t,e,a,l,n){return'\t\t\t\t\t<li><a target="_blank" href="https://twitter.com/flickr" aria-label="Twitter" data-track="footer-twitter">\n\t\t\t\t\t\t<svg class="ft-icon ft-twitter"><use xlink:href="#icon-twitter"></use></svg>\n\t\t\t\t\t</a></li>\n'},compiler:[7,">= 4.0.0"],main:function(t,e,a,l,n){var s,o=null!=e?e:{};return'<footer class="foot">\n\t<div class="foot-container" role="contentinfo">\n'+(null!=(s=a.if.call(o,null!=(s=null!=e?e.elements:e)?s.top_row:s,{name:"if",hash:{},fn:t.program(1,n,0),inverse:t.noop,data:n}))?s:"")+(null!=(s=a.if.call(o,null!=(s=null!=e?e.elements:e)?s.bottom_row:s,{name:"if",hash:{},fn:t.program(24,n,0),inverse:t.noop,data:n}))?s:"")+'\t</div>\n</footer>\n\n<span id="tgt"><div id="tgtRS"></div></span>\n\n'+(null!=(s=t.invokePartial(l["google-analytics"],e,{name:"google-analytics",data:n,helpers:a,partials:l,decorators:t.decorators}))?s:"")+(null!=(s=t.invokePartial(l["adobe-analytics"],e,{name:"adobe-analytics",data:n,helpers:a,partials:l,decorators:t.decorators}))?s:"")+(null!=(s=t.invokePartial(l["google-tag-manager"],e,{name:"google-tag-manager",data:n,helpers:a,partials:l,decorators:t.decorators}))?s:"")},usePartial:!0,useData:!0}),l={};t.Array.each(["google-analytics","adobe-analytics","google-tag-manager"],function(e){var a=t.Template.get("hermes/"+e);a&&(l[e]=a)}),t.Template.register("hermes/footer-full",function(e,n){return n=n||{},n.partials=n.partials?t.merge(l,n.partials):l,a(e,n)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-google-analytics","hermes-template-adobe-analytics","hermes-template-google-tag-manager"]});YUI.add("dropdown",function(e){"use strict";var t;t={css:{closed:"ui-dropdown-closed",shim:"ui-dropdown-shim",label:'span[data-action="toggle"]',items:"[data-value]",itemSelected:"ui-dropdown-item-selected",hasDialogArrow:"ui-dropdown-has-dialog-arrow",dialogArrow:"ui-dialog-arrow",useCheckMarks:"ui-dropdown-use-checkboxes"},options:{hasDialogArrow:!1,useCheckMarks:!1}},e.namespace("Views").Dropdown=e.Base.create("Dropdown",e.FlickrView,[],{initializer:function(e){!1!==e.activate&&this.activate()},activate:function(){var s,i=this,a=this.get("container");if(this.close(),this._items={},e.Lang.isArray(this.get("selected"))||this.set("selected",[this.get("selected")]),a.all(t.css.items).each(function(e){var t=e.getData();i._items[t.value]={text:t.text||'no data-text for "'+t.value+'"',sub:t.sub,node:e}}),this.labelEl=a.one(t.css.label),this.labelEl||(this.labelEl=e.Node.create('<span class="truncate" data-action="toggle" tabindex="0" aria-haspopup="true" aria-expanded="false" />'),a.insert(this.labelEl,0)),(s=this.get("staticLabel")||this.get("defaultLabel"))&&(!0===s?this.labelEl.set("text","set staticLabel/defaultLabel to a string, not `true`"):this.labelEl.set("text",s)),this.get("hasDialogArrow")&&!a.hasClass(t.css.hasDialogArrow)&&a.addClass(t.css.hasDialogArrow),a.hasClass(t.css.hasDialogArrow)&&(this.dialogArrowEl=a.one(t.css.dialogArrow),this.dialogArrowEl||(this.dialogArrowEl=e.Node.create('<span class="ui-dialog-arrow" />'),a.insert(this.dialogArrowEl,1))),this.get("useCheckMarks")&&!a.hasClass(t.css.useCheckMarks)&&a.addClass(t.css.useCheckMarks),this.select(),this.get("disabled"))return this.disable();this.attachEvents({":toggle":this.toggle.bind(this),":set":this.setData.bind(this)}),this.registerEventHandler(this.labelEl.on("key",this.toggle,"down:13",this)),this.registerEventHandler(this.labelEl.on("key",this.enterDropdown,"down:40",this));var l=this.labelEl.next("ul");l&&(this.registerEventHandler(l.on("keydown",this.keyboardNavigation,this)),this.registerEventHandler(l.delegate("key",function(e){document.activeElement.dataset&&this.setData(e,document.activeElement.dataset)},"down:13","li",this)))},setData:function(t,s){if(t.halt(),!this.get("multiSelect")&&!this.get("multiSelectSub")&&e.Array.indexOf(this.get("selected"),s.value)>=0)return this.close();this.select(s.value,s)},select:function(s,i,a){var l,n=this,h=s?this._items[s]:null,o=!0,c=[];h&&e.Array.indexOf(this.get("selected"),s)>=0&&(this.get("multiSelect")||this.get("multiSelectSub"))?(c=this.get("selected"),!h.sub&&this.get("multiSelect")&&c.length>this.get("minimumSelected")?(c.splice(e.Array.indexOf(this.get("selected"),s),1),o=!1):h.sub&&(c.splice(e.Array.indexOf(this.get("selected"),s),1),o=!1),this.set("selected",c)):h&&(h.sub?(c.push(s),this.get("selectParent")&&c.push(h.sub),e.Array.each(this.get("selected"),function(e){n._items[e].sub===h.sub?c.push(e):n.get("multiSelect")&&!n._items[e].sub&&c.push(e)})):this.get("multiSelect")?(c=this.get("selected")).push(s):c.push(s),this.set("selected",c)),a||this.close(),l={clicked:h?{text:h.text,value:s,sub:h.sub,itemEl:h.node,isChecked:o}:null,data:i,selections:c},this.fire("selected",l),this.update(s,l,t)},update:function(t,s,i){var a=this,l=s.clicked,n=this.get("selected"),h=this.get("defaultLabel")||"[Unable to select a default item]";this.get("staticLabel")||(this.get("labelFunction")?h=this.get("labelFunction").apply(this,[t]):l?h=s.data&&s.data.text&&s.data.text!==l.text?s.data.text:l.text:n.length>0&&a._items[n[0]]&&(h=a._items[n[0]].text),this.labelEl.set("textContent",h||"[!empty data-text!]")),this.get("container").all(i.css.items).removeClass(i.css.itemSelected),e.Array.each(n,function(e){a._items[e]&&a._items[e].node.addClass(i.css.itemSelected)})},toggle:function(e){e&&e.halt(),this._open?this.close(e):this.open(e)},open:function(e){var s=this.get("container"),i=0;this._open=!0,this.get("shouldCreateShim")&&this._shimUp(),s.removeClass(t.css.closed),this.get("autoSizeMenu")&&(i=parseInt(this.labelEl.getComputedStyle("width"),10))+30>parseInt(s.one("ul").getComputedStyle("width"),10)&&s.one("ul").setStyles({width:i+30}),e&&e.silent||this.fire("open",e);var a=s.one("span:first-child");a&&a.setAttribute("aria-expanded","true")},close:function(e){var s=this.get("container");e&&e.halt(),this._open=!1,this._shimUp(!1),this.fire("close",e),s.addClass(t.css.closed);var i=this.labelEl;i&&i.setAttribute("aria-expanded","false")},enterDropdown:function(e){e.preventDefault();var t=this.labelEl.next("ul").one("li");t&&t.focus()},keyboardNavigation:function(e){var t=e.keyCode,s=38===t||9===t&&e.shiftKey,i=40===t||9===t&&!e.shiftKey,a=e.target.ancestor("li",!0);s&&a&&a.previous("li")?(e.preventDefault(),this.focusOnPreviousItem(e)):i?(e.preventDefault(),a&&a.next("li")&&this.focusOnNextItem(e)):(27===t||s)&&(e.preventDefault(),this.labelEl&&(this.labelEl.focus(),this.close()))},focusOnPreviousItem:function(e){var t=e.target.ancestor("li",!0);if(t){var s=t.previous("li");s&&(s.one("a")?s.one("a").focus():s.focus())}},focusOnNextItem:function(e){var t=e.target.ancestor("li",!0);if(t){var s=t.next("li");s&&(s.one("a")?s.one("a").focus():s.focus())}},_shimUp:function(s){if(!1===s){if(!this._shim)return;return this._shim.detach("click").remove(),void(this._shim=null)}this._shim=e.Node.create("<div />"),this._shim.addClass(t.css.shim),this._shim.on("click",this.close.bind(this)),this.get("container").appendChild(this._shim)},disable:function(){var e=this.get("container");this.set("disabled",!0),this.close(),e.addClass(t.css.disabled),e.detach()},destructor:function(){this._shimUp(!1),this._items=null,this.labelEl=null,this.set("selected",null),this.detachAll()}},{ATTRS:{selected:{value:[]},disabled:{value:!1},hasDialogArrow:{value:!1},useCheckMarks:{value:!1},multiSelect:{value:!1},multiSelectSub:{value:!1},selectParent:{value:!0},minimumSelected:{value:0},staticLabel:{value:!1},defaultLabel:{value:!1},labelFunction:function(){},shouldCreateShim:{value:!0},autoSizeMenu:{value:!0}}})},"@VERSION@",{requires:["flickr-view"]});YUI.add("user-limits-helper",function(i){var t=i.config.flickr.account.photo_limit,e=i.config.flickr.account.near_photo_limit;i.UserLimitsHelper={isNearUploadLimit:function(i,o){return o.getViewer().signedIn&&!o.getViewer().isPro&&i.getValue("photoCount")>=e&&i.getValue("photoCount")<t},isAtUploadLimit:function(i,e){return e.getViewer().signedIn&&!e.getViewer().isPro&&i.getValue("photoCount")>=t},isOverUploadLimit:function(i,e){return e.getViewer().signedIn&&!e.getViewer().isPro&&i.getValue("photoCount")>t},isOverARRLimit:function(i,e){return e.getViewer().signedIn&&!e.getViewer().isPro&&this.getARRCount(i)>t},hasReachedNearUploadLimit:function(i,t){return this.isNearUploadLimit(i,t)||this.isAtUploadLimit(i,t)||this.isOverUploadLimit(i,t)},hasReachedUploadLimit:function(i,t){return this.isAtUploadLimit(i,t)||this.isOverUploadLimit(i,t)},remainingAvailableUploads:function(i,t){return t.getValue("uploadLimit")-i.getValue("photoCount")},getARRCount:function(i){var t=i.getValue("arrPhotoCount");return t>=0?t:i.getValue("photoCount")}}},"@VERSION@",{requires:[]});YUI.add("hermes-template-footer-banner",function(e,a){var n=e.Template.Handlebars.revive({1:function(e,a,n,t,s){return'<a href="https://flickr.kustomer.help/en_us/add-and-verify-a-new-email-address-ry6qhVBV" target="_blank">'+e.escapeExpression((n.intlMessage||a&&a.intlMessage||n.helperMissing).call(null!=a?a:{},{name:"intlMessage",hash:{intlName:"featured-banner.UPDATE_YOUR_EMAIL"},data:s}))+"</a>"},3:function(e,a,n,t,s){var r,l=null!=a?a:{},i=n.helperMissing,o=e.escapeExpression;return'<a href="'+o("function"==typeof(r=null!=(r=n.migrateUrl||(null!=a?a.migrateUrl:a))?r:i)?r.call(l,{name:"migrateUrl",hash:{},data:s}):r)+'">'+o((n.intlMessage||a&&a.intlMessage||i).call(l,{name:"intlMessage",hash:{intlName:"featured-banner.UPDATE_YOUR_LOGIN"},data:s}))+"</a>"},compiler:[7,">= 4.0.0"],main:function(e,a,n,t,s){var r,l=null!=a?a:{};return'<div class="footer-container login-update-banner">\n\t<div class="footer-content">\n\t\t<p>'+e.escapeExpression((n.intlMessage||a&&a.intlMessage||n.helperMissing).call(l,{name:"intlMessage",hash:{intlName:"featured-banner.CHANGES_ARE_COMING"},data:s}))+" "+(null!=(r=n.if.call(l,null!=a?a.hasInvalidEmail:a,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?r:"")+'.</p>\n\t\t<div class="button-container">\n\t\t\t<a role="button" class="dismiss">\n\t\t\t\t<svg class="icon icon-close"><use xlink:href="#icon-close"></use></svg>\n\t\t\t</a>\n\t\t</div>\n\n\t</div>\n</div>\n'},useData:!0}),t={};e.Array.each([],function(a){var n=e.Template.get("hermes/"+a);n&&(t[a]=n)}),e.Template.register("hermes/footer-banner",function(a,s){return s=s||{},s.partials=s.partials?e.merge(t,s.partials):t,n(a,s)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("footer-banner-view",function(e,i){require("hermes-core/flog")(i);e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,loadState:function(){var i=this.appContext.getViewer(),n=[];return i.signedIn?(n.push(this.appContext.getModel("person-models",i.nsid).then(function(e){this.set("isCognitoUser",e.getValue("isCognitoUser")),this.set("hasInvalidEmail",e.getValue("hasInvalidEmail")),this.set("isPro",e.getValue("isPro"))}.bind(this))),n.push(this.appContext.getModel("person-profile-models",i.nsid).then(function(e){this.set("profileModel",e)}.bind(this))),e.Promise.all(n)):(this.set("isCognitoUser",0),e.Promise.resolve())},buildContainer:function(){return this.canSeeBanner()?(this.set("canSeeBanner",!0),this.setContainerWithTemplate("footer-banner",{hasInvalidEmail:this.get("hasInvalidEmail"),migrateUrl:e.config.flickr.cognito.root+e.config.flickr.cognito["migration-url"]})):(this.set("canSeeBanner",!1),this.setContainerHTML("")),this},activate:function(){var e=this.get("container");this.get("canSeeBanner")?(e.addClass("with-footer-banner"),this.registerEventHandler(e.one(".dismiss").on("click",this.dismissBanner.bind(this)))):this.setContainerHTML(""),this.appContext.getCookie("cmb")&&this.appContext.removeCookie({cookieName:"cmb",path:"/"})},dismissBanner:function(i){var n=new Date;n.setTime(n.getTime()+1728e5-36e5),this.appContext.setCookie({cookieName:e.config.flickr.cognito["migration-banner-cookie-name"],cookieValue:1,expires:n,path:"/"}),this.setContainerHTML("")},canSeeBanner:function(){var i=!1;return!this.appContext.getViewer().signedIn||this.get("isCognitoUser")||this.appContext.getCookie(e.config.flickr.cognito["migration-banner-cookie-name"])||this.isSeeingRefencingBanners()||(i=!0),i},isSeeingRefencingBanners:function(){return!1}})},"@VERSION@",{requires:["flickr-view","user-limits-helper","hermes-template-footer-banner"],langBundles:["common","privacy","refencing-announcement","featured-banner"]});YUI.add("hermes-lang-privacy",function(e,n){e.Intl.add("hermes/privacy","en-US",{OATH_DATA_USAGE:["Flickr and Yahoo are now part of “Oath” and are members of the Verizon family of companies. Beginning 15 September 2017, we plan to share some user information within our new family."],SM:["Exciting news: Flickr is joining SmugMug!"]})},"@VERSION@",{requires:["intl"]});YUI.add("hermes-lang-refencing-announcement",function(e,o){e.Intl.add("hermes/refencing-announcement","en-US",{LETS_BE_CANDID:["Let’s be candid."],FLICKR_AT_ITS_BEST:["Flickr at its best is a place to connect, to discover, and to evolve as photographers and lovers of photography. This is the world’s largest photographer-focused community. Here, together, this newly-independent community can shape the future of photography itself."],TODAY_WE_ARE_ANNOUNCING:["Today we are announcing updates to Flickr’s Pro and Free account offerings."],FLICKR_PRO_BETTER_THAN_EVER:['<span class="flickr-pro-text">Flickr Pro</span> is better than ever. For only ',"${price}",' per year, get <span class="unlimited-storage-text">unlimited storage</span>, ad-free browsing, advanced stats, an unmatched community, and more.'],UNLIMITED_STORAGE:["Unlimited Storage."],ONLY_LIMIT_IS_IMAGINATION:["The only limit is your imagination. Upload as many photos as you can take, always at true full resolution."],AD_FREE_BROWSING:["Ad-free Browsing."],FOCUS_ON_WHAT_MATTERS:["Focus on what matters. A fully ad-free Flickr experience for you and your visitors."],ADVANCED_STATS:["Advanced Stats."],SEE_WHICH_PHOTOS_ARE_TRENDING:["See which of your photos are trending now, and which have performed the best over the life of your Flickr Pro account."],PLUS_ALL_THESE_PRO_FEATURES:['Plus all these great <span class="new-text">new</span> Pro-only features.'],PREMIER_SUPPORT:["Premier Support"],PREMIER_PRODUCT_SUPPORT:["Premier Product Support"],SKIP_THE_LINE:['Skip the line. Flickr Pros now receive priority assistance from our new world-class support team. <span class="when-text">Available now.</span>'],MORE_PARTNER_DISCOUNTS:["More Partner Discounts"],SAVE_ON_PHOTOGRAPHY_ESSENTIALS:["Save on photography essentials. Discounts on Creative Cloud from Adobe, ","${smPercent}",'% off a custom portfolio site on SmugMug, gear from Peak Design, and many more. <span class="when-text">Coming November.</span>'],ADVANCED_STATS_ON_MOBILE:["Advanced Stats on Mobile"],STATS_IN_YOUR_POCKET:['Stats in your pocket. All the photo stats you know and love, available in-app. <span class="when-text">Coming November.</span>'],INCREASED_EXPOSURE:["Increased Exposure"],ALL_PROS_PRIORITY_EXPOSURE:['All Pro members as of January 1, 2019 are eligible for priority exposure in the next iteration of Explore. <span class="when-text">Coming early 2019.</span>'],NEW_5K_PHOTO_OPTION:["New 5K Photo Display Option"],LOOK_YOUR_BEST:['Look your best. Your images are beautifully optimized for any screen, from smartphone to jumbotron. Pro images display at resolutions up to 5K. <span class="when-text">Coming early 2019.</span>'],TEN_MINUTE_VIDEOS:["10 Minute Videos"],MORE_TIME_TO_TELL_STORY:['More time to tell your story. Play back videos for up to 10 minutes, increased from 3. <span class="when-text">Coming early 2019.</span>'],HANDS_DOWN_BEST_DEAL:["Hands down the best deal in photos."],BEST_DEAL_REASON:["Unlimited storage, ad-free browsing, and a global community of over 100 million photographers for less than half the cost of Apple, Amazon, or Google. Sign up today and get ","${percent}","% off the first year. Discount available through November 30."],GET_PRO_30_OFF:["Get Pro today for ","${percent}","% off"],FREE_ACCOUNTS_1000_PHOTOS:['<span class="free-accounts-text">Free accounts</span> will soon be limited to 1,000 photos or videos. Flickr isn’t Flickr without the contributions and participation of our free members, and we remain committed to a vibrant free offering.'],IF_YOU_ARE_FREE_MEMBER:["If you are a free member with more than 1,000 photos or videos, you will have ample time to upgrade to Pro (for ","${percent}",'% off your first year) or download your photos and videos.<a href="',"${url}",'" title="',"${title}",'">*</a>'],READ_MORE_ABOUT_DECISION:["Read more about this decision."],YOUR_PHOTOGRAPHY_COMMUNITY:["Your Photography Community"],SHARE_DISCOVER_GROW:["Share, discover, and grow. No matter your passion, there are photographers here who share it."],ORGANIZE_BEAUTIFULLY:["Organize Beautifully"],POWERFUL_INTUITIVE_TOOLS:["Powerful, intuitive tools to organize your photos and share them with the people who matter to you."],FREE_MEMBERS_NOTICE:["*Free members with more than 1,000 photos or videos uploaded to Flickr have until Tuesday, January 8, 2019, to upgrade to Pro or download content over the limit. After January 8, 2019, members over the limit will no longer be able to upload new photos to Flickr. After February 5, 2019, free accounts that contain over 1,000 photos or videos will have content actively deleted -- starting from oldest to newest date uploaded -- to meet the new limit."],READY_FOR_PRO:["Ready for Pro?"],NEW_PROS_RECEIVE_DISCOUNT:["New Pros receive ","${percent}","% off their first year. Discounted price available until Nov 30."],UPGRADE_TO_PRO:["Upgrade to Pro"],NEW_SIMPLE_LOGIN:["New simple login!"],COMING_IN_JANUARY_LOGIN:["Coming in January, there will be no need for a Yahoo account to use Flickr."],ANNOUNCEMENT_BANNER_ACCOUNTS_CHANGING:["Flickr’s Pro and Free account offerings are changing. See what it means for you."],SAVE_ON_PHOTOGRAPHY_ESSENTIALS_NOW:["Save on photography essentials. Discounts on Creative Cloud from Adobe, ","${smPercent}",'% off a custom portfolio site on SmugMug, gear from Peak Design, and many more. <span class="when-text">Available Now.</span>'],STATS_IN_YOUR_POCKET_NOW:['Stats in your pocket. All the photo stats you know and love, available in-app. <span class="when-text">Available Now.</span>'],BEST_DEAL_REASON_JAN:["Unlimited storage, ad-free browsing, and a global community of over 100 million photographers for less than half the cost of Apple, Amazon, or Google. Sign up today and get ","${percent}","% off the first year. Discount available through January 8."],BEST_DEAL_REASON_JAN_X:["Unlimited storage, ad-free browsing, and a global community of over 100 million photographers for less than half the cost of Apple, Amazon, or Google. Sign up today and get ","${percent}","% off the first year. Discount available through January ","${dateNumber}","."],NEW_PROS_RECEIVE_DISCOUNT_JAN:["New Pros receive ","${percent}","% off their first year. Discounted price available until January 8."],NEW_PROS_RECEIVE_DISCOUNT_JAN_X:["New Pros receive ","${percent}","% off their first year. Discounted price available until January ","${dateNumber}","."],WE_ARE_ANNOUNCING:["We are announcing updates to Flickr’s Pro and Free account offerings."],ALL_PROS_PRIORITY_EXPOSURE_2:["All Pro members are eligible for priority exposure in the next iteration of Explore. Coming early 2019."],BEST_DEAL_REASON_2:["Unlimited storage, ad-free browsing, and a global community of more than 100 million photographers for less than half the cost of Apple, Amazon, or Google."],GET_PRO_TODAY:["Get Pro today"],IF_YOU_ARE_FREE_MEMBER_2:["If you are a free member with more than ","${limitCount}"," photos or videos, you will have ample time to upgrade to Pro or download your photos and videos.*"],FREE_MEMBERS_NOTICE_2:["*Free members with more than ","${limitCount}"," photos or videos uploaded to Flickr have until Tuesday, January 8, 2019, to upgrade to Pro or download content over the limit. After January 8, 2019, members over the limit will no longer be able to upload new photos to Flickr. On February 5, 2019, photos and videos over the free account ","${limitCount}"," item limit will be at risk of deletion beginning with the oldest photos and videos."],JOIN_LARGEST_COMMUNITY:["Join the largest, most influential group of photographers on the planet, and find your community today."],COMING_SOON_LOGIN:["Coming soon, there will be no need for a Yahoo account to use Flickr."],ALL_PROS_PRIORITY_EXPOSURE_3:["All Pro members are eligible for priority exposure in the next iteration of Explore."],COMING_LATE_2019:["Coming late 2019."]})},"@VERSION@",{requires:["intl"]});YUI.add("hermes-lang-featured-banner",function(e,a){e.Intl.add("hermes/featured-banner","en-US",{CHANGES_ARE_COMING:["Changes are coming to the way you log into Flickr!"],UPDATE_YOUR_EMAIL:["Update your email address to get started"],UPDATE_YOUR_LOGIN:["Update your login now"]})},"@VERSION@",{requires:["intl"]});YUI.add("footer-full-view",function(t){var e=["en-US","zh-HK","de-DE","es-US","fr-FR","ko-KR","it-IT","pt-BR","vn-VN","id-ID"],n={"en-US":"English","de-DE":"Deutsch","es-US":"Español","fr-FR":"Français","ko-KR":"한글","it-IT":"Italiano","pt-BR":"Português","vn-VN":"Tiếng Việt","id-ID":"Bahasa Indonesia","zh-HK":"繁體中文"};t.FlickrView.create(this.name,t.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return""===this.get("container").get("innerHTML")&&this.setContainerHTML('<div class="footer-full-content"></div>'),this.appStateParams=t,this},loadState:function(){var o,a,s;for(s=this.appContext.auth&&this.appContext.auth.csrf?this.appContext.auth.csrf:"",this.lang=this.appContext.lang,this.menuLangs=[],"zh-Hant-HK"===this.lang&&(this.lang="zh-HK"),"vi-vn"===this.lang.toLowerCase()&&(this.lang="vn-VN"),this.selectedLang={code:this.lang,name:n[this.lang],csrf:s},o=0,a=e.length;o<a;o++)e[o]!==this.lang&&"string"==typeof e[o]&&this.menuLangs.push({code:e[o].toLowerCase(),name:n[e[o]],csrf:s});return t.Promise.resolve()},buildContainer:function(){var e={};return this.get("viewer")&&t.merge(this.get("viewer").toJSON(),{urls:t.URLHelper.generatePersonUrls(this.get("viewer"))}),(e={displayLangs:this.displayLangs,selectedLang:this.selectedLang,helpLocaleKey:this.selectedLang.code.replace("-","_")||"en_US",menuLangs:this.menuLangs,elements:this.setElementStates(),adobeAnalyticsUrl:t.config.flickr.adobe.analytics.url}).elements.bottom_row||this.get("container").addClass("compact"),YUI.Env.isServer?e.pageUrl=this.appContext.request.url:e.pageUrl=window.location.pathname,this.setContainerWithTemplate("footer-full",e),this},activate:function(){var e=this.get("container").one(".lang-switcher"),n=e.one("a");return this.menuLangsFormatted=this.menuLangs.map(function(t){return{href:"/change_language.gne?lang="+t.code+"&csrf="+t.csrf,text:t.name}}),this.registerEventHandler(e.on("click",function(o){o.preventDefault(),n.addClass("dimmed");var a=new t.Views.FluidDroparound({anchorOffsetHorizontal:15,appContext:this.appContext,showDropArrow:!0,observePageResize:!0,dismissOnOverlayClick:!0,anchorElement:e.one(".arrow"),classList:["lang-droparound"],menuItems:this.menuLangsFormatted});a.show(),this.registerEventHandler(a.on("closeDroparound",function(t){n.removeClass("dimmed")}),this)},this)),this},setElementStates:function(){var t={top_row:!0,top_about:!0,top_jobs:!0,top_blog:!0,top_developers:!0,top_guidelines:!0,top_privacy:!1,top_terms:!1,top_report_abuse:!0,top_help:!1,top_help_forum:!0,top_language:!0,bottom_row:!0,bottom_privacy:!0,bottom_terms:!0,bottom_help:!0,bottom_yahoo_company:!1,bottom_tumblr:!0,bottom_facebook:!0,bottom_twitter:!0};return this.appContext.flipper.isFlipped("relocate-footer-help-button")&&(t.top_help=!0,t.bottom_help=!1),this.appStateParams.isSOHP&&(t.top_privacy=!0,t.top_terms=!0,t.top_report_abuse=!1,t.bottom_row=!1),t}})},"@VERSION@",{requires:["flickr-view","hermes-template-footer-full","url-helper","dropdown","footer-banner-view","fluid-droparound-view"],langBundles:["common"]});YUI.add("search-photos-unified-page-view",function(e){var i=e.url("/help/forum/en-us/72157651248603362/lastpage#reply"),a=244;e.namespace("Views")[this.name]=e.Base.create("search-photos-unified-page-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(i){var s;return this.appContext.flipper.isFlipped("enable-slender-advanced-search")&&(a=100),this.unifiedSubviewParams=i.unifiedSubviewParams||{},s=this.unifiedSubviewParams.everyone&&this.unifiedSubviewParams.everyone.fetchParams?this.unifiedSubviewParams.everyone.fetchParams.apiParams:{},this.searchUrl=new e.SearchUrl(s,this.appContext,e.SearchUrl.searchTypes.PHOTOS),this.apiParams=this.searchUrl.getAPIParams(),this.advancedPanelOpen=i.openAdvanced||!1,this.isMobile=i.isMobile,this.searchTerm=i.searchTerm,this.apiFailed=i.apiFailed,i.sortMenuItems=this.buildSortMenuItems(this.apiParams,!this.appContext.flipper.isFlipped("enable-slender-advanced-search")),this},subviewConfig:{"global-nav-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0,isSearchResults:!0},"search-subnav-slender-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"search-empty-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0},"search-photos-yours-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,disabled:function(){return!this.unifiedSubviewParams.yours}},"search-photos-contacts-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,disabled:function(){return!this.unifiedSubviewParams.contacts}},"search-photos-albums-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,disabled:function(){return!this.unifiedSubviewParams.albums}},"search-slender-advanced-panel-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,disabled:function(e){return e.isMobile}},"search-photos-everyone-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,disabled:function(){return!this.unifiedSubviewParams.everyone}},"feedback-widget-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0,feedbackUrl:i,trackingSlk:"search-photos-feedback",hidden:!0},"signup-footer-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,pageType:"search"},"footer-full-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0}},loadState:function(){var i=this,a={};return this.apiFailed||!this.unifiedSubviewParams?e.Promise.resolve():(this.unifiedSubviewParams.everyone&&(a.everyone=this.appContext.getModel("search-photos-lite-models",this.unifiedSubviewParams.everyone.id,this.unifiedSubviewParams.everyone.fetchParams)),this.unifiedSubviewParams.yours&&(a.yours=this.appContext.getModel("search-photos-lite-models",this.unifiedSubviewParams.yours.id,this.unifiedSubviewParams.yours.fetchParams)),this.unifiedSubviewParams.contacts&&(a.contacts=this.appContext.getModel("search-photos-lite-models",this.unifiedSubviewParams.contacts.id,this.unifiedSubviewParams.contacts.fetchParams)),this.unifiedSubviewParams.albums&&(a.albums=this.appContext.getModel("search-sets-models",this.unifiedSubviewParams.albums.id,this.unifiedSubviewParams.albums.fetchParams)),e.FlickrPromise(a).then(function(e){i.subviewVisibility=i.determineSubviewVisibility(e),i.subviewVisibility.empty&&(e.everyone&&!e.everyone.getValue("emptyQuery")||e.albums&&!e.albums.getValue("emptyQuery"))&&(i.subviews["search-empty-view"].set("noMatchesForQuery",i.buildNoMatchesFoundMessage()),i.subviews["search-empty-view"].fire("parentViewEvent","error-msg-updated"))}))},buildContainer:function(){var i,a=this.appContext.flipper.isFlipped("enable-slender-advanced-search")&&!this.isMobile;return a&&this.subviews["search-slender-advanced-panel-view"]?this.advancedPanelVisible=this.subviews["search-slender-advanced-panel-view"].getStoredAdvancedOptionsState()||this.advancedPanelOpen:this.advancedPanelVisible=!1,i={useSlenderAdvancedPanel:a,showEmpty:!this.subviewVisibility||this.subviewVisibility.empty,showAlbums:this.subviewVisibility&&this.subviewVisibility.albums,showEveryones:this.subviewVisibility&&this.subviewVisibility.everyone,showContacts:this.subviewVisibility&&this.subviewVisibility.contacts,showYours:this.subviewVisibility&&this.subviewVisibility.yours,viewingAll:this.searchUrl.getAPIParam(e.SearchHelper.UNIFIED_STATE_PARAMS.viewAll),advancedPanelVisible:this.advancedPanelVisible},["search-empty-view","search-photos-yours-view","search-photos-albums-view","search-photos-contacts-view","search-photos-everyone-view"].forEach(function(e){this.subviews[e]&&(i[e]=this.subviews[e].get("container"))}.bind(this)),this.setContainerWithTemplate("search-photos-unified-page-view",i),this},activate:function(){return this.fire("parentViewEvent","unhideFeedbackWidget"),e.later(100,this,function(){e.use("photo-page-scrappy-view")}),this},determineSubviewVisibility:function(e){var i={everyone:!(!e.everyone||!e.everyone.getValue("totalItems")),yours:!(!e.yours||!e.yours.getValue("totalItems")),contacts:!(!e.contacts||!e.contacts.getValue("totalItems")),albums:!(!e.albums||!e.albums.getValue("totalItems"))};return!this.appContext.flipper.isFlipped("enable-similarity-search")&&this.unifiedSubviewParams&&this.unifiedSubviewParams.everyone&&this.unifiedSubviewParams.everyone.fetchParams&&this.unifiedSubviewParams.everyone.fetchParams.apiParams.similarity_id&&(i.everyone=!1),i.empty=!(i.everyone||i.yours||i.contacts||i.albums),i},buildSortMenuItems:function(i,a){var s=new e.SearchUrl(i,this.appContext).setSearchType(e.SearchUrl.searchTypes.PHOTOS);return[{text:this.intlMessage({intlName:"search.RELEVANT"}),value:e.SearchHelper.API_SORT_OPTIONS.relevant,href:a?s.setAPIParam("sort",e.SearchHelper.API_SORT_OPTIONS.relevant).getURL():null,isDefault:!0},{text:this.intlMessage({intlName:"search.DATE_UPLOADED"}),value:e.SearchHelper.API_SORT_OPTIONS.dateUploaded,href:a?s.setAPIParam("sort",e.SearchHelper.API_SORT_OPTIONS.dateUploaded).getURL():null},{text:this.intlMessage({intlName:"search.DATE_TAKEN"}),value:e.SearchHelper.API_SORT_OPTIONS.dateTaken,href:a?s.setAPIParam("sort",e.SearchHelper.API_SORT_OPTIONS.dateTaken).getURL():null},{text:this.intlMessage({intlName:"search.INTERESTING"}),value:e.SearchHelper.API_SORT_OPTIONS.interesting,href:a?s.setAPIParam("sort",e.SearchHelper.API_SORT_OPTIONS.interesting).getURL():null}]},buildNoMatchesFoundMessage:function(){var i,a,s=this.appContext.getViewer();return a=this.apiParams.user_id?s.signedIn&&this.apiParams.user_id===s.nsid?this.searchTerm?"search.NO_MATCHES_FOR_QUERY_TERM_CONTEXT_YOUR":"search.NO_MATCHES_FOR_QUERY_TERM_YOUR":this.searchTerm?"search.NO_MATCHES_FOR_QUERY_TERM_CONTEXT_USER":"search.NO_MATCHES_FOR_QUERY_TERM_USER":this.apiParams.contacts?this.searchTerm?"search.NO_MATCHES_FOR_QUERY_TERM_CONTEXT_CONTACTS":"search.NO_MATCHES_FOR_QUERY_TERM_CONTACTS":this.apiParams.group_id?this.searchTerm?"search.NO_MATCHES_FOR_QUERY_TERM_CONTEXT_GROUP":"search.NO_MATCHES_FOR_QUERY_TERM_GROUP":this.searchTerm?"search.NO_MATCHES_FOR_QUERY_TERM":"search.NO_MATCHES_FOR_QUERY",i=this.searchTerm?this.intlMessage({intlName:a,searchTerm:e.flutil.unescape(this.searchTerm)}):this.intlMessage({intlName:a}),{noMatchesText:i}},onSubviewEvent:function(e,i){if(i){switch(i[0]){case"dirty":case"search:dirty":this.get("container").addClass("dirty");break;case"bigScotch":this.bigScotch(i);break;case"footerDisplayChanged":this.fire("parentViewEvent","footerDisplayChanged");break;case"search:layoutChange":void 0!==i[1]&&this.fire("parentViewEvent","search:layoutChange",i[1]);break;case"search:startAdvancedPanelTransition":void 0!==i[1]&&this.handleAdvancedPanelTransitionStart(i[1]);break;case"search:finishAdvancedPanelTransition":void 0!==i[1]&&this.handleAdvancedPanelTransitionEnd(i[1]);break;default:i[2]&&"toggle-advanced"===i[2]&&this.toggleAdvancedSearch()}}},handleAdvancedPanelTransitionStart:function(i){var s=this.get("container").one("main");i?(!this.showEmpty&&e.config.win.pageYOffset>34||(s.addClass("advanced-panel-transition"),s.addClass("advanced-panel-visible"),e.flutil.onTransitionEnd(s,function(){s.removeClass("advanced-panel-transition")})),this.advancedPanelVisible=!0):(!this.showEmpty&&e.config.win.pageYOffset>a||(s.addClass("advanced-panel-transition"),s.removeClass("advanced-panel-visible"),e.flutil.onTransitionEnd(s,function(){s.removeClass("advanced-panel-transition")})),this.advancedPanelVisible=!1)},handleAdvancedPanelTransitionEnd:function(i){var s,n=this.get("container").one("main");i?!this.showEmpty&&e.config.win.pageYOffset>34&&(n.addClass("advanced-panel-visible"),window.scrollBy(0,a)):!this.showEmpty&&e.config.win.pageYOffset>a&&(s=Math.min(a,e.config.win.document.body.scrollHeight-e.config.win.innerHeight-e.config.win.pageYOffset),n.removeClass("advanced-panel-visible"),window.scrollBy(0,-s))},toggleAdvancedSearch:function(){this.advancedPanelVisible?this.closeAdvancedPanel():this.openAdvancedPanel()},openAdvancedPanel:function(){var i=this.get("container").one(".advanced-search-wrapper"),s=this.get("container").one("main");!this.showEmpty&&e.config.win.pageYOffset>34?(s.addClass("advanced-panel-opening"),i.removeClass("collapsed"),this.subviews["search-slender-advanced-panel-view"].fire("parentViewEvent","open-advanced"),this.advancedPanelVisible=!0,e.flutil.onTransitionEnd(i,function(){s.removeClass("advanced-panel-opening"),s.addClass("advanced-panel-visible"),window.scrollBy(0,a)})):(i.removeClass("collapsed"),s.addClass("advanced-panel-visible"),this.subviews["search-slender-advanced-panel-view"].fire("parentViewEvent","open-advanced"),this.advancedPanelVisible=!0)},closeAdvancedPanel:function(){var i,s=this.get("container").one(".advanced-search-wrapper"),n=this.get("container").one("main");!this.showEmpty&&e.config.win.pageYOffset>a?(n.addClass("advanced-panel-collapsing"),s.addClass("collapsed"),this.subviews["search-slender-advanced-panel-view"].fire("parentViewEvent","collapse-advanced"),this.advancedPanelVisible=!1,i=Math.min(a,e.config.win.document.body.scrollHeight-e.config.win.innerHeight-e.config.win.pageYOffset),e.flutil.onTransitionEnd(s,function(){n.removeClass("advanced-panel-collapsing"),n.removeClass("advanced-panel-visible"),window.scrollBy(0,-i)})):(s.addClass("collapsed"),n.removeClass("advanced-panel-visible"),this.subviews["search-slender-advanced-panel-view"].fire("parentViewEvent","collapse-advanced"),this.advancedPanelVisible=!1)},bigScotch:function(i){var a=i&&i[1],s=this.searchUrl.getAPIParam(e.SearchHelper.API.excludeUserId)||"";a&&(s&&(s+=","),s+=a,this.searchUrl.setAPIParam(e.SearchHelper.API.excludeUserId,s),this.appContext.flapp.navigate(this.searchUrl.getURL()))}},{ATTRS:{spaceid:{value:792600534}}})},"@VERSION@",{requires:["url","flutil","flickr-view","flickr-promise","search-helper","hermes-template-search-photos-unified-page-view","search-subnav-slender-view","search-empty-view","search-photos-albums-view","search-photos-yours-view","search-photos-contacts-view","search-slender-advanced-panel-view","search-photos-everyone-view","search-url","feedback-widget-view","footer-full-view","querystring-stringify-simple","search-photos-lite-models"],langBundles:["search"]});